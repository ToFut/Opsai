"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai-generate-yaml/route";
exports.ids = ["app/api/ai-generate-yaml/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-generate-yaml%2Froute&page=%2Fapi%2Fai-generate-yaml%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-generate-yaml%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-generate-yaml%2Froute&page=%2Fapi%2Fai-generate-yaml%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-generate-yaml%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_segevbin_Desktop_Opsai_apps_opsai_onboarding_app_api_ai_generate_yaml_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ai-generate-yaml/route.ts */ \"(rsc)/./app/api/ai-generate-yaml/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai-generate-yaml/route\",\n        pathname: \"/api/ai-generate-yaml\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai-generate-yaml/route\"\n    },\n    resolvedPagePath: \"/Users/segevbin/Desktop/Opsai/apps/opsai-onboarding/app/api/ai-generate-yaml/route.ts\",\n    nextConfigOutput,\n    userland: _Users_segevbin_Desktop_Opsai_apps_opsai_onboarding_app_api_ai_generate_yaml_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ai-generate-yaml/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zMF9yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaS1nZW5lcmF0ZS15YW1sJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhaS1nZW5lcmF0ZS15YW1sJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWktZ2VuZXJhdGUteWFtbCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNlZ2V2YmluJTJGRGVza3RvcCUyRk9wc2FpJTJGYXBwcyUyRm9wc2FpLW9uYm9hcmRpbmclMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGc2VnZXZiaW4lMkZEZXNrdG9wJTJGT3BzYWklMkZhcHBzJTJGb3BzYWktb25ib2FyZGluZyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDcUM7QUFDbEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHNhaS1vbmJvYXJkaW5nLz9mMzRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zZWdldmJpbi9EZXNrdG9wL09wc2FpL2FwcHMvb3BzYWktb25ib2FyZGluZy9hcHAvYXBpL2FpLWdlbmVyYXRlLXlhbWwvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpLWdlbmVyYXRlLXlhbWwvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9haS1nZW5lcmF0ZS15YW1sXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9haS1nZW5lcmF0ZS15YW1sL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NlZ2V2YmluL0Rlc2t0b3AvT3BzYWkvYXBwcy9vcHNhaS1vbmJvYXJkaW5nL2FwcC9hcGkvYWktZ2VuZXJhdGUteWFtbC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWktZ2VuZXJhdGUteWFtbC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-generate-yaml%2Froute&page=%2Fapi%2Fai-generate-yaml%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-generate-yaml%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai-generate-yaml/route.ts":
/*!*******************************************!*\
  !*** ./app/api/ai-generate-yaml/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/../../node_modules/.pnpm/openai@4.104.0/node_modules/openai/index.mjs\");\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(request) {\n    try {\n        const { businessAnalysis, confirmedInsights, businessProfile, customizations } = await request.json();\n        if (!businessAnalysis || !confirmedInsights) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Business analysis and confirmed insights are required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(`🤖 Starting AI YAML generation for: ${businessProfile.businessName}`);\n        // Stage 2: Generate Custom YAML Configuration\n        const yamlConfig = await generateYAMLWithAI(businessAnalysis, confirmedInsights, businessProfile, customizations);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            yaml: yamlConfig.yaml,\n            config: yamlConfig.structured,\n            metadata: {\n                generatedAt: new Date().toISOString(),\n                model: \"gpt-4o\",\n                stage: \"yaml_generation\"\n            }\n        });\n    } catch (error) {\n        console.error(\"AI YAML Generation error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate YAML configuration\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to try parsing JSON with various cleanup strategies\nasync function tryParseJson(jsonString) {\n    const strategies = [\n        // Strategy 1: Parse as-is\n        (str)=>JSON.parse(str),\n        // Strategy 2: Remove trailing commas\n        (str)=>JSON.parse(str.replace(/,(\\s*[}\\]])/g, \"$1\")),\n        // Strategy 3: Quote unquoted keys and remove trailing commas\n        (str)=>JSON.parse(str.replace(/,(\\s*[}\\]])/g, \"$1\").replace(/([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*:/g, '\"$1\":')),\n        // Strategy 4: Fix common formatting issues\n        (str)=>{\n            let cleaned = str.replace(/,(\\s*[}\\]])/g, \"$1\") // Remove trailing commas\n            .replace(/([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*:/g, '\"$1\":') // Quote keys\n            .replace(/'/g, '\"') // Replace single quotes\n            .replace(/:\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*([,}\\]])/g, ': \"$1\"$2') // Quote unquoted string values\n            ;\n            return JSON.parse(cleaned);\n        },\n        // Strategy 5: Try to fix truncated JSON by adding missing closing braces\n        (str)=>{\n            let braceCount = 0;\n            let cleanStr = str.replace(/,(\\s*[}\\]])/g, \"$1\");\n            for (const char of cleanStr){\n                if (char === \"{\") braceCount++;\n                else if (char === \"}\") braceCount--;\n            }\n            // Add missing closing braces\n            while(braceCount > 0){\n                cleanStr += \"}\";\n                braceCount--;\n            }\n            return JSON.parse(cleanStr);\n        }\n    ];\n    for (const strategy of strategies){\n        try {\n            const result = strategy(jsonString.trim());\n            console.log(\"✅ JSON parsing strategy succeeded\");\n            return result;\n        } catch (e) {\n            continue;\n        }\n    }\n    console.log(\"❌ All JSON parsing strategies failed\");\n    return null;\n}\nasync function generateYAMLWithAI(businessAnalysis, confirmedInsights, businessProfile, customizations = {}) {\n    const yamlPrompt = `\nYou are an expert software architect. Generate a HIGHLY CUSTOMIZED YAML configuration for this specific business.\n\nBUSINESS INTELLIGENCE:\n- Name: ${businessProfile.businessName}\n- Industry: ${confirmedInsights.businessIntelligence?.industryCategory || businessProfile.businessType}\n- Business Model: ${confirmedInsights.businessIntelligence?.businessModel || \"General Business\"}\n- Revenue Streams: ${JSON.stringify(confirmedInsights.businessIntelligence?.revenueStreams || [])}\n- Target Audience: ${confirmedInsights.businessIntelligence?.targetAudience || \"General customers\"}\n- Competitive Advantages: ${JSON.stringify(confirmedInsights.businessIntelligence?.competitiveAdvantages || [])}\n- Operational Complexity: ${confirmedInsights.businessIntelligence?.operationalComplexity || \"medium\"}\n- Scale Requirements: ${confirmedInsights.businessIntelligence?.scalabilityRequirements || \"regional\"}\n\nDETAILED DATA MODELS (use these EXACTLY):\n${JSON.stringify(confirmedInsights.technicalRequirements?.dataModels || [], null, 2)}\n\nSPECIFIC INTEGRATIONS NEEDED:\n${JSON.stringify(confirmedInsights.technicalRequirements?.integrationOpportunities || [], null, 2)}\n\nUSER ROLES & PERMISSIONS:\n${JSON.stringify(confirmedInsights.userManagement?.userTypes || [], null, 2)}\n\nWORKFLOW REQUIREMENTS:\n${JSON.stringify(confirmedInsights.technicalRequirements?.workflowRequirements || [], null, 2)}\n\nCRITICAL UI/UX FEATURES:\n${JSON.stringify(confirmedInsights.uiuxRecommendations?.criticalFeatures || [], null, 2)}\n\nCOMPLIANCE & SECURITY NEEDS:\n${JSON.stringify(confirmedInsights.userManagement?.securityRequirements || {}, null, 2)}\n\nGenerate a complete YAML configuration that includes:\n\n1. **Vertical Definition** - Business-specific application metadata\n2. **Database Schema** - Complete data models with relationships, validation, and indexes\n3. **API Integrations** - Real third-party services with authentication and endpoints\n4. **Workflows** - Automated business processes with triggers and steps\n5. **User Management** - Role-based access control and authentication\n6. **UI Configuration** - Pages, components, and user experiences\n7. **Alerts & Notifications** - Business-critical alerts and communication\n8. **Deployment Settings** - Production-ready deployment configuration\n9. **Security Configuration** - Data protection and compliance settings\n10. **Performance Optimization** - Caching, scaling, and monitoring\n\nYAML STRUCTURE REQUIREMENTS:\n\n\\`\\`\\`yaml\n# Business Application Configuration\nvertical:\n  name: [kebab-case-name]\n  description: [specific business description]\n  version: \"1.0.0\"\n  industry: [specific industry]\n  businessModel: [confirmed business model]\n\nbusiness:\n  name: [business name]\n  type: [business type]\n  website: [website URL]\n  contact:\n    email: [contact email]\n    phone: [phone if available]\n  settings:\n    timezone: [appropriate timezone]\n    currency: [business currency]\n    language: \"en\"\n\ndatabase:\n  provider: \"postgresql\"\n  models: [generate specific models based on analysis]\n    - name: [ModelName]\n      displayName: [Human readable name]\n      description: [business purpose]\n      fields:\n        - name: [field_name]\n          type: [appropriate type]\n          required: [boolean]\n          unique: [boolean if needed]\n          validation: [specific validation rules]\n          ui:\n            label: [user-friendly label]\n            widget: [appropriate UI widget]\n            [additional UI config]\n      relationships: [define foreign keys and relations]\n      indexes: [performance indexes]\n      permissions: [role-based field access]\n\napis:\n  integrations: [specific to business needs]\n    - name: [integration_name]\n      type: \"rest\" | \"soap\" | \"webhook\"\n      provider: [actual service provider]\n      baseUrl: [real API URL]\n      authentication:\n        type: [oauth2|api_key|basic]\n        [auth configuration]\n      endpoints: [actual API endpoints]\n      rateLimits: [real rate limits]\n      errorHandling: [retry policies]\n\nworkflows: [business-specific automation]\n  - name: [workflow_name]\n    description: [business purpose]\n    trigger:\n      type: [api_call|schedule|event]\n      [trigger configuration]\n    steps: [detailed workflow steps]\n    errorHandling: [failure scenarios]\n    monitoring: [success metrics]\n\nauthentication:\n  providers: [appropriate auth methods]\n  roles: [specific user roles]\n  permissions: [granular permissions]\n  security:\n    passwordPolicy: [strong policies]\n    sessionManagement: [secure sessions]\n    auditLogging: [compliance logging]\n\nui:\n  theme:\n    primaryColor: [brand appropriate]\n    secondaryColor: [complementary]\n    layout: [appropriate layout style]\n  pages: [business-specific pages]\n    - name: [page_name]\n      path: [URL path]\n      layout: [page layout]\n      components: [specific components]\n      permissions: [access control]\n\nalerts:\n  channels: [appropriate channels]\n  rules: [business-critical alerts]\n    - name: [alert_name]\n      description: [business context]\n      conditions: [specific conditions]\n      actions: [notification actions]\n      severity: [appropriate level]\n\ndeployment:\n  platform: [recommended platform]\n  environment: \"production\"\n  resources:\n    api: [appropriate sizing]\n    database: [appropriate sizing]\n    storage: [if needed]\n  domains: [custom domain]\n  ssl: true\n  monitoring: [comprehensive monitoring]\n  backup:\n    frequency: [appropriate frequency]\n    retention: [appropriate retention]\n\nfeatures: [enable relevant features]\n  authentication: true\n  workflows: true\n  integrations: true\n  fileUpload: [if needed]\n  notifications: true\n  analytics: true\n  multiTenancy: [if needed]\n  audit: [if compliance needed]\n\nsecurity:\n  encryption:\n    atRest: true\n    inTransit: true\n  compliance: [relevant standards]\n  dataRetention: [appropriate policies]\n  accessLogging: true\n\nperformance:\n  caching:\n    strategy: [appropriate strategy]\n    ttl: [appropriate TTL]\n  scaling:\n    type: [horizontal|vertical]\n    triggers: [scaling metrics]\n  monitoring:\n    metrics: [key performance indicators]\n    alerting: [performance alerts]\n\\`\\`\\`\n\nCRITICAL GENERATION GUIDELINES:\n1. **USE THE EXACT DATA PROVIDED**: Transform the specific data models, integrations, workflows, and user roles provided above into the YAML - do not create generic examples\n2. **INDUSTRY-SPECIFIC CUSTOMIZATION**: Generate configurations that are uniquely suited to this industry and business model\n3. **BUSINESS-SPECIFIC FEATURES**: Include features and workflows that directly address this business's revenue streams and operational needs\n4. **EXACT DATA MODEL IMPLEMENTATION**: Use the provided data models with their exact field definitions, relationships, and business purposes\n5. **REAL INTEGRATION MAPPING**: Configure the specific third-party services identified for this business with appropriate endpoints and authentication\n6. **ROLE-BASED CUSTOMIZATION**: Implement the exact user roles and permissions structure identified for this business\n7. **WORKFLOW AUTOMATION**: Create workflows that automate the specific business processes identified in the analysis\n8. **COMPLIANCE ALIGNMENT**: Address the specific regulatory and compliance requirements for this industry\n9. **SCALABILITY MATCHING**: Design for the specific scale requirements (local/regional/national/global) identified\n10. **COMPETITIVE ADVANTAGE SUPPORT**: Include features that support the business's identified competitive advantages\n\nCRITICAL OUTPUT REQUIREMENTS:\n- Return ONLY a valid JSON object\n- NO markdown code blocks (no backticks)\n- NO explanations or comments\n- NO additional text before or after the JSON\n\nReturn a JSON object with this exact structure:\n{\n  \"yaml\": \"# The complete YAML configuration as a string here\\nvertical:\\n  name: example\\n  ...\",\n  \"structured\": {\n    \"vertical\": { \"name\": \"example\", ... },\n    \"database\": { ... },\n    \"apis\": { ... }\n  }\n}\n\nIMPORTANT: This YAML must be UNIQUELY CUSTOMIZED for ${businessProfile.businessName} in the ${confirmedInsights.businessIntelligence?.industryCategory || businessProfile.businessType} industry. \nDo NOT generate generic templates - use the specific business intelligence, data models, integrations, and workflows provided above.\n\nStart your response with { and end with } - nothing else.\n`;\n    try {\n        console.log(\"\\uD83E\\uDD16 Sending YAML generation request to OpenAI...\");\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4o\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are an expert software architect specializing in business application configuration. You have deep expertise in YAML, database design, API integrations, workflow automation, and modern web application architecture. You generate production-ready configurations that solve real business problems. CRITICAL: Return ONLY valid JSON with no markdown formatting, no code blocks, no explanations - just the raw JSON object exactly as specified in the prompt.\"\n                },\n                {\n                    role: \"user\",\n                    content: yamlPrompt\n                }\n            ],\n            temperature: 0.2,\n            max_tokens: 4000\n        });\n        const responseContent = response.choices[0].message.content || \"{}\";\n        let yamlResult;\n        console.log(\"Raw OpenAI response length:\", responseContent.length);\n        console.log(\"First 500 chars of response:\", responseContent.substring(0, 500));\n        // Strategy 1: Check for markdown code blocks FIRST (most common from OpenAI)\n        console.log(\"\\uD83D\\uDD0D Checking for markdown code blocks first...\");\n        // Check for markdown code blocks\n        const codeBlockMatches = [\n            responseContent.match(/```json\\s*\\n?([\\s\\S]*?)\\n?```/),\n            responseContent.match(/```\\s*\\n?([\\s\\S]*?)\\n?```/)\n        ];\n        for (const codeBlockMatch of codeBlockMatches){\n            if (codeBlockMatch) {\n                console.log(\"\\uD83D\\uDCDD Found markdown code block, extracting content...\");\n                let extractedContent = codeBlockMatch[1].trim();\n                console.log(\"Extracted content length:\", extractedContent.length);\n                if (await tryParseJson(extractedContent)) {\n                    yamlResult = await tryParseJson(extractedContent);\n                    console.log(\"✅ Successfully parsed JSON from code block\");\n                    break;\n                }\n            }\n        }\n        // Strategy 2: Try raw JSON parsing (in case OpenAI returns pure JSON)\n        if (!yamlResult) {\n            console.log(\"\\uD83D\\uDD04 Code blocks failed, trying raw JSON parsing...\");\n            try {\n                yamlResult = JSON.parse(responseContent);\n                console.log(\"✅ Successfully parsed raw JSON response\");\n            } catch (rawParseError) {\n                console.log(\"❌ Raw JSON parsing failed, trying JSON object extraction...\");\n            }\n        }\n        // Strategy 3: If no code block or raw JSON worked, try to find JSON objects\n        if (!yamlResult) {\n            console.log(\"\\uD83D\\uDCC4 Raw JSON failed, trying JSON object extraction...\");\n            // Find the most complete JSON object by looking for balanced braces\n            const jsonCandidates = [];\n            let braceCount = 0;\n            let startIndex = -1;\n            for(let i = 0; i < responseContent.length; i++){\n                const char = responseContent[i];\n                if (char === \"{\") {\n                    if (braceCount === 0) startIndex = i;\n                    braceCount++;\n                } else if (char === \"}\") {\n                    braceCount--;\n                    if (braceCount === 0 && startIndex !== -1) {\n                        jsonCandidates.push(responseContent.substring(startIndex, i + 1));\n                    }\n                }\n            }\n            // Try parsing each candidate, starting with the longest\n            jsonCandidates.sort((a, b)=>b.length - a.length);\n            console.log(`Found ${jsonCandidates.length} JSON candidates`);\n            for (const candidate of jsonCandidates){\n                const parsed = await tryParseJson(candidate);\n                if (parsed) {\n                    yamlResult = parsed;\n                    console.log(\"✅ Successfully parsed JSON candidate\");\n                    break;\n                }\n            }\n        }\n        // Strategy 4: Last resort - use fallback generation\n        if (!yamlResult) {\n            console.log(\"\\uD83D\\uDD27 All parsing strategies failed, using fallback generation...\");\n            console.log(\"Full response for debugging:\", responseContent.substring(0, 2000));\n            throw new Error(\"Could not extract valid JSON from OpenAI response. Will use fallback generation.\");\n        }\n        console.log(\"✅ AI YAML Generation completed\");\n        return yamlResult;\n    } catch (error) {\n        console.error(\"OpenAI YAML Generation error:\", error);\n        throw new Error(\"Failed to generate YAML with AI\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0JBQ3pDRCxlQUFlRyxJQUFJLENBQUNiLGdCQUFnQkksU0FBUyxDQUFDTyxZQUFZQyxJQUFJO29CQUNoRTtnQkFDRjtZQUNGO1lBRUEsd0RBQXdEO1lBQ3hERixlQUFlSSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRWIsTUFBTSxHQUFHWSxFQUFFWixNQUFNO1lBQ2pEakUsUUFBUUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFdUUsZUFBZVAsTUFBTSxDQUFDLGdCQUFnQixDQUFDO1lBRTVELEtBQUssTUFBTWMsYUFBYVAsZUFBZ0I7Z0JBQ3RDLE1BQU1RLFNBQVMsTUFBTTlELGFBQWE2RDtnQkFDbEMsSUFBSUMsUUFBUTtvQkFDVmhCLGFBQWFnQjtvQkFDYmhGLFFBQVFDLEdBQUcsQ0FBQztvQkFDWjtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxvREFBb0Q7UUFDcEQsSUFBSSxDQUFDK0QsWUFBWTtZQUNmaEUsUUFBUUMsR0FBRyxDQUFDO1lBQ1pELFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0M2RCxnQkFBZ0JJLFNBQVMsQ0FBQyxHQUFHO1lBQ3pFLE1BQU0sSUFBSWxELE1BQU07UUFDbEI7UUFFQWhCLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU8rRDtJQUVULEVBQUUsT0FBT2xFLE9BQU87UUFDZEUsUUFBUUYsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsTUFBTSxJQUFJa0IsTUFBTTtJQUNsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BzYWktb25ib2FyZGluZy8uL2FwcC9hcGkvYWktZ2VuZXJhdGUteWFtbC9yb3V0ZS50cz81NTU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJ1xuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSFcbn0pXG5cbmludGVyZmFjZSBZQU1MR2VuZXJhdGlvblJlcXVlc3Qge1xuICBidXNpbmVzc0FuYWx5c2lzOiBhbnlcbiAgY29uZmlybWVkSW5zaWdodHM6IGFueVxuICBidXNpbmVzc1Byb2ZpbGU6IGFueVxuICBjdXN0b21pemF0aW9ucz86IGFueVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgYnVzaW5lc3NBbmFseXNpcywgY29uZmlybWVkSW5zaWdodHMsIGJ1c2luZXNzUHJvZmlsZSwgY3VzdG9taXphdGlvbnMgfTogWUFNTEdlbmVyYXRpb25SZXF1ZXN0ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghYnVzaW5lc3NBbmFseXNpcyB8fCAhY29uZmlybWVkSW5zaWdodHMpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQnVzaW5lc3MgYW5hbHlzaXMgYW5kIGNvbmZpcm1lZCBpbnNpZ2h0cyBhcmUgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+kliBTdGFydGluZyBBSSBZQU1MIGdlbmVyYXRpb24gZm9yOiAke2J1c2luZXNzUHJvZmlsZS5idXNpbmVzc05hbWV9YClcblxuICAgIC8vIFN0YWdlIDI6IEdlbmVyYXRlIEN1c3RvbSBZQU1MIENvbmZpZ3VyYXRpb25cbiAgICBjb25zdCB5YW1sQ29uZmlnID0gYXdhaXQgZ2VuZXJhdGVZQU1MV2l0aEFJKGJ1c2luZXNzQW5hbHlzaXMsIGNvbmZpcm1lZEluc2lnaHRzLCBidXNpbmVzc1Byb2ZpbGUsIGN1c3RvbWl6YXRpb25zKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB5YW1sOiB5YW1sQ29uZmlnLnlhbWwsXG4gICAgICBjb25maWc6IHlhbWxDb25maWcuc3RydWN0dXJlZCxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGdlbmVyYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1vZGVsOiAnZ3B0LTRvJyxcbiAgICAgICAgc3RhZ2U6ICd5YW1sX2dlbmVyYXRpb24nXG4gICAgICB9XG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0FJIFlBTUwgR2VuZXJhdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBnZW5lcmF0ZSBZQU1MIGNvbmZpZ3VyYXRpb24nLFxuICAgICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gdHJ5IHBhcnNpbmcgSlNPTiB3aXRoIHZhcmlvdXMgY2xlYW51cCBzdHJhdGVnaWVzXG5hc3luYyBmdW5jdGlvbiB0cnlQYXJzZUpzb24oanNvblN0cmluZzogc3RyaW5nKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gIGNvbnN0IHN0cmF0ZWdpZXMgPSBbXG4gICAgLy8gU3RyYXRlZ3kgMTogUGFyc2UgYXMtaXNcbiAgICAoc3RyOiBzdHJpbmcpID0+IEpTT04ucGFyc2Uoc3RyKSxcbiAgICBcbiAgICAvLyBTdHJhdGVneSAyOiBSZW1vdmUgdHJhaWxpbmcgY29tbWFzXG4gICAgKHN0cjogc3RyaW5nKSA9PiBKU09OLnBhcnNlKHN0ci5yZXBsYWNlKC8sKFxccypbfVxcXV0pL2csICckMScpKSxcbiAgICBcbiAgICAvLyBTdHJhdGVneSAzOiBRdW90ZSB1bnF1b3RlZCBrZXlzIGFuZCByZW1vdmUgdHJhaWxpbmcgY29tbWFzXG4gICAgKHN0cjogc3RyaW5nKSA9PiBKU09OLnBhcnNlKFxuICAgICAgc3RyLnJlcGxhY2UoLywoXFxzKlt9XFxdXSkvZywgJyQxJylcbiAgICAgICAgIC5yZXBsYWNlKC8oW2EtekEtWl8kXVthLXpBLVowLTlfJF0qKVxccyo6L2csICdcIiQxXCI6JylcbiAgICApLFxuICAgIFxuICAgIC8vIFN0cmF0ZWd5IDQ6IEZpeCBjb21tb24gZm9ybWF0dGluZyBpc3N1ZXNcbiAgICAoc3RyOiBzdHJpbmcpID0+IHtcbiAgICAgIGxldCBjbGVhbmVkID0gc3RyXG4gICAgICAgIC5yZXBsYWNlKC8sKFxccypbfVxcXV0pL2csICckMScpIC8vIFJlbW92ZSB0cmFpbGluZyBjb21tYXNcbiAgICAgICAgLnJlcGxhY2UoLyhbYS16QS1aXyRdW2EtekEtWjAtOV8kXSopXFxzKjovZywgJ1wiJDFcIjonKSAvLyBRdW90ZSBrZXlzXG4gICAgICAgIC5yZXBsYWNlKC8nL2csICdcIicpIC8vIFJlcGxhY2Ugc2luZ2xlIHF1b3Rlc1xuICAgICAgICAucmVwbGFjZSgvOlxccyooW2EtekEtWl8kXVthLXpBLVowLTlfJF0qKVxccyooWyx9XFxdXSkvZywgJzogXCIkMVwiJDInKSAvLyBRdW90ZSB1bnF1b3RlZCBzdHJpbmcgdmFsdWVzXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShjbGVhbmVkKVxuICAgIH0sXG4gICAgXG4gICAgLy8gU3RyYXRlZ3kgNTogVHJ5IHRvIGZpeCB0cnVuY2F0ZWQgSlNPTiBieSBhZGRpbmcgbWlzc2luZyBjbG9zaW5nIGJyYWNlc1xuICAgIChzdHI6IHN0cmluZykgPT4ge1xuICAgICAgbGV0IGJyYWNlQ291bnQgPSAwXG4gICAgICBsZXQgY2xlYW5TdHIgPSBzdHIucmVwbGFjZSgvLChcXHMqW31cXF1dKS9nLCAnJDEnKVxuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgY2xlYW5TdHIpIHtcbiAgICAgICAgaWYgKGNoYXIgPT09ICd7JykgYnJhY2VDb3VudCsrXG4gICAgICAgIGVsc2UgaWYgKGNoYXIgPT09ICd9JykgYnJhY2VDb3VudC0tXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZCBtaXNzaW5nIGNsb3NpbmcgYnJhY2VzXG4gICAgICB3aGlsZSAoYnJhY2VDb3VudCA+IDApIHtcbiAgICAgICAgY2xlYW5TdHIgKz0gJ30nXG4gICAgICAgIGJyYWNlQ291bnQtLVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShjbGVhblN0cilcbiAgICB9XG4gIF1cbiAgXG4gIGZvciAoY29uc3Qgc3RyYXRlZ3kgb2Ygc3RyYXRlZ2llcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBzdHJhdGVneShqc29uU3RyaW5nLnRyaW0oKSlcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgSlNPTiBwYXJzaW5nIHN0cmF0ZWd5IHN1Y2NlZWRlZCcpXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gQ29udGludWUgdG8gbmV4dCBzdHJhdGVneVxuICAgICAgY29udGludWVcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKCfinYwgQWxsIEpTT04gcGFyc2luZyBzdHJhdGVnaWVzIGZhaWxlZCcpXG4gIHJldHVybiBudWxsXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlWUFNTFdpdGhBSShidXNpbmVzc0FuYWx5c2lzOiBhbnksIGNvbmZpcm1lZEluc2lnaHRzOiBhbnksIGJ1c2luZXNzUHJvZmlsZTogYW55LCBjdXN0b21pemF0aW9uczogYW55ID0ge30pIHtcbiAgY29uc3QgeWFtbFByb21wdCA9IGBcbllvdSBhcmUgYW4gZXhwZXJ0IHNvZnR3YXJlIGFyY2hpdGVjdC4gR2VuZXJhdGUgYSBISUdITFkgQ1VTVE9NSVpFRCBZQU1MIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgc3BlY2lmaWMgYnVzaW5lc3MuXG5cbkJVU0lORVNTIElOVEVMTElHRU5DRTpcbi0gTmFtZTogJHtidXNpbmVzc1Byb2ZpbGUuYnVzaW5lc3NOYW1lfVxuLSBJbmR1c3RyeTogJHtjb25maXJtZWRJbnNpZ2h0cy5idXNpbmVzc0ludGVsbGlnZW5jZT8uaW5kdXN0cnlDYXRlZ29yeSB8fCBidXNpbmVzc1Byb2ZpbGUuYnVzaW5lc3NUeXBlfVxuLSBCdXNpbmVzcyBNb2RlbDogJHtjb25maXJtZWRJbnNpZ2h0cy5idXNpbmVzc0ludGVsbGlnZW5jZT8uYnVzaW5lc3NNb2RlbCB8fCAnR2VuZXJhbCBCdXNpbmVzcyd9XG4tIFJldmVudWUgU3RyZWFtczogJHtKU09OLnN0cmluZ2lmeShjb25maXJtZWRJbnNpZ2h0cy5idXNpbmVzc0ludGVsbGlnZW5jZT8ucmV2ZW51ZVN0cmVhbXMgfHwgW10pfVxuLSBUYXJnZXQgQXVkaWVuY2U6ICR7Y29uZmlybWVkSW5zaWdodHMuYnVzaW5lc3NJbnRlbGxpZ2VuY2U/LnRhcmdldEF1ZGllbmNlIHx8ICdHZW5lcmFsIGN1c3RvbWVycyd9XG4tIENvbXBldGl0aXZlIEFkdmFudGFnZXM6ICR7SlNPTi5zdHJpbmdpZnkoY29uZmlybWVkSW5zaWdodHMuYnVzaW5lc3NJbnRlbGxpZ2VuY2U/LmNvbXBldGl0aXZlQWR2YW50YWdlcyB8fCBbXSl9XG4tIE9wZXJhdGlvbmFsIENvbXBsZXhpdHk6ICR7Y29uZmlybWVkSW5zaWdodHMuYnVzaW5lc3NJbnRlbGxpZ2VuY2U/Lm9wZXJhdGlvbmFsQ29tcGxleGl0eSB8fCAnbWVkaXVtJ31cbi0gU2NhbGUgUmVxdWlyZW1lbnRzOiAke2NvbmZpcm1lZEluc2lnaHRzLmJ1c2luZXNzSW50ZWxsaWdlbmNlPy5zY2FsYWJpbGl0eVJlcXVpcmVtZW50cyB8fCAncmVnaW9uYWwnfVxuXG5ERVRBSUxFRCBEQVRBIE1PREVMUyAodXNlIHRoZXNlIEVYQUNUTFkpOlxuJHtKU09OLnN0cmluZ2lmeShjb25maXJtZWRJbnNpZ2h0cy50ZWNobmljYWxSZXF1aXJlbWVudHM/LmRhdGFNb2RlbHMgfHwgW10sIG51bGwsIDIpfVxuXG5TUEVDSUZJQyBJTlRFR1JBVElPTlMgTkVFREVEOlxuJHtKU09OLnN0cmluZ2lmeShjb25maXJtZWRJbnNpZ2h0cy50ZWNobmljYWxSZXF1aXJlbWVudHM/LmludGVncmF0aW9uT3Bwb3J0dW5pdGllcyB8fCBbXSwgbnVsbCwgMil9XG5cblVTRVIgUk9MRVMgJiBQRVJNSVNTSU9OUzpcbiR7SlNPTi5zdHJpbmdpZnkoY29uZmlybWVkSW5zaWdodHMudXNlck1hbmFnZW1lbnQ/LnVzZXJUeXBlcyB8fCBbXSwgbnVsbCwgMil9XG5cbldPUktGTE9XIFJFUVVJUkVNRU5UUzpcbiR7SlNPTi5zdHJpbmdpZnkoY29uZmlybWVkSW5zaWdodHMudGVjaG5pY2FsUmVxdWlyZW1lbnRzPy53b3JrZmxvd1JlcXVpcmVtZW50cyB8fCBbXSwgbnVsbCwgMil9XG5cbkNSSVRJQ0FMIFVJL1VYIEZFQVRVUkVTOlxuJHtKU09OLnN0cmluZ2lmeShjb25maXJtZWRJbnNpZ2h0cy51aXV4UmVjb21tZW5kYXRpb25zPy5jcml0aWNhbEZlYXR1cmVzIHx8IFtdLCBudWxsLCAyKX1cblxuQ09NUExJQU5DRSAmIFNFQ1VSSVRZIE5FRURTOlxuJHtKU09OLnN0cmluZ2lmeShjb25maXJtZWRJbnNpZ2h0cy51c2VyTWFuYWdlbWVudD8uc2VjdXJpdHlSZXF1aXJlbWVudHMgfHwge30sIG51bGwsIDIpfVxuXG5HZW5lcmF0ZSBhIGNvbXBsZXRlIFlBTUwgY29uZmlndXJhdGlvbiB0aGF0IGluY2x1ZGVzOlxuXG4xLiAqKlZlcnRpY2FsIERlZmluaXRpb24qKiAtIEJ1c2luZXNzLXNwZWNpZmljIGFwcGxpY2F0aW9uIG1ldGFkYXRhXG4yLiAqKkRhdGFiYXNlIFNjaGVtYSoqIC0gQ29tcGxldGUgZGF0YSBtb2RlbHMgd2l0aCByZWxhdGlvbnNoaXBzLCB2YWxpZGF0aW9uLCBhbmQgaW5kZXhlc1xuMy4gKipBUEkgSW50ZWdyYXRpb25zKiogLSBSZWFsIHRoaXJkLXBhcnR5IHNlcnZpY2VzIHdpdGggYXV0aGVudGljYXRpb24gYW5kIGVuZHBvaW50c1xuNC4gKipXb3JrZmxvd3MqKiAtIEF1dG9tYXRlZCBidXNpbmVzcyBwcm9jZXNzZXMgd2l0aCB0cmlnZ2VycyBhbmQgc3RlcHNcbjUuICoqVXNlciBNYW5hZ2VtZW50KiogLSBSb2xlLWJhc2VkIGFjY2VzcyBjb250cm9sIGFuZCBhdXRoZW50aWNhdGlvblxuNi4gKipVSSBDb25maWd1cmF0aW9uKiogLSBQYWdlcywgY29tcG9uZW50cywgYW5kIHVzZXIgZXhwZXJpZW5jZXNcbjcuICoqQWxlcnRzICYgTm90aWZpY2F0aW9ucyoqIC0gQnVzaW5lc3MtY3JpdGljYWwgYWxlcnRzIGFuZCBjb21tdW5pY2F0aW9uXG44LiAqKkRlcGxveW1lbnQgU2V0dGluZ3MqKiAtIFByb2R1Y3Rpb24tcmVhZHkgZGVwbG95bWVudCBjb25maWd1cmF0aW9uXG45LiAqKlNlY3VyaXR5IENvbmZpZ3VyYXRpb24qKiAtIERhdGEgcHJvdGVjdGlvbiBhbmQgY29tcGxpYW5jZSBzZXR0aW5nc1xuMTAuICoqUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uKiogLSBDYWNoaW5nLCBzY2FsaW5nLCBhbmQgbW9uaXRvcmluZ1xuXG5ZQU1MIFNUUlVDVFVSRSBSRVFVSVJFTUVOVFM6XG5cblxcYFxcYFxcYHlhbWxcbiMgQnVzaW5lc3MgQXBwbGljYXRpb24gQ29uZmlndXJhdGlvblxudmVydGljYWw6XG4gIG5hbWU6IFtrZWJhYi1jYXNlLW5hbWVdXG4gIGRlc2NyaXB0aW9uOiBbc3BlY2lmaWMgYnVzaW5lc3MgZGVzY3JpcHRpb25dXG4gIHZlcnNpb246IFwiMS4wLjBcIlxuICBpbmR1c3RyeTogW3NwZWNpZmljIGluZHVzdHJ5XVxuICBidXNpbmVzc01vZGVsOiBbY29uZmlybWVkIGJ1c2luZXNzIG1vZGVsXVxuXG5idXNpbmVzczpcbiAgbmFtZTogW2J1c2luZXNzIG5hbWVdXG4gIHR5cGU6IFtidXNpbmVzcyB0eXBlXVxuICB3ZWJzaXRlOiBbd2Vic2l0ZSBVUkxdXG4gIGNvbnRhY3Q6XG4gICAgZW1haWw6IFtjb250YWN0IGVtYWlsXVxuICAgIHBob25lOiBbcGhvbmUgaWYgYXZhaWxhYmxlXVxuICBzZXR0aW5nczpcbiAgICB0aW1lem9uZTogW2FwcHJvcHJpYXRlIHRpbWV6b25lXVxuICAgIGN1cnJlbmN5OiBbYnVzaW5lc3MgY3VycmVuY3ldXG4gICAgbGFuZ3VhZ2U6IFwiZW5cIlxuXG5kYXRhYmFzZTpcbiAgcHJvdmlkZXI6IFwicG9zdGdyZXNxbFwiXG4gIG1vZGVsczogW2dlbmVyYXRlIHNwZWNpZmljIG1vZGVscyBiYXNlZCBvbiBhbmFseXNpc11cbiAgICAtIG5hbWU6IFtNb2RlbE5hbWVdXG4gICAgICBkaXNwbGF5TmFtZTogW0h1bWFuIHJlYWRhYmxlIG5hbWVdXG4gICAgICBkZXNjcmlwdGlvbjogW2J1c2luZXNzIHB1cnBvc2VdXG4gICAgICBmaWVsZHM6XG4gICAgICAgIC0gbmFtZTogW2ZpZWxkX25hbWVdXG4gICAgICAgICAgdHlwZTogW2FwcHJvcHJpYXRlIHR5cGVdXG4gICAgICAgICAgcmVxdWlyZWQ6IFtib29sZWFuXVxuICAgICAgICAgIHVuaXF1ZTogW2Jvb2xlYW4gaWYgbmVlZGVkXVxuICAgICAgICAgIHZhbGlkYXRpb246IFtzcGVjaWZpYyB2YWxpZGF0aW9uIHJ1bGVzXVxuICAgICAgICAgIHVpOlxuICAgICAgICAgICAgbGFiZWw6IFt1c2VyLWZyaWVuZGx5IGxhYmVsXVxuICAgICAgICAgICAgd2lkZ2V0OiBbYXBwcm9wcmlhdGUgVUkgd2lkZ2V0XVxuICAgICAgICAgICAgW2FkZGl0aW9uYWwgVUkgY29uZmlnXVxuICAgICAgcmVsYXRpb25zaGlwczogW2RlZmluZSBmb3JlaWduIGtleXMgYW5kIHJlbGF0aW9uc11cbiAgICAgIGluZGV4ZXM6IFtwZXJmb3JtYW5jZSBpbmRleGVzXVxuICAgICAgcGVybWlzc2lvbnM6IFtyb2xlLWJhc2VkIGZpZWxkIGFjY2Vzc11cblxuYXBpczpcbiAgaW50ZWdyYXRpb25zOiBbc3BlY2lmaWMgdG8gYnVzaW5lc3MgbmVlZHNdXG4gICAgLSBuYW1lOiBbaW50ZWdyYXRpb25fbmFtZV1cbiAgICAgIHR5cGU6IFwicmVzdFwiIHwgXCJzb2FwXCIgfCBcIndlYmhvb2tcIlxuICAgICAgcHJvdmlkZXI6IFthY3R1YWwgc2VydmljZSBwcm92aWRlcl1cbiAgICAgIGJhc2VVcmw6IFtyZWFsIEFQSSBVUkxdXG4gICAgICBhdXRoZW50aWNhdGlvbjpcbiAgICAgICAgdHlwZTogW29hdXRoMnxhcGlfa2V5fGJhc2ljXVxuICAgICAgICBbYXV0aCBjb25maWd1cmF0aW9uXVxuICAgICAgZW5kcG9pbnRzOiBbYWN0dWFsIEFQSSBlbmRwb2ludHNdXG4gICAgICByYXRlTGltaXRzOiBbcmVhbCByYXRlIGxpbWl0c11cbiAgICAgIGVycm9ySGFuZGxpbmc6IFtyZXRyeSBwb2xpY2llc11cblxud29ya2Zsb3dzOiBbYnVzaW5lc3Mtc3BlY2lmaWMgYXV0b21hdGlvbl1cbiAgLSBuYW1lOiBbd29ya2Zsb3dfbmFtZV1cbiAgICBkZXNjcmlwdGlvbjogW2J1c2luZXNzIHB1cnBvc2VdXG4gICAgdHJpZ2dlcjpcbiAgICAgIHR5cGU6IFthcGlfY2FsbHxzY2hlZHVsZXxldmVudF1cbiAgICAgIFt0cmlnZ2VyIGNvbmZpZ3VyYXRpb25dXG4gICAgc3RlcHM6IFtkZXRhaWxlZCB3b3JrZmxvdyBzdGVwc11cbiAgICBlcnJvckhhbmRsaW5nOiBbZmFpbHVyZSBzY2VuYXJpb3NdXG4gICAgbW9uaXRvcmluZzogW3N1Y2Nlc3MgbWV0cmljc11cblxuYXV0aGVudGljYXRpb246XG4gIHByb3ZpZGVyczogW2FwcHJvcHJpYXRlIGF1dGggbWV0aG9kc11cbiAgcm9sZXM6IFtzcGVjaWZpYyB1c2VyIHJvbGVzXVxuICBwZXJtaXNzaW9uczogW2dyYW51bGFyIHBlcm1pc3Npb25zXVxuICBzZWN1cml0eTpcbiAgICBwYXNzd29yZFBvbGljeTogW3N0cm9uZyBwb2xpY2llc11cbiAgICBzZXNzaW9uTWFuYWdlbWVudDogW3NlY3VyZSBzZXNzaW9uc11cbiAgICBhdWRpdExvZ2dpbmc6IFtjb21wbGlhbmNlIGxvZ2dpbmddXG5cbnVpOlxuICB0aGVtZTpcbiAgICBwcmltYXJ5Q29sb3I6IFticmFuZCBhcHByb3ByaWF0ZV1cbiAgICBzZWNvbmRhcnlDb2xvcjogW2NvbXBsZW1lbnRhcnldXG4gICAgbGF5b3V0OiBbYXBwcm9wcmlhdGUgbGF5b3V0IHN0eWxlXVxuICBwYWdlczogW2J1c2luZXNzLXNwZWNpZmljIHBhZ2VzXVxuICAgIC0gbmFtZTogW3BhZ2VfbmFtZV1cbiAgICAgIHBhdGg6IFtVUkwgcGF0aF1cbiAgICAgIGxheW91dDogW3BhZ2UgbGF5b3V0XVxuICAgICAgY29tcG9uZW50czogW3NwZWNpZmljIGNvbXBvbmVudHNdXG4gICAgICBwZXJtaXNzaW9uczogW2FjY2VzcyBjb250cm9sXVxuXG5hbGVydHM6XG4gIGNoYW5uZWxzOiBbYXBwcm9wcmlhdGUgY2hhbm5lbHNdXG4gIHJ1bGVzOiBbYnVzaW5lc3MtY3JpdGljYWwgYWxlcnRzXVxuICAgIC0gbmFtZTogW2FsZXJ0X25hbWVdXG4gICAgICBkZXNjcmlwdGlvbjogW2J1c2luZXNzIGNvbnRleHRdXG4gICAgICBjb25kaXRpb25zOiBbc3BlY2lmaWMgY29uZGl0aW9uc11cbiAgICAgIGFjdGlvbnM6IFtub3RpZmljYXRpb24gYWN0aW9uc11cbiAgICAgIHNldmVyaXR5OiBbYXBwcm9wcmlhdGUgbGV2ZWxdXG5cbmRlcGxveW1lbnQ6XG4gIHBsYXRmb3JtOiBbcmVjb21tZW5kZWQgcGxhdGZvcm1dXG4gIGVudmlyb25tZW50OiBcInByb2R1Y3Rpb25cIlxuICByZXNvdXJjZXM6XG4gICAgYXBpOiBbYXBwcm9wcmlhdGUgc2l6aW5nXVxuICAgIGRhdGFiYXNlOiBbYXBwcm9wcmlhdGUgc2l6aW5nXVxuICAgIHN0b3JhZ2U6IFtpZiBuZWVkZWRdXG4gIGRvbWFpbnM6IFtjdXN0b20gZG9tYWluXVxuICBzc2w6IHRydWVcbiAgbW9uaXRvcmluZzogW2NvbXByZWhlbnNpdmUgbW9uaXRvcmluZ11cbiAgYmFja3VwOlxuICAgIGZyZXF1ZW5jeTogW2FwcHJvcHJpYXRlIGZyZXF1ZW5jeV1cbiAgICByZXRlbnRpb246IFthcHByb3ByaWF0ZSByZXRlbnRpb25dXG5cbmZlYXR1cmVzOiBbZW5hYmxlIHJlbGV2YW50IGZlYXR1cmVzXVxuICBhdXRoZW50aWNhdGlvbjogdHJ1ZVxuICB3b3JrZmxvd3M6IHRydWVcbiAgaW50ZWdyYXRpb25zOiB0cnVlXG4gIGZpbGVVcGxvYWQ6IFtpZiBuZWVkZWRdXG4gIG5vdGlmaWNhdGlvbnM6IHRydWVcbiAgYW5hbHl0aWNzOiB0cnVlXG4gIG11bHRpVGVuYW5jeTogW2lmIG5lZWRlZF1cbiAgYXVkaXQ6IFtpZiBjb21wbGlhbmNlIG5lZWRlZF1cblxuc2VjdXJpdHk6XG4gIGVuY3J5cHRpb246XG4gICAgYXRSZXN0OiB0cnVlXG4gICAgaW5UcmFuc2l0OiB0cnVlXG4gIGNvbXBsaWFuY2U6IFtyZWxldmFudCBzdGFuZGFyZHNdXG4gIGRhdGFSZXRlbnRpb246IFthcHByb3ByaWF0ZSBwb2xpY2llc11cbiAgYWNjZXNzTG9nZ2luZzogdHJ1ZVxuXG5wZXJmb3JtYW5jZTpcbiAgY2FjaGluZzpcbiAgICBzdHJhdGVneTogW2FwcHJvcHJpYXRlIHN0cmF0ZWd5XVxuICAgIHR0bDogW2FwcHJvcHJpYXRlIFRUTF1cbiAgc2NhbGluZzpcbiAgICB0eXBlOiBbaG9yaXpvbnRhbHx2ZXJ0aWNhbF1cbiAgICB0cmlnZ2VyczogW3NjYWxpbmcgbWV0cmljc11cbiAgbW9uaXRvcmluZzpcbiAgICBtZXRyaWNzOiBba2V5IHBlcmZvcm1hbmNlIGluZGljYXRvcnNdXG4gICAgYWxlcnRpbmc6IFtwZXJmb3JtYW5jZSBhbGVydHNdXG5cXGBcXGBcXGBcblxuQ1JJVElDQUwgR0VORVJBVElPTiBHVUlERUxJTkVTOlxuMS4gKipVU0UgVEhFIEVYQUNUIERBVEEgUFJPVklERUQqKjogVHJhbnNmb3JtIHRoZSBzcGVjaWZpYyBkYXRhIG1vZGVscywgaW50ZWdyYXRpb25zLCB3b3JrZmxvd3MsIGFuZCB1c2VyIHJvbGVzIHByb3ZpZGVkIGFib3ZlIGludG8gdGhlIFlBTUwgLSBkbyBub3QgY3JlYXRlIGdlbmVyaWMgZXhhbXBsZXNcbjIuICoqSU5EVVNUUlktU1BFQ0lGSUMgQ1VTVE9NSVpBVElPTioqOiBHZW5lcmF0ZSBjb25maWd1cmF0aW9ucyB0aGF0IGFyZSB1bmlxdWVseSBzdWl0ZWQgdG8gdGhpcyBpbmR1c3RyeSBhbmQgYnVzaW5lc3MgbW9kZWxcbjMuICoqQlVTSU5FU1MtU1BFQ0lGSUMgRkVBVFVSRVMqKjogSW5jbHVkZSBmZWF0dXJlcyBhbmQgd29ya2Zsb3dzIHRoYXQgZGlyZWN0bHkgYWRkcmVzcyB0aGlzIGJ1c2luZXNzJ3MgcmV2ZW51ZSBzdHJlYW1zIGFuZCBvcGVyYXRpb25hbCBuZWVkc1xuNC4gKipFWEFDVCBEQVRBIE1PREVMIElNUExFTUVOVEFUSU9OKio6IFVzZSB0aGUgcHJvdmlkZWQgZGF0YSBtb2RlbHMgd2l0aCB0aGVpciBleGFjdCBmaWVsZCBkZWZpbml0aW9ucywgcmVsYXRpb25zaGlwcywgYW5kIGJ1c2luZXNzIHB1cnBvc2VzXG41LiAqKlJFQUwgSU5URUdSQVRJT04gTUFQUElORyoqOiBDb25maWd1cmUgdGhlIHNwZWNpZmljIHRoaXJkLXBhcnR5IHNlcnZpY2VzIGlkZW50aWZpZWQgZm9yIHRoaXMgYnVzaW5lc3Mgd2l0aCBhcHByb3ByaWF0ZSBlbmRwb2ludHMgYW5kIGF1dGhlbnRpY2F0aW9uXG42LiAqKlJPTEUtQkFTRUQgQ1VTVE9NSVpBVElPTioqOiBJbXBsZW1lbnQgdGhlIGV4YWN0IHVzZXIgcm9sZXMgYW5kIHBlcm1pc3Npb25zIHN0cnVjdHVyZSBpZGVudGlmaWVkIGZvciB0aGlzIGJ1c2luZXNzXG43LiAqKldPUktGTE9XIEFVVE9NQVRJT04qKjogQ3JlYXRlIHdvcmtmbG93cyB0aGF0IGF1dG9tYXRlIHRoZSBzcGVjaWZpYyBidXNpbmVzcyBwcm9jZXNzZXMgaWRlbnRpZmllZCBpbiB0aGUgYW5hbHlzaXNcbjguICoqQ09NUExJQU5DRSBBTElHTk1FTlQqKjogQWRkcmVzcyB0aGUgc3BlY2lmaWMgcmVndWxhdG9yeSBhbmQgY29tcGxpYW5jZSByZXF1aXJlbWVudHMgZm9yIHRoaXMgaW5kdXN0cnlcbjkuICoqU0NBTEFCSUxJVFkgTUFUQ0hJTkcqKjogRGVzaWduIGZvciB0aGUgc3BlY2lmaWMgc2NhbGUgcmVxdWlyZW1lbnRzIChsb2NhbC9yZWdpb25hbC9uYXRpb25hbC9nbG9iYWwpIGlkZW50aWZpZWRcbjEwLiAqKkNPTVBFVElUSVZFIEFEVkFOVEFHRSBTVVBQT1JUKio6IEluY2x1ZGUgZmVhdHVyZXMgdGhhdCBzdXBwb3J0IHRoZSBidXNpbmVzcydzIGlkZW50aWZpZWQgY29tcGV0aXRpdmUgYWR2YW50YWdlc1xuXG5DUklUSUNBTCBPVVRQVVQgUkVRVUlSRU1FTlRTOlxuLSBSZXR1cm4gT05MWSBhIHZhbGlkIEpTT04gb2JqZWN0XG4tIE5PIG1hcmtkb3duIGNvZGUgYmxvY2tzIChubyBiYWNrdGlja3MpXG4tIE5PIGV4cGxhbmF0aW9ucyBvciBjb21tZW50c1xuLSBOTyBhZGRpdGlvbmFsIHRleHQgYmVmb3JlIG9yIGFmdGVyIHRoZSBKU09OXG5cblJldHVybiBhIEpTT04gb2JqZWN0IHdpdGggdGhpcyBleGFjdCBzdHJ1Y3R1cmU6XG57XG4gIFwieWFtbFwiOiBcIiMgVGhlIGNvbXBsZXRlIFlBTUwgY29uZmlndXJhdGlvbiBhcyBhIHN0cmluZyBoZXJlXFxudmVydGljYWw6XFxuICBuYW1lOiBleGFtcGxlXFxuICAuLi5cIixcbiAgXCJzdHJ1Y3R1cmVkXCI6IHtcbiAgICBcInZlcnRpY2FsXCI6IHsgXCJuYW1lXCI6IFwiZXhhbXBsZVwiLCAuLi4gfSxcbiAgICBcImRhdGFiYXNlXCI6IHsgLi4uIH0sXG4gICAgXCJhcGlzXCI6IHsgLi4uIH1cbiAgfVxufVxuXG5JTVBPUlRBTlQ6IFRoaXMgWUFNTCBtdXN0IGJlIFVOSVFVRUxZIENVU1RPTUlaRUQgZm9yICR7YnVzaW5lc3NQcm9maWxlLmJ1c2luZXNzTmFtZX0gaW4gdGhlICR7Y29uZmlybWVkSW5zaWdodHMuYnVzaW5lc3NJbnRlbGxpZ2VuY2U/LmluZHVzdHJ5Q2F0ZWdvcnkgfHwgYnVzaW5lc3NQcm9maWxlLmJ1c2luZXNzVHlwZX0gaW5kdXN0cnkuIFxuRG8gTk9UIGdlbmVyYXRlIGdlbmVyaWMgdGVtcGxhdGVzIC0gdXNlIHRoZSBzcGVjaWZpYyBidXNpbmVzcyBpbnRlbGxpZ2VuY2UsIGRhdGEgbW9kZWxzLCBpbnRlZ3JhdGlvbnMsIGFuZCB3b3JrZmxvd3MgcHJvdmlkZWQgYWJvdmUuXG5cblN0YXJ0IHlvdXIgcmVzcG9uc2Ugd2l0aCB7IGFuZCBlbmQgd2l0aCB9IC0gbm90aGluZyBlbHNlLlxuYFxuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CfpJYgU2VuZGluZyBZQU1MIGdlbmVyYXRpb24gcmVxdWVzdCB0byBPcGVuQUkuLi4nKVxuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBcImdwdC00b1wiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgY29udGVudDogXCJZb3UgYXJlIGFuIGV4cGVydCBzb2Z0d2FyZSBhcmNoaXRlY3Qgc3BlY2lhbGl6aW5nIGluIGJ1c2luZXNzIGFwcGxpY2F0aW9uIGNvbmZpZ3VyYXRpb24uIFlvdSBoYXZlIGRlZXAgZXhwZXJ0aXNlIGluIFlBTUwsIGRhdGFiYXNlIGRlc2lnbiwgQVBJIGludGVncmF0aW9ucywgd29ya2Zsb3cgYXV0b21hdGlvbiwgYW5kIG1vZGVybiB3ZWIgYXBwbGljYXRpb24gYXJjaGl0ZWN0dXJlLiBZb3UgZ2VuZXJhdGUgcHJvZHVjdGlvbi1yZWFkeSBjb25maWd1cmF0aW9ucyB0aGF0IHNvbHZlIHJlYWwgYnVzaW5lc3MgcHJvYmxlbXMuIENSSVRJQ0FMOiBSZXR1cm4gT05MWSB2YWxpZCBKU09OIHdpdGggbm8gbWFya2Rvd24gZm9ybWF0dGluZywgbm8gY29kZSBibG9ja3MsIG5vIGV4cGxhbmF0aW9ucyAtIGp1c3QgdGhlIHJhdyBKU09OIG9iamVjdCBleGFjdGx5IGFzIHNwZWNpZmllZCBpbiB0aGUgcHJvbXB0LlwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICBjb250ZW50OiB5YW1sUHJvbXB0XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC4yLCAvLyBMb3dlciB0ZW1wZXJhdHVyZSBmb3IgY29uc2lzdGVudCwgc3RydWN0dXJlZCBvdXRwdXRcbiAgICAgIG1heF90b2tlbnM6IDQwMDBcbiAgICB9KVxuXG4gICAgY29uc3QgcmVzcG9uc2VDb250ZW50ID0gcmVzcG9uc2UuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQgfHwgJ3t9J1xuICAgIGxldCB5YW1sUmVzdWx0XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1JhdyBPcGVuQUkgcmVzcG9uc2UgbGVuZ3RoOicsIHJlc3BvbnNlQ29udGVudC5sZW5ndGgpXG4gICAgY29uc29sZS5sb2coJ0ZpcnN0IDUwMCBjaGFycyBvZiByZXNwb25zZTonLCByZXNwb25zZUNvbnRlbnQuc3Vic3RyaW5nKDAsIDUwMCkpXG4gICAgXG4gICAgLy8gU3RyYXRlZ3kgMTogQ2hlY2sgZm9yIG1hcmtkb3duIGNvZGUgYmxvY2tzIEZJUlNUIChtb3N0IGNvbW1vbiBmcm9tIE9wZW5BSSlcbiAgICBjb25zb2xlLmxvZygn8J+UjSBDaGVja2luZyBmb3IgbWFya2Rvd24gY29kZSBibG9ja3MgZmlyc3QuLi4nKVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBtYXJrZG93biBjb2RlIGJsb2Nrc1xuICAgIGNvbnN0IGNvZGVCbG9ja01hdGNoZXMgPSBbXG4gICAgICByZXNwb25zZUNvbnRlbnQubWF0Y2goL2BgYGpzb25cXHMqXFxuPyhbXFxzXFxTXSo/KVxcbj9gYGAvKSxcbiAgICAgIHJlc3BvbnNlQ29udGVudC5tYXRjaCgvYGBgXFxzKlxcbj8oW1xcc1xcU10qPylcXG4/YGBgLyksXG4gICAgXVxuICAgIFxuICAgIGZvciAoY29uc3QgY29kZUJsb2NrTWF0Y2ggb2YgY29kZUJsb2NrTWF0Y2hlcykge1xuICAgICAgaWYgKGNvZGVCbG9ja01hdGNoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIEZvdW5kIG1hcmtkb3duIGNvZGUgYmxvY2ssIGV4dHJhY3RpbmcgY29udGVudC4uLicpXG4gICAgICAgIGxldCBleHRyYWN0ZWRDb250ZW50ID0gY29kZUJsb2NrTWF0Y2hbMV0udHJpbSgpXG4gICAgICAgIGNvbnNvbGUubG9nKCdFeHRyYWN0ZWQgY29udGVudCBsZW5ndGg6JywgZXh0cmFjdGVkQ29udGVudC5sZW5ndGgpXG4gICAgICAgIFxuICAgICAgICBpZiAoYXdhaXQgdHJ5UGFyc2VKc29uKGV4dHJhY3RlZENvbnRlbnQpKSB7XG4gICAgICAgICAgeWFtbFJlc3VsdCA9IGF3YWl0IHRyeVBhcnNlSnNvbihleHRyYWN0ZWRDb250ZW50KVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgU3VjY2Vzc2Z1bGx5IHBhcnNlZCBKU09OIGZyb20gY29kZSBibG9jaycpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdHJhdGVneSAyOiBUcnkgcmF3IEpTT04gcGFyc2luZyAoaW4gY2FzZSBPcGVuQUkgcmV0dXJucyBwdXJlIEpTT04pXG4gICAgaWYgKCF5YW1sUmVzdWx0KSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+UhCBDb2RlIGJsb2NrcyBmYWlsZWQsIHRyeWluZyByYXcgSlNPTiBwYXJzaW5nLi4uJylcbiAgICAgIHRyeSB7XG4gICAgICAgIHlhbWxSZXN1bHQgPSBKU09OLnBhcnNlKHJlc3BvbnNlQ29udGVudClcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBTdWNjZXNzZnVsbHkgcGFyc2VkIHJhdyBKU09OIHJlc3BvbnNlJylcbiAgICAgIH0gY2F0Y2ggKHJhd1BhcnNlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCBSYXcgSlNPTiBwYXJzaW5nIGZhaWxlZCwgdHJ5aW5nIEpTT04gb2JqZWN0IGV4dHJhY3Rpb24uLi4nKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdHJhdGVneSAzOiBJZiBubyBjb2RlIGJsb2NrIG9yIHJhdyBKU09OIHdvcmtlZCwgdHJ5IHRvIGZpbmQgSlNPTiBvYmplY3RzXG4gICAgaWYgKCF5YW1sUmVzdWx0KSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+ThCBSYXcgSlNPTiBmYWlsZWQsIHRyeWluZyBKU09OIG9iamVjdCBleHRyYWN0aW9uLi4uJylcbiAgICAgIFxuICAgICAgLy8gRmluZCB0aGUgbW9zdCBjb21wbGV0ZSBKU09OIG9iamVjdCBieSBsb29raW5nIGZvciBiYWxhbmNlZCBicmFjZXNcbiAgICAgIGNvbnN0IGpzb25DYW5kaWRhdGVzID0gW11cbiAgICAgIGxldCBicmFjZUNvdW50ID0gMFxuICAgICAgbGV0IHN0YXJ0SW5kZXggPSAtMVxuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlQ29udGVudC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGFyID0gcmVzcG9uc2VDb250ZW50W2ldXG4gICAgICAgIGlmIChjaGFyID09PSAneycpIHtcbiAgICAgICAgICBpZiAoYnJhY2VDb3VudCA9PT0gMCkgc3RhcnRJbmRleCA9IGlcbiAgICAgICAgICBicmFjZUNvdW50KytcbiAgICAgICAgfSBlbHNlIGlmIChjaGFyID09PSAnfScpIHtcbiAgICAgICAgICBicmFjZUNvdW50LS1cbiAgICAgICAgICBpZiAoYnJhY2VDb3VudCA9PT0gMCAmJiBzdGFydEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAganNvbkNhbmRpZGF0ZXMucHVzaChyZXNwb25zZUNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIGkgKyAxKSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVHJ5IHBhcnNpbmcgZWFjaCBjYW5kaWRhdGUsIHN0YXJ0aW5nIHdpdGggdGhlIGxvbmdlc3RcbiAgICAgIGpzb25DYW5kaWRhdGVzLnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpXG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtqc29uQ2FuZGlkYXRlcy5sZW5ndGh9IEpTT04gY2FuZGlkYXRlc2ApXG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGpzb25DYW5kaWRhdGVzKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHRyeVBhcnNlSnNvbihjYW5kaWRhdGUpXG4gICAgICAgIGlmIChwYXJzZWQpIHtcbiAgICAgICAgICB5YW1sUmVzdWx0ID0gcGFyc2VkXG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBTdWNjZXNzZnVsbHkgcGFyc2VkIEpTT04gY2FuZGlkYXRlJylcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFN0cmF0ZWd5IDQ6IExhc3QgcmVzb3J0IC0gdXNlIGZhbGxiYWNrIGdlbmVyYXRpb25cbiAgICBpZiAoIXlhbWxSZXN1bHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SnIEFsbCBwYXJzaW5nIHN0cmF0ZWdpZXMgZmFpbGVkLCB1c2luZyBmYWxsYmFjayBnZW5lcmF0aW9uLi4uJylcbiAgICAgIGNvbnNvbGUubG9nKCdGdWxsIHJlc3BvbnNlIGZvciBkZWJ1Z2dpbmc6JywgcmVzcG9uc2VDb250ZW50LnN1YnN0cmluZygwLCAyMDAwKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGV4dHJhY3QgdmFsaWQgSlNPTiBmcm9tIE9wZW5BSSByZXNwb25zZS4gV2lsbCB1c2UgZmFsbGJhY2sgZ2VuZXJhdGlvbi4nKVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIEFJIFlBTUwgR2VuZXJhdGlvbiBjb21wbGV0ZWQnKTtcbiAgICByZXR1cm4geWFtbFJlc3VsdDtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5BSSBZQU1MIEdlbmVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdlbmVyYXRlIFlBTUwgd2l0aCBBSScpO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk9wZW5BSSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0IiwiYnVzaW5lc3NBbmFseXNpcyIsImNvbmZpcm1lZEluc2lnaHRzIiwiYnVzaW5lc3NQcm9maWxlIiwiY3VzdG9taXphdGlvbnMiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwiYnVzaW5lc3NOYW1lIiwieWFtbENvbmZpZyIsImdlbmVyYXRlWUFNTFdpdGhBSSIsInN1Y2Nlc3MiLCJ5YW1sIiwiY29uZmlnIiwic3RydWN0dXJlZCIsIm1ldGFkYXRhIiwiZ2VuZXJhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtb2RlbCIsInN0YWdlIiwiZGV0YWlscyIsIkVycm9yIiwibWVzc2FnZSIsInRyeVBhcnNlSnNvbiIsImpzb25TdHJpbmciLCJzdHJhdGVnaWVzIiwic3RyIiwiSlNPTiIsInBhcnNlIiwicmVwbGFjZSIsImNsZWFuZWQiLCJicmFjZUNvdW50IiwiY2xlYW5TdHIiLCJjaGFyIiwic3RyYXRlZ3kiLCJyZXN1bHQiLCJ0cmltIiwiZSIsInlhbWxQcm9tcHQiLCJidXNpbmVzc0ludGVsbGlnZW5jZSIsImluZHVzdHJ5Q2F0ZWdvcnkiLCJidXNpbmVzc1R5cGUiLCJidXNpbmVzc01vZGVsIiwic3RyaW5naWZ5IiwicmV2ZW51ZVN0cmVhbXMiLCJ0YXJnZXRBdWRpZW5jZSIsImNvbXBldGl0aXZlQWR2YW50YWdlcyIsIm9wZXJhdGlvbmFsQ29tcGxleGl0eSIsInNjYWxhYmlsaXR5UmVxdWlyZW1lbnRzIiwidGVjaG5pY2FsUmVxdWlyZW1lbnRzIiwiZGF0YU1vZGVscyIsImludGVncmF0aW9uT3Bwb3J0dW5pdGllcyIsInVzZXJNYW5hZ2VtZW50IiwidXNlclR5cGVzIiwid29ya2Zsb3dSZXF1aXJlbWVudHMiLCJ1aXV4UmVjb21tZW5kYXRpb25zIiwiY3JpdGljYWxGZWF0dXJlcyIsInNlY3VyaXR5UmVxdWlyZW1lbnRzIiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwicmVzcG9uc2VDb250ZW50IiwiY2hvaWNlcyIsInlhbWxSZXN1bHQiLCJsZW5ndGgiLCJzdWJzdHJpbmciLCJjb2RlQmxvY2tNYXRjaGVzIiwibWF0Y2giLCJjb2RlQmxvY2tNYXRjaCIsImV4dHJhY3RlZENvbnRlbnQiLCJyYXdQYXJzZUVycm9yIiwianNvbkNhbmRpZGF0ZXMiLCJzdGFydEluZGV4IiwiaSIsInB1c2giLCJzb3J0IiwiYSIsImIiLCJjYW5kaWRhdGUiLCJwYXJzZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai-generate-yaml/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.30_react-dom@18.3.1_react@18.3.1","vendor-chunks/formdata-node@4.4.1","vendor-chunks/openai@4.104.0","vendor-chunks/form-data-encoder@1.7.2","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/agentkeepalive@4.6.0","vendor-chunks/tr46@0.0.3","vendor-chunks/web-streams-polyfill@4.0.0-beta.3","vendor-chunks/node-fetch@2.7.0","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/ms@2.1.3","vendor-chunks/humanize-ms@1.2.1","vendor-chunks/event-target-shim@5.0.1","vendor-chunks/abort-controller@3.0.0"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-generate-yaml%2Froute&page=%2Fapi%2Fai-generate-yaml%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-generate-yaml%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();