"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate/route";
exports.ids = ["app/api/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_segevbin_Desktop_Opsai_apps_opsai_onboarding_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate/route.ts */ \"(rsc)/./app/api/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate/route\",\n        pathname: \"/api/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate/route\"\n    },\n    resolvedPagePath: \"/Users/segevbin/Desktop/Opsai/apps/opsai-onboarding/app/api/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_segevbin_Desktop_Opsai_apps_opsai_onboarding_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi4zMF9yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNlZ2V2YmluJTJGRGVza3RvcCUyRk9wc2FpJTJGYXBwcyUyRm9wc2FpLW9uYm9hcmRpbmclMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGc2VnZXZiaW4lMkZEZXNrdG9wJTJGT3BzYWklMkZhcHBzJTJGb3BzYWktb25ib2FyZGluZyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNkI7QUFDMUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcHNhaS1vbmJvYXJkaW5nLz9iZGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zZWdldmJpbi9EZXNrdG9wL09wc2FpL2FwcHMvb3BzYWktb25ib2FyZGluZy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9zZWdldmJpbi9EZXNrdG9wL09wc2FpL2FwcHMvb3BzYWktb25ib2FyZGluZy9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate/route.ts":
/*!***********************************!*\
  !*** ./app/api/generate/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst execAsync = (0,util__WEBPACK_IMPORTED_MODULE_2__.promisify)(child_process__WEBPACK_IMPORTED_MODULE_1__.exec);\n// Local implementations to replace broken imports\nclass LocalYamlProcessor {\n    static parse(yamlString) {\n        try {\n            // Simple YAML parsing - in production, use js-yaml\n            if (yamlString.trim().startsWith(\"{\")) {\n                return JSON.parse(yamlString);\n            }\n            // Basic YAML-like parsing for demo\n            return this.parseBasicYaml(yamlString);\n        } catch (error) {\n            throw new Error(`YAML parsing failed: ${error}`);\n        }\n    }\n    static parseBasicYaml(yamlString) {\n        const lines = yamlString.split(\"\\n\");\n        const result = {};\n        let currentSection = null;\n        let currentKey = \"\";\n        for (const line of lines){\n            const trimmed = line.trim();\n            if (!trimmed || trimmed.startsWith(\"#\")) continue;\n            if (trimmed.endsWith(\":\")) {\n                const sectionName = trimmed.slice(0, -1).trim();\n                if (!result[sectionName]) {\n                    result[sectionName] = {};\n                }\n                currentSection = result[sectionName];\n            } else if (trimmed.includes(\":\") && currentSection) {\n                const [key, value] = trimmed.split(\":\", 2);\n                currentSection[key.trim()] = value.trim();\n            }\n        }\n        return result;\n    }\n}\nclass LocalCacheService {\n    async get(key) {\n        return this.cache.get(key);\n    }\n    async set(key, value, ttl) {\n        this.cache.set(key, value);\n    }\n    constructor(){\n        this.cache = new Map();\n    }\n}\nclass LocalSecurityService {\n    async hashPassword(password) {\n        // Simple hash for demo - in production, use bcrypt\n        return Buffer.from(password).toString(\"base64\");\n    }\n    generateToken(payload) {\n        // Simple token generation for demo - in production, use JWT\n        return Buffer.from(JSON.stringify(payload)).toString(\"base64\");\n    }\n}\nclass LocalAppGenerator {\n    static async generate(config, appName, outputDir) {\n        console.log(`Generating app: ${appName} in ${outputDir}`);\n    // Implementation will be added below\n    }\n}\nclass LocalAuthService {\n    constructor(config){\n    // Auth service configuration\n    }\n    async login(credentials) {\n        // Simple login for demo\n        return {\n            token: \"demo-token\",\n            user: {\n                id: \"1\",\n                email: credentials.email\n            }\n        };\n    }\n    async register(userData) {\n        // Simple registration for demo\n        return {\n            token: \"demo-token\",\n            user: {\n                id: \"1\",\n                email: userData.email\n            }\n        };\n    }\n}\nclass LocalAirbyteConnector {\n    constructor(config){\n    // Airbyte configuration\n    }\n    async execute(action, params) {\n        // Simple Airbyte simulation\n        return {\n            success: true,\n            data: {\n                id: \"demo-connection\"\n            }\n        };\n    }\n}\nclass LocalTenantManager {\n    static getInstance() {\n        return new LocalTenantManager();\n    }\n    async createTenant(data) {\n        return {\n            id: \"demo-tenant\",\n            name: data.name,\n            slug: data.slug\n        };\n    }\n    async getTenant(id) {\n        return {\n            id,\n            name: \"Demo Tenant\",\n            slug: \"demo-tenant\"\n        };\n    }\n}\nclass LocalDeploymentManager {\n    async deploy(config) {\n        return {\n            id: \"demo-deployment\",\n            status: \"deployed\",\n            url: \"https://demo-app.vercel.app\"\n        };\n    }\n}\n// Temporary validation function until @opsai/shared is built\nfunction validateYamlConfigSafe(config) {\n    try {\n        if (!config.vertical || !config.business || !config.database) {\n            return {\n                success: false,\n                errors: [\n                    \"Missing required sections: vertical, business, database\"\n                ]\n            };\n        }\n        return {\n            success: true,\n            data: config\n        };\n    } catch (error) {\n        return {\n            success: false,\n            errors: [\n                \"Invalid configuration format\"\n            ]\n        };\n    }\n}\n// Enhanced field type conversion with business-specific types\nfunction convertFieldType(yamlType, businessType) {\n    const baseTypeMap = {\n        \"string\": \"String\",\n        \"number\": \"Float\",\n        \"integer\": \"Int\",\n        \"boolean\": \"Boolean\",\n        \"date\": \"DateTime\",\n        \"datetime\": \"DateTime\",\n        \"json\": \"String\",\n        \"enum\": \"String\"\n    };\n    // Business-specific type mappings\n    const businessTypeMap = {\n        \"healthcare\": {\n            \"medical_device_id\": \"String\",\n            \"compliance_status\": \"String\",\n            \"certification_date\": \"DateTime\",\n            \"regulatory_approval\": \"String\",\n            \"patient_data\": \"String\",\n            \"medical_license\": \"String\"\n        },\n        \"ecommerce\": {\n            \"product_sku\": \"String\",\n            \"inventory_count\": \"Int\",\n            \"price\": \"Float\",\n            \"category\": \"String\",\n            \"shipping_weight\": \"Float\",\n            \"order_status\": \"String\"\n        },\n        \"real_estate\": {\n            \"property_id\": \"String\",\n            \"square_feet\": \"Int\",\n            \"bedrooms\": \"Int\",\n            \"bathrooms\": \"Int\",\n            \"price\": \"Float\",\n            \"property_type\": \"String\",\n            \"listing_status\": \"String\"\n        }\n    };\n    const businessTypes = businessTypeMap[businessType.toLowerCase()] || {};\n    return businessTypes[yamlType.toLowerCase()] || baseTypeMap[yamlType.toLowerCase()] || \"String\";\n}\n// Generate business-specific UI pages based on YAML configuration\nfunction generateCustomUIPages(config, businessType) {\n    const basePages = [\n        {\n            name: \"dashboard\",\n            path: \"/\",\n            components: [\n                {\n                    type: \"business_overview\",\n                    dataSource: \"analytics\"\n                },\n                {\n                    type: \"recent_activity\",\n                    dataSource: \"activity_log\"\n                }\n            ]\n        }\n    ];\n    // Business-specific page generation\n    const businessPages = {\n        \"healthcare\": [\n            {\n                name: \"compliance\",\n                path: \"/compliance\",\n                components: [\n                    {\n                        type: \"compliance_dashboard\",\n                        dataSource: \"compliance_records\"\n                    },\n                    {\n                        type: \"certification_tracker\",\n                        dataSource: \"certifications\"\n                    }\n                ]\n            },\n            {\n                name: \"medical_devices\",\n                path: \"/medical-devices\",\n                components: [\n                    {\n                        type: \"device_inventory\",\n                        dataSource: \"medical_devices\"\n                    },\n                    {\n                        type: \"regulatory_status\",\n                        dataSource: \"regulatory_records\"\n                    }\n                ]\n            },\n            {\n                name: \"training\",\n                path: \"/training\",\n                components: [\n                    {\n                        type: \"training_sessions\",\n                        dataSource: \"training_records\"\n                    },\n                    {\n                        type: \"certification_progress\",\n                        dataSource: \"certifications\"\n                    }\n                ]\n            }\n        ],\n        \"ecommerce\": [\n            {\n                name: \"products\",\n                path: \"/products\",\n                components: [\n                    {\n                        type: \"product_catalog\",\n                        dataSource: \"products\"\n                    },\n                    {\n                        type: \"inventory_management\",\n                        dataSource: \"inventory\"\n                    }\n                ]\n            },\n            {\n                name: \"orders\",\n                path: \"/orders\",\n                components: [\n                    {\n                        type: \"order_management\",\n                        dataSource: \"orders\"\n                    },\n                    {\n                        type: \"fulfillment_tracker\",\n                        dataSource: \"fulfillment\"\n                    }\n                ]\n            },\n            {\n                name: \"customers\",\n                path: \"/customers\",\n                components: [\n                    {\n                        type: \"customer_management\",\n                        dataSource: \"customers\"\n                    },\n                    {\n                        type: \"loyalty_program\",\n                        dataSource: \"loyalty\"\n                    }\n                ]\n            }\n        ],\n        \"real_estate\": [\n            {\n                name: \"properties\",\n                path: \"/properties\",\n                components: [\n                    {\n                        type: \"property_listings\",\n                        dataSource: \"properties\"\n                    },\n                    {\n                        type: \"market_analysis\",\n                        dataSource: \"market_data\"\n                    }\n                ]\n            },\n            {\n                name: \"clients\",\n                path: \"/clients\",\n                components: [\n                    {\n                        type: \"client_management\",\n                        dataSource: \"clients\"\n                    },\n                    {\n                        type: \"lead_tracker\",\n                        dataSource: \"leads\"\n                    }\n                ]\n            },\n            {\n                name: \"transactions\",\n                path: \"/transactions\",\n                components: [\n                    {\n                        type: \"transaction_history\",\n                        dataSource: \"transactions\"\n                    },\n                    {\n                        type: \"commission_tracker\",\n                        dataSource: \"commissions\"\n                    }\n                ]\n            }\n        ]\n    };\n    // Add custom pages based on YAML models\n    const customPages = (config.database?.models || []).map((model)=>({\n            name: model.name.toLowerCase(),\n            path: `/${model.name.toLowerCase()}s`,\n            components: [\n                {\n                    type: \"data_management\",\n                    dataSource: model.name.toLowerCase(),\n                    actions: [\n                        \"create\",\n                        \"edit\",\n                        \"delete\",\n                        \"view\"\n                    ]\n                }\n            ]\n        }));\n    return [\n        ...basePages,\n        ...businessPages[businessType.toLowerCase()] || [],\n        ...customPages\n    ];\n}\n// Generate business-specific navigation\nfunction generateCustomNavigation(config, businessType) {\n    const baseNav = [\n        {\n            name: \"Dashboard\",\n            href: \"/\",\n            icon: \"Home\"\n        }\n    ];\n    const businessNav = {\n        \"healthcare\": [\n            {\n                name: \"Medical Devices\",\n                href: \"/medical-devices\",\n                icon: \"Activity\"\n            },\n            {\n                name: \"Compliance\",\n                href: \"/compliance\",\n                icon: \"Shield\"\n            },\n            {\n                name: \"Training\",\n                href: \"/training\",\n                icon: \"GraduationCap\"\n            },\n            {\n                name: \"Certifications\",\n                href: \"/certifications\",\n                icon: \"Award\"\n            }\n        ],\n        \"ecommerce\": [\n            {\n                name: \"Products\",\n                href: \"/products\",\n                icon: \"Package\"\n            },\n            {\n                name: \"Orders\",\n                href: \"/orders\",\n                icon: \"ShoppingCart\"\n            },\n            {\n                name: \"Customers\",\n                href: \"/customers\",\n                icon: \"Users\"\n            },\n            {\n                name: \"Inventory\",\n                href: \"/inventory\",\n                icon: \"Box\"\n            }\n        ],\n        \"real_estate\": [\n            {\n                name: \"Properties\",\n                href: \"/properties\",\n                icon: \"Home\"\n            },\n            {\n                name: \"Clients\",\n                href: \"/clients\",\n                icon: \"Users\"\n            },\n            {\n                name: \"Transactions\",\n                href: \"/transactions\",\n                icon: \"DollarSign\"\n            },\n            {\n                name: \"Leads\",\n                href: \"/leads\",\n                icon: \"Target\"\n            }\n        ]\n    };\n    // Add custom navigation based on YAML models\n    const customNav = (config.database?.models || []).map((model)=>({\n            name: model.name.charAt(0).toUpperCase() + model.name.slice(1) + \"s\",\n            href: `/${model.name.toLowerCase()}s`,\n            icon: \"Database\"\n        }));\n    return [\n        ...baseNav,\n        ...businessNav[businessType.toLowerCase()] || [],\n        ...customNav\n    ];\n}\n// Generate a truly custom Next.js application based on YAML\nasync function generateCustomNextJSApp(config, appName, outputDir) {\n    console.log(\"\\uD83D\\uDE80 Generating custom application based on YAML configuration...\");\n    // Create app structure\n    const appDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"app\");\n    const componentsDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"components\");\n    const libDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"lib\");\n    const prismaDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"prisma\");\n    const apiDir = path__WEBPACK_IMPORTED_MODULE_4__.join(appDir, \"api\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(appDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(componentsDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(libDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(prismaDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(apiDir, {\n        recursive: true\n    });\n    // Generate custom Prisma schema based on YAML models\n    await generateCustomPrismaSchema(config, prismaDir);\n    // Generate custom app layout\n    await generateCustomAppLayout(config, appDir);\n    // Generate custom main page\n    await generateCustomMainPage(config, appDir);\n    // Generate custom dashboard components\n    await generateCustomDashboardComponents(config, componentsDir);\n    // Generate custom API routes\n    await generateCustomAPIRoutes(config, apiDir);\n    // Generate custom data pages\n    await generateCustomDataPages(config, appDir);\n    // Generate custom utility files\n    await generateCustomUtilityFiles(config, libDir);\n    // Generate authentication system\n    await generateAuthenticationSystem(config, outputDir);\n    // Generate integration configurations\n    await generateIntegrationConfig(config, outputDir);\n    // Generate package.json with business-specific dependencies\n    await generateCustomPackageJson(config, outputDir);\n    // Generate environment configuration\n    await generateEnvironmentConfig(config, outputDir);\n    // Generate deployment configuration\n    await generateDeploymentConfig(config, outputDir);\n    // Generate custom README\n    await generateCustomREADME(config, outputDir);\n    console.log(\"✅ Custom application generation completed!\");\n}\n// Generate custom Prisma schema based on YAML models\nasync function generateCustomPrismaSchema(config, prismaDir) {\n    const businessType = config.vertical.industry.toLowerCase();\n    let schemaContent = `// This is your Prisma schema file\n// learn more about it in the docs: https://pris.ly/d/prisma-schema\n\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"sqlite\"\n  url      = \"file:./dev.db\"\n}\n\n`;\n    // Add tenant and user models first\n    schemaContent += `model Tenant {\n  id String @id @default(cuid())\n  name String\n  slug String @unique\n  status String @default(\"active\")\n  settings Json?\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n  \n  // Relations\n  users User[]\n  ${config.database.models.map((model)=>`${model.name.toLowerCase()}s ${model.name}[]`).join(\"\\n  \")}\n}\n\nmodel User {\n  id String @id @default(cuid()) \n  email String @unique\n  firstName String\n  lastName String\n  role String @default(\"user\")\n  status String @default(\"active\")\n  tenantId String\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n  lastLoginAt DateTime?\n  \n  // Relations\n  tenant Tenant @relation(fields: [tenantId], references: [id], onDelete: Cascade)\n  \n  @@index([tenantId])\n}\n\n// Generate models based on YAML configuration with tenant isolation\n`;\n    config.database.models.forEach((model)=>{\n        schemaContent += `model ${model.name} {\n  id String @unique @id @default(cuid())\n  tenantId String\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n`;\n        // Add custom fields from YAML\n        model.fields.forEach((field)=>{\n            if (field.name !== \"id\" && field.name !== \"createdAt\" && field.name !== \"updatedAt\" && field.name !== \"tenantId\") {\n                const fieldType = convertFieldType(field.type, businessType);\n                const uniqueConstraint = field.unique ? \" @unique\" : \"\";\n                schemaContent += `  ${field.name} ${fieldType}${uniqueConstraint}\\n`;\n            }\n        });\n        // Add tenant relation\n        schemaContent += `  \n  // Relations\n  tenant Tenant @relation(fields: [tenantId], references: [id], onDelete: Cascade)\n  \n  @@index([tenantId])\n}\\n\\n`;\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(prismaDir, \"schema.prisma\"), schemaContent);\n    console.log(\"\\uD83D\\uDCCA Custom Prisma schema generated\");\n}\n// Generate custom app layout\nasync function generateCustomAppLayout(config, appDir) {\n    const navigation = generateCustomNavigation(config, config.vertical.industry);\n    const layoutContent = `import './globals.css'\nimport { Inter } from 'next/font/google'\nimport Sidebar from '@/components/Sidebar'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport const metadata = {\n  title: '${config.business.name} - Management Dashboard',\n  description: '${config.vertical.description}',\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body className={inter.className}>\n        <div className=\"flex h-screen bg-gray-100\">\n          <Sidebar />\n          <main className=\"flex-1 overflow-auto\">\n            {children}\n          </main>\n        </div>\n      </body>\n    </html>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(appDir, \"layout.tsx\"), layoutContent);\n    console.log(\"\\uD83C\\uDFA8 Custom app layout generated\");\n}\n// Generate custom main page\nasync function generateCustomMainPage(config, appDir) {\n    const businessType = config.vertical.industry.toLowerCase();\n    let dashboardContent = `import { Suspense } from 'react'\nimport StatsOverview from '@/components/StatsOverview'\nimport RecentActivity from '@/components/RecentActivity'\nimport ChartWidget from '@/components/ChartWidget'\n`;\n    // Add business-specific imports\n    if (businessType === \"healthcare\") {\n        dashboardContent += `import ComplianceOverview from '@/components/ComplianceOverview'\nimport MedicalDeviceStatus from '@/components/MedicalDeviceStatus'\n`;\n    } else if (businessType === \"ecommerce\") {\n        dashboardContent += `import SalesOverview from '@/components/SalesOverview'\nimport InventoryStatus from '@/components/InventoryStatus'\n`;\n    } else if (businessType === \"real_estate\") {\n        dashboardContent += `import PropertyOverview from '@/components/PropertyOverview'\nimport TransactionStatus from '@/components/TransactionStatus'\n`;\n    }\n    dashboardContent += `\nexport default function Dashboard() {\n  return (\n    <div className=\"p-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">${config.business.name} Dashboard</h1>\n        <p className=\"text-gray-600 mt-2\">${config.vertical.description}</p>\n      </div>\n\n      <Suspense fallback={<div>Loading...</div>}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n          <StatsOverview />\n`;\n    // Add business-specific components\n    if (businessType === \"healthcare\") {\n        dashboardContent += `          <ComplianceOverview />\n          <MedicalDeviceStatus />\n`;\n    } else if (businessType === \"ecommerce\") {\n        dashboardContent += `          <SalesOverview />\n          <InventoryStatus />\n`;\n    } else if (businessType === \"real_estate\") {\n        dashboardContent += `          <PropertyOverview />\n          <TransactionStatus />\n`;\n    }\n    dashboardContent += `        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <ChartWidget />\n          <RecentActivity />\n        </div>\n      </Suspense>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(appDir, \"page.tsx\"), dashboardContent);\n    console.log(\"\\uD83D\\uDCC4 Custom main page generated\");\n}\n// Generate custom dashboard components\nasync function generateCustomDashboardComponents(config, componentsDir) {\n    const businessType = config.vertical.industry.toLowerCase();\n    const navigation = generateCustomNavigation(config, businessType);\n    // Generate custom sidebar\n    const sidebarContent = `'use client'\n\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { ${navigation.map((nav)=>nav.icon).join(\", \")} } from 'lucide-react'\n\nconst navigation = [\n${navigation.map((nav)=>`  { name: '${nav.name}', href: '${nav.href}', icon: ${nav.icon} }`).join(\",\\n\")}\n]\n\nexport default function Sidebar() {\n  const pathname = usePathname()\n\n  return (\n    <div className=\"flex h-full w-64 flex-col bg-gray-900\">\n      <div className=\"flex h-16 shrink-0 items-center px-6\">\n        <h1 className=\"text-xl font-bold text-white\">${config.business.name}</h1>\n      </div>\n      <nav className=\"flex flex-1 flex-col px-6 pb-4\">\n        <ul role=\"list\" className=\"flex flex-1 flex-col gap-y-7\">\n          <li>\n            <ul role=\"list\" className=\"-mx-2 space-y-1\">\n              {navigation.map((item) => {\n                const isActive = pathname === item.href\n                return (\n                  <li key={item.name}>\n                    <Link\n                      href={item.href}\n                      className={\\`group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold \\${\n                        isActive\n                          ? 'bg-gray-800 text-white'\n                          : 'text-gray-400 hover:text-white hover:bg-gray-800'\n                      }\\`}\n                    >\n                      <item.icon className=\"h-6 w-6 shrink-0\" aria-hidden=\"true\" />\n                      {item.name}\n                    </Link>\n                  </li>\n                )\n              })}\n            </ul>\n          </li>\n        </ul>\n      </nav>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"Sidebar.tsx\"), sidebarContent);\n    // Generate business-specific components\n    if (businessType === \"healthcare\") {\n        await generateHealthcareComponents(componentsDir);\n    } else if (businessType === \"ecommerce\") {\n        await generateEcommerceComponents(componentsDir);\n    } else if (businessType === \"real_estate\") {\n        await generateRealEstateComponents(componentsDir);\n    }\n    // Generate generic components\n    await generateGenericComponents(componentsDir);\n    console.log(\"\\uD83E\\uDDE9 Custom dashboard components generated\");\n}\n// Generate healthcare-specific components\nasync function generateHealthcareComponents(componentsDir) {\n    const complianceOverview = `'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Shield, AlertTriangle, CheckCircle } from 'lucide-react'\n\nexport default function ComplianceOverview() {\n  const [complianceData, setComplianceData] = useState({\n    totalDevices: 0,\n    compliantDevices: 0,\n    pendingCertifications: 0,\n    expiredCertifications: 0\n  })\n\n  return (\n    <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n      <div className=\"p-5\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <Shield className=\"h-6 w-6 text-gray-400\" />\n          </div>\n          <div className=\"ml-5 w-0 flex-1\">\n            <dl>\n              <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                Compliance Status\n              </dt>\n              <dd className=\"text-lg font-medium text-gray-900\">\n                {complianceData.compliantDevices}/{complianceData.totalDevices} Devices\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n      <div className=\"bg-gray-50 px-5 py-3\">\n        <div className=\"text-sm\">\n          <span className=\"text-red-600 font-medium\">{complianceData.expiredCertifications} Expired</span>\n          <span className=\"mx-2\">•</span>\n          <span className=\"text-yellow-600 font-medium\">{complianceData.pendingCertifications} Pending</span>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"ComplianceOverview.tsx\"), complianceOverview);\n}\n// Generate ecommerce-specific components\nasync function generateEcommerceComponents(componentsDir) {\n    const salesOverview = `'use client'\n\nimport { useEffect, useState } from 'react'\nimport { DollarSign, TrendingUp, ShoppingCart } from 'lucide-react'\n\nexport default function SalesOverview() {\n  const [salesData, setSalesData] = useState({\n    totalRevenue: 0,\n    totalOrders: 0,\n    averageOrderValue: 0,\n    conversionRate: 0\n  })\n\n  return (\n    <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n      <div className=\"p-5\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <DollarSign className=\"h-6 w-6 text-gray-400\" />\n          </div>\n          <div className=\"ml-5 w-0 flex-1\">\n            <dl>\n              <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                Total Revenue\n              </dt>\n              <dd className=\"text-lg font-medium text-gray-900\">\n                $0\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n      <div className=\"bg-gray-50 px-5 py-3\">\n        <div className=\"text-sm\">\n          <span className=\"text-green-600 font-medium\">0 Orders</span>\n          <span className=\"mx-2\">•</span>\n          <span className=\"text-blue-600 font-medium\">$0 Avg Order</span>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"SalesOverview.tsx\"), salesOverview);\n}\n// Generate real estate-specific components\nasync function generateRealEstateComponents(componentsDir) {\n    const propertyOverview = `'use client'\n\nimport { useEffect, useState } from 'react'\nimport { Home, MapPin, DollarSign } from 'lucide-react'\n\nexport default function PropertyOverview() {\n  const [propertyData, setPropertyData] = useState({\n    totalProperties: 0,\n    activeListings: 0,\n    totalValue: 0,\n    averagePrice: 0\n  })\n\n  return (\n    <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n      <div className=\"p-5\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <Home className=\"h-6 w-6 text-gray-400\" />\n          </div>\n          <div className=\"ml-5 w-0 flex-1\">\n            <dl>\n              <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                Active Listings\n              </dt>\n              <dd className=\"text-lg font-medium text-gray-900\">\n                {propertyData.activeListings} Properties\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n      <div className=\"bg-gray-50 px-5 py-3\">\n        <div className=\"text-sm\">\n          <span className=\"text-green-600 font-medium\">$0 Total Value</span>\n          <span className=\"mx-2\">•</span>\n          <span className=\"text-blue-600 font-medium\">$0 Avg Price</span>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"PropertyOverview.tsx\"), propertyOverview);\n}\n// Generate generic components\nasync function generateGenericComponents(componentsDir) {\n    const statsOverview = `'use client'\n\nimport { useEffect, useState } from 'react'\nimport { TrendingUp, Users, Activity, DollarSign } from 'lucide-react'\n\nexport default function StatsOverview() {\n  const [stats, setStats] = useState({\n    totalRevenue: 0,\n    totalUsers: 0,\n    totalOrders: 0,\n    growthRate: 0\n  })\n\n  return (\n    <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n      <div className=\"p-5\">\n        <div className=\"flex items-center\">\n          <div className=\"flex-shrink-0\">\n            <TrendingUp className=\"h-6 w-6 text-gray-400\" />\n          </div>\n          <div className=\"ml-5 w-0 flex-1\">\n            <dl>\n              <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                Growth Rate\n              </dt>\n              <dd className=\"text-lg font-medium text-gray-900\">\n                {stats.growthRate}%\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n    const recentActivity = `'use client'\n\nimport { useEffect, useState } from 'react'\n\nexport default function RecentActivity() {\n  const [activities, setActivities] = useState([])\n\n  return (\n    <div className=\"bg-white shadow rounded-lg\">\n      <div className=\"px-4 py-5 sm:p-6\">\n        <h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n          Recent Activity\n        </h3>\n        <div className=\"mt-5\">\n          <div className=\"flow-root\">\n            <ul role=\"list\" className=\"-mb-8\">\n              {activities.length === 0 ? (\n                <li className=\"text-gray-500 text-sm\">No recent activity</li>\n              ) : (\n                activities.map((activity, index) => (\n                  <li key={index} className=\"relative pb-8\">\n                    <div className=\"relative flex space-x-3\">\n                      <div>\n                        <span className=\"h-8 w-8 rounded-full bg-gray-400 flex items-center justify-center ring-8 ring-white\">\n                          <span className=\"text-white text-sm\">•</span>\n                        </span>\n                      </div>\n                      <div className=\"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4\">\n                        <div>\n                          <p className=\"text-sm text-gray-500\">\n                            {activity.description}\n                          </p>\n                        </div>\n                        <div className=\"text-right text-sm whitespace-nowrap text-gray-500\">\n                          {activity.time}\n                        </div>\n                      </div>\n                    </div>\n                  </li>\n                ))\n              )}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n    const chartWidget = `'use client'\n\nimport { useEffect, useState } from 'react'\n\nexport default function ChartWidget() {\n  const [chartData, setChartData] = useState([])\n\n  return (\n    <div className=\"bg-white shadow rounded-lg\">\n      <div className=\"px-4 py-5 sm:p-6\">\n        <h3 className=\"text-lg leading-6 font-medium text-gray-900\">\n          Analytics Overview\n        </h3>\n        <div className=\"mt-5\">\n          <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded\">\n            <p className=\"text-gray-500\">Chart visualization will be implemented here</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"StatsOverview.tsx\"), statsOverview);\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"RecentActivity.tsx\"), recentActivity);\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(componentsDir, \"ChartWidget.tsx\"), chartWidget);\n}\n// Generate custom API routes\nasync function generateCustomAPIRoutes(config, apiDir) {\n    // Generate API routes for each model with tenant isolation\n    for (const model of config.database.models){\n        const apiRoute = `import { NextRequest, NextResponse } from 'next/server'\nimport { PrismaClient } from '@prisma/client'\n\nconst prisma = new PrismaClient()\n\nexport async function GET(request: NextRequest) {\n  try {\n    // Get tenant ID from headers (set by middleware)\n    const tenantId = request.headers.get('x-tenant-id')\n    \n    if (!tenantId) {\n      return NextResponse.json({ error: 'Tenant not found' }, { status: 403 })\n    }\n    \n    const ${model.name.toLowerCase()}s = await prisma.${model.name.toLowerCase()}.findMany({\n      where: { tenantId },\n      include: {\n        tenant: {\n          select: { name: true, slug: true }\n        }\n      }\n    })\n    return NextResponse.json(${model.name.toLowerCase()}s)\n  } catch (error) {\n    console.error('Error fetching ${model.name}s:', error)\n    return NextResponse.json({ error: 'Failed to fetch ${model.name}s' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    // Get tenant ID from headers (set by middleware)\n    const tenantId = request.headers.get('x-tenant-id')\n    const userId = request.headers.get('x-user-id')\n    \n    if (!tenantId) {\n      return NextResponse.json({ error: 'Tenant not found' }, { status: 403 })\n    }\n    \n    const data = await request.json()\n    \n    // Ensure tenant isolation\n    const ${model.name.toLowerCase()} = await prisma.${model.name.toLowerCase()}.create({\n      data: {\n        ...data,\n        tenantId // Always set tenant ID\n      },\n      include: {\n        tenant: {\n          select: { name: true, slug: true }\n        }\n      }\n    })\n    return NextResponse.json(${model.name.toLowerCase()})\n  } catch (error) {\n    console.error('Error creating ${model.name}:', error)\n    return NextResponse.json({ error: 'Failed to create ${model.name}' }, { status: 500 })\n  }\n}`;\n        const modelApiDir = path__WEBPACK_IMPORTED_MODULE_4__.join(apiDir, model.name.toLowerCase() + \"s\");\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(modelApiDir, {\n            recursive: true\n        });\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(modelApiDir, \"route.ts\"), apiRoute);\n    }\n    // Generate tenant management API\n    const tenantApiRoute = `import { NextRequest, NextResponse } from 'next/server'\nimport { TenantManager } from '@opsai/multi-tenant'\nimport { AuthService } from '@opsai/auth'\n\nconst tenantManager = TenantManager.getInstance(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\n)\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { name, slug } = await request.json()\n    \n    const tenant = await tenantManager.createTenant({\n      name,\n      slug,\n      status: 'active',\n      settings: {\n        timezone: 'UTC',\n        currency: 'USD',\n        language: 'en'\n      },\n      config: {} // Will be set later\n    })\n    \n    // Setup tenant database schema\n    await tenantManager.setupTenantDatabase(tenant.id, {} as any)\n    \n    // Enable row-level security\n    await tenantManager.enableRLS(tenant.id)\n    \n    return NextResponse.json(tenant)\n  } catch (error) {\n    console.error('Error creating tenant:', error)\n    return NextResponse.json({ error: 'Failed to create tenant' }, { status: 500 })\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const tenantId = request.headers.get('x-tenant-id')\n    \n    if (!tenantId) {\n      return NextResponse.json({ error: 'Tenant not found' }, { status: 403 })\n    }\n    \n    const tenant = await tenantManager.getTenant(tenantId)\n    return NextResponse.json(tenant)\n  } catch (error) {\n    console.error('Error fetching tenant:', error)\n    return NextResponse.json({ error: 'Failed to fetch tenant' }, { status: 500 })\n  }\n}`;\n    const tenantApiDir = path__WEBPACK_IMPORTED_MODULE_4__.join(apiDir, \"tenants\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(tenantApiDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(tenantApiDir, \"route.ts\"), tenantApiRoute);\n    // Generate auth API routes\n    const authApiRoute = `import { NextRequest, NextResponse } from 'next/server'\nimport { AuthService } from '@opsai/auth'\nimport { TenantManager } from '@opsai/multi-tenant'\n\nconst authService = new AuthService({\n  supabaseUrl: process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  supabaseAnonKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n  jwtSecret: process.env.JWT_SECRET!\n})\n\nconst tenantManager = TenantManager.getInstance(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\n)\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { action, ...data } = await request.json()\n    \n    switch (action) {\n      case 'login':\n        const loginResult = await authService.login(data)\n        return NextResponse.json(loginResult)\n        \n      case 'register':\n        const registerResult = await authService.register(data)\n        return NextResponse.json(registerResult)\n        \n      case 'logout':\n        await authService.logout(data.token)\n        return NextResponse.json({ success: true })\n        \n      default:\n        return NextResponse.json({ error: 'Invalid action' }, { status: 400 })\n    }\n  } catch (error) {\n    console.error('Auth error:', error)\n    return NextResponse.json({ error: 'Authentication failed' }, { status: 401 })\n  }\n}`;\n    const authApiDir = path__WEBPACK_IMPORTED_MODULE_4__.join(apiDir, \"auth\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(authApiDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(authApiDir, \"route.ts\"), authApiRoute);\n    console.log(\"\\uD83D\\uDD0C Custom API routes generated\");\n}\n// Generate custom data pages\nasync function generateCustomDataPages(config, appDir) {\n    for (const model of config.database.models){\n        const modelPage = `'use client'\n\nimport { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport { Plus, Edit, Trash2 } from 'lucide-react'\n\ninterface ${model.name} {\n  id: string\n  ${model.fields.map((field)=>`${field.name}: ${field.type === \"DateTime\" ? \"string\" : \"string\"}`).join(\"\\n  \")}\n}\n\nexport default function ${model.name}List() {\n  const [${model.name.toLowerCase()}s, set${model.name}s] = useState<${model.name}[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetch('/api/${model.name.toLowerCase()}s')\n      .then(res => res.json())\n      .then(data => {\n        set${model.name}s(data)\n        setLoading(false)\n      })\n      .catch(error => {\n        console.error('Error fetching ${model.name}s:', error)\n        setLoading(false)\n      })\n  }, [])\n\n  const handleDelete = async (id: string) => {\n    if (confirm('Are you sure you want to delete this ${model.name}?')) {\n      try {\n        await fetch(\\`/api/${model.name.toLowerCase()}s/\\${id}\\`, { method: 'DELETE' })\n        set${model.name}s(${model.name.toLowerCase()}s.filter(item => item.id !== id))\n      } catch (error) {\n        console.error('Error deleting ${model.name}:', error)\n      }\n    }\n  }\n\n  if (loading) {\n    return <div className=\"p-8\">Loading...</div>\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"sm:flex sm:items-center mb-8\">\n        <div className=\"sm:flex-auto\">\n          <h1 className=\"text-2xl font-semibold text-gray-900\">${model.name}s</h1>\n          <p className=\"mt-2 text-sm text-gray-700\">\n            Manage your ${model.name}s\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0 sm:ml-16 sm:flex-none\">\n          <Link\n            href=\"/${model.name.toLowerCase()}s/new\"\n            className=\"inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto\"\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add ${model.name}\n          </Link>\n        </div>\n      </div>\n\n      <div className=\"mt-8 flow-root\">\n        <div className=\"-my-2 -mx-6 overflow-x-auto lg:-mx-8\">\n          <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\n            <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg\">\n              <table className=\"min-w-full divide-y divide-gray-300\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    ${model.fields.map((field)=>`<th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wide\">\n                        ${field.name}\n                      </th>`).join(\"\\n                    \")}\n                    <th className=\"relative px-6 py-3\">\n                      <span className=\"sr-only\">Actions</span>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-200 bg-white\">\n                  {${model.name.toLowerCase()}s.map((${model.name.toLowerCase()}) => (\n                    <tr key={${model.name.toLowerCase()}.id}>\n                      ${model.fields.map((field)=>`<td className=\"whitespace-nowrap px-6 py-4 text-sm text-gray-900\">\n                          {${model.name.toLowerCase()}.${field.name}}\n                        </td>`).join(\"\\n                      \")}\n                      <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6\">\n                        <button\n                          onClick={() => handleDelete(${model.name.toLowerCase()}.id)}\n                          className=\"text-red-600 hover:text-red-900\"\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}`;\n        const modelPageDir = path__WEBPACK_IMPORTED_MODULE_4__.join(appDir, model.name.toLowerCase() + \"s\");\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(modelPageDir, {\n            recursive: true\n        });\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(modelPageDir, \"page.tsx\"), modelPage);\n    }\n    console.log(\"\\uD83D\\uDCC4 Custom data pages generated\");\n}\n// Generate custom utility files\nasync function generateCustomUtilityFiles(config, libDir) {\n    const globalsCss = `@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --foreground-rgb: 0, 0, 0;\n  --background-start-rgb: 214, 219, 220;\n  --background-end-rgb: 255, 255, 255;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --foreground-rgb: 255, 255, 255;\n    --background-start-rgb: 0, 0, 0;\n    --background-end-rgb: 0, 0, 0;\n  }\n}\n\nbody {\n  color: rgb(var(--foreground-rgb));\n  background: linear-gradient(\n      to bottom,\n      transparent,\n      rgb(var(--background-end-rgb))\n    )\n    rgb(var(--background-start-rgb));\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(libDir, \"globals.css\"), globalsCss);\n    console.log(\"\\uD83C\\uDFA8 Custom utility files generated\");\n}\n// Generate custom package.json\nasync function generateCustomPackageJson(config, outputDir) {\n    const businessType = config.vertical.industry.toLowerCase();\n    let dependencies = {\n        \"next\": \"^14.0.0\",\n        \"react\": \"^18.0.0\",\n        \"react-dom\": \"^18.0.0\",\n        \"@prisma/client\": \"^5.0.0\",\n        \"lucide-react\": \"^0.263.0\",\n        \"tailwindcss\": \"^3.3.0\",\n        \"autoprefixer\": \"^10.4.14\",\n        \"postcss\": \"^8.4.24\",\n        // OpsAI Core packages\n        \"@opsai/auth\": \"workspace:*\",\n        \"@opsai/integration\": \"workspace:*\",\n        \"@opsai/database\": \"workspace:*\",\n        \"@opsai/ui\": \"workspace:*\",\n        \"@opsai/shared\": \"workspace:*\",\n        \"@supabase/supabase-js\": \"^2.39.0\",\n        \"jsonwebtoken\": \"^9.0.0\",\n        \"bcryptjs\": \"^2.4.3\"\n    };\n    // Add business-specific dependencies\n    if (businessType === \"healthcare\") {\n        dependencies = {\n            ...dependencies,\n            \"chart.js\": \"^4.0.0\",\n            \"react-chartjs-2\": \"^5.0.0\",\n            \"date-fns\": \"^2.30.0\"\n        };\n    } else if (businessType === \"ecommerce\") {\n        dependencies = {\n            ...dependencies,\n            \"stripe\": \"^12.0.0\",\n            \"react-hook-form\": \"^7.45.0\",\n            \"zod\": \"^3.22.0\"\n        };\n    } else if (businessType === \"real_estate\") {\n        dependencies = {\n            ...dependencies,\n            \"leaflet\": \"^1.9.0\",\n            \"react-leaflet\": \"^4.2.0\",\n            \"react-datepicker\": \"^4.16.0\"\n        };\n    }\n    const packageJson = {\n        name: config.vertical.name.toLowerCase().replace(/\\s+/g, \"-\"),\n        version: \"1.0.0\",\n        private: true,\n        scripts: {\n            \"dev\": \"next dev\",\n            \"build\": \"next build\",\n            \"start\": \"next start\",\n            \"lint\": \"next lint\",\n            \"db:generate\": \"prisma generate\",\n            \"db:push\": \"prisma db push\"\n        },\n        dependencies,\n        devDependencies: {\n            \"typescript\": \"^5.0.0\",\n            \"@types/node\": \"^20.0.0\",\n            \"@types/react\": \"^18.0.0\",\n            \"@types/react-dom\": \"^18.0.0\",\n            \"prisma\": \"^5.0.0\",\n            \"eslint\": \"^8.0.0\",\n            \"eslint-config-next\": \"^14.0.0\"\n        }\n    };\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"package.json\"), JSON.stringify(packageJson, null, 2));\n    console.log(\"\\uD83D\\uDCE6 Custom package.json generated\");\n}\n// Generate custom README\nasync function generateCustomREADME(config, outputDir) {\n    const readmeContent = `# ${config.business.name}\n\nThis is a generated Next.js application powered by OPSAI.\n\n## Getting Started\n\n1. Install dependencies:\n\\`\\`\\`bash\nnpm install\n\\`\\`\\`\n\n2. Set up the database:\n\\`\\`\\`bash\nnpm run db:generate\nnpm run db:push\n\\`\\`\\`\n\n3. Run the development server:\n\\`\\`\\`bash\nnpm run dev\n\\`\\`\\`\n\n4. Open [http://localhost:3000](http://localhost:3000) with your browser.\n\n## Features\n\n- Complete dashboard with analytics\n- CRUD operations for all data models\n- API endpoints for integrations\n- Responsive design with Tailwind CSS\n- Database integration with Prisma\n\n## Generated Models\n\n${config.database.models.map((model)=>`- ${model.name}`).join(\"\\n\")}\n\n## API Endpoints\n\n${config.database.models.map((model)=>`- \\`/api/${model.name.toLowerCase()}s\\` - CRUD operations for ${model.name}`).join(\"\\n\")}\n\nGenerated by OPSAI on ${new Date().toISOString()}\n`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"README.md\"), readmeContent);\n    console.log(\"\\uD83D\\uDCD6 Custom README generated\");\n}\n// Generate authentication system\nasync function generateAuthenticationSystem(config, outputDir) {\n    const authDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"app\", \"auth\");\n    const middlewareDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"middleware\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(authDir, {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(middlewareDir, {\n        recursive: true\n    });\n    // Generate login page\n    const loginPage = `'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { AuthService } from '@opsai/auth'\nimport { Card } from '@opsai/ui'\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const router = useRouter()\n  \n  const authService = new AuthService({\n    supabaseUrl: process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    supabaseAnonKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    jwtSecret: process.env.JWT_SECRET!\n  })\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    try {\n      const response = await authService.login({ email, password })\n      if (response.token) {\n        localStorage.setItem('auth_token', response.token)\n        router.push('/')\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Login failed')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md p-8\">\n        <h1 className=\"text-2xl font-bold text-center mb-6\">Login to ${config.business.name}</h1>\n        \n        <form onSubmit={handleLogin} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n            <input\n              type=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n            <input\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n          \n          {error && (\n            <div className=\"text-red-600 text-sm\">{error}</div>\n          )}\n          \n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 disabled:opacity-50\"\n          >\n            {loading ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n        \n        <p className=\"text-center mt-4 text-sm text-gray-600\">\n          Don't have an account? <a href=\"/auth/register\" className=\"text-blue-600 hover:underline\">Register</a>\n        </p>\n      </Card>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(authDir, \"login\", \"page.tsx\"), loginPage);\n    // Generate register page\n    const registerPage = `'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { AuthService } from '@opsai/auth'\nimport { Card } from '@opsai/ui'\n\nexport default function RegisterPage() {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: '',\n    tenantName: ''\n  })\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const router = useRouter()\n  \n  const authService = new AuthService({\n    supabaseUrl: process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    supabaseAnonKey: process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    jwtSecret: process.env.JWT_SECRET!\n  })\n\n  const handleRegister = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    try {\n      // Create tenant first\n      const tenantId = await createTenant(formData.tenantName)\n      \n      // Register user with tenant\n      const response = await authService.register({\n        ...formData,\n        tenantId,\n        role: 'admin'\n      })\n      \n      if (response.token) {\n        localStorage.setItem('auth_token', response.token)\n        router.push('/')\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Registration failed')\n    } finally {\n      setLoading(false)\n    }\n  }\n  \n  const createTenant = async (name: string): Promise<string> => {\n    // This would call the tenant creation API\n    const response = await fetch('/api/tenants', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, slug: name.toLowerCase().replace(/\\s+/g, '-') })\n    })\n    const data = await response.json()\n    return data.id\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md p-8\">\n        <h1 className=\"text-2xl font-bold text-center mb-6\">Create Your Account</h1>\n        \n        <form onSubmit={handleRegister} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">First Name</label>\n              <input\n                type=\"text\"\n                value={formData.firstName}\n                onChange={(e) => setFormData({...formData, firstName: e.target.value})}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n                required\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Last Name</label>\n              <input\n                type=\"text\"\n                value={formData.lastName}\n                onChange={(e) => setFormData({...formData, lastName: e.target.value})}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n                required\n              />\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Organization Name</label>\n            <input\n              type=\"text\"\n              value={formData.tenantName}\n              onChange={(e) => setFormData({...formData, tenantName: e.target.value})}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n            <input\n              type=\"email\"\n              value={formData.email}\n              onChange={(e) => setFormData({...formData, email: e.target.value})}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n            <input\n              type=\"password\"\n              value={formData.password}\n              onChange={(e) => setFormData({...formData, password: e.target.value})}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md\"\n              required\n            />\n          </div>\n          \n          {error && (\n            <div className=\"text-red-600 text-sm\">{error}</div>\n          )}\n          \n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 disabled:opacity-50\"\n          >\n            {loading ? 'Creating account...' : 'Create Account'}\n          </button>\n        </form>\n        \n        <p className=\"text-center mt-4 text-sm text-gray-600\">\n          Already have an account? <a href=\"/auth/login\" className=\"text-blue-600 hover:underline\">Login</a>\n        </p>\n      </Card>\n    </div>\n  )\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(path__WEBPACK_IMPORTED_MODULE_4__.join(authDir, \"register\"), {\n        recursive: true\n    });\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(authDir, \"register\", \"page.tsx\"), registerPage);\n    // Generate middleware for auth protection\n    const middleware = `import { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\nimport { verifyToken } from '@opsai/auth/utils/jwt-utils'\n\nexport function middleware(request: NextRequest) {\n  // Public routes that don't require authentication\n  const publicRoutes = ['/auth/login', '/auth/register', '/api/auth']\n  \n  if (publicRoutes.some(route => request.nextUrl.pathname.startsWith(route))) {\n    return NextResponse.next()\n  }\n  \n  // Check for auth token\n  const token = request.cookies.get('auth_token')?.value || \n                request.headers.get('authorization')?.replace('Bearer ', '')\n  \n  if (!token) {\n    return NextResponse.redirect(new URL('/auth/login', request.url))\n  }\n  \n  try {\n    // Verify token\n    const decoded = verifyToken(token, process.env.JWT_SECRET!)\n    \n    // Add user info to headers for API routes\n    const response = NextResponse.next()\n    response.headers.set('x-user-id', decoded.userId)\n    response.headers.set('x-tenant-id', decoded.tenantId)\n    \n    return response\n  } catch (error) {\n    return NextResponse.redirect(new URL('/auth/login', request.url))\n  }\n}\n\nexport const config = {\n  matcher: ['/((?!_next/static|_next/image|favicon.ico).*)']\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"middleware.ts\"), middleware);\n    console.log(\"\\uD83D\\uDD10 Authentication system generated\");\n}\n// Generate integration configuration\nasync function generateIntegrationConfig(config, outputDir) {\n    const integrationsDir = path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"lib\", \"integrations\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(integrationsDir, {\n        recursive: true\n    });\n    // Generate Airbyte integration\n    const airbyteIntegration = `import { createAirbyteConnector } from '@opsai/integration'\nimport { prisma } from '@opsai/database'\n\nexport class DataSyncService {\n  private airbyte = createAirbyteConnector({\n    apiKey: process.env.AIRBYTE_API_KEY,\n    baseUrl: process.env.AIRBYTE_BASE_URL || 'http://localhost:8000',\n    workspaceId: process.env.AIRBYTE_WORKSPACE_ID\n  })\n  \n  async syncDataSource(sourceConfig: any, tenantId: string) {\n    try {\n      // Create Airbyte source\n      const source = await this.airbyte.execute('create_source', {\n        name: \\`\\${tenantId}-\\${sourceConfig.name}\\`,\n        sourceType: sourceConfig.type,\n        configuration: sourceConfig.config\n      })\n      \n      // Create destination (our database)\n      const destination = await this.airbyte.execute('create_destination', {\n        name: \\`\\${tenantId}-database\\`,\n        destinationType: 'postgres',\n        configuration: {\n          host: process.env.DATABASE_URL,\n          database: \\`tenant_\\${tenantId}\\`,\n          schema: 'synced_data'\n        }\n      })\n      \n      // Create connection\n      const connection = await this.airbyte.execute('create_connection', {\n        sourceId: source.sourceId,\n        destinationId: destination.destinationId,\n        schedule: { timeUnit: 'hours', units: 1 }\n      })\n      \n      // Trigger initial sync\n      const syncJob = await this.airbyte.execute('trigger_sync', {\n        connectionId: connection.connectionId\n      })\n      \n      // Save sync configuration\n      await prisma.integration.create({\n        data: {\n          tenantId,\n          provider: sourceConfig.type,\n          connectionId: connection.connectionId,\n          status: 'active',\n          config: sourceConfig\n        }\n      })\n      \n      return { success: true, syncJobId: syncJob.jobId }\n    } catch (error) {\n      console.error('Sync failed:', error)\n      return { success: false, error: error.message }\n    }\n  }\n  \n  async getSyncStatus(jobId: string) {\n    return this.airbyte.execute('get_sync_status', { jobId })\n  }\n}`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(integrationsDir, \"data-sync.ts\"), airbyteIntegration);\n    // Generate API integrations based on business type\n    const integrations = config.apis?.integrations || [];\n    for (const integration of integrations){\n        if (integration.enabled) {\n            const integrationCode = generateIntegrationCode(integration.name, config.vertical.industry);\n            await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(integrationsDir, integration.name + \"-integration.ts\"), integrationCode);\n        }\n    }\n    console.log(\"\\uD83D\\uDD0C Integration configurations generated\");\n}\n// Helper function to generate integration code\nfunction generateIntegrationCode(integrationName, businessType) {\n    const integrationMap = {\n        \"stripe\": `import Stripe from 'stripe'\n\nexport class StripeIntegration {\n  private stripe: Stripe\n  \n  constructor(apiKey: string) {\n    this.stripe = new Stripe(apiKey, { apiVersion: '2023-10-16' })\n  }\n  \n  async createCustomer(email: string, name: string) {\n    return this.stripe.customers.create({ email, name })\n  }\n  \n  async createPaymentIntent(amount: number, currency: string = 'usd') {\n    return this.stripe.paymentIntents.create({ amount, currency })\n  }\n  \n  async createSubscription(customerId: string, priceId: string) {\n    return this.stripe.subscriptions.create({\n      customer: customerId,\n      items: [{ price: priceId }]\n    })\n  }\n}`,\n        \"quickbooks\": `import { OAuthManager } from '@opsai/integration/auth'\n\nexport class QuickBooksIntegration {\n  private oauth: OAuthManager\n  \n  constructor() {\n    this.oauth = new OAuthManager('quickbooks')\n  }\n  \n  async connect(tenantId: string) {\n    return this.oauth.getAuthorizationUrl(tenantId)\n  }\n  \n  async syncInvoices(accessToken: string) {\n    // QuickBooks invoice sync logic\n  }\n}`,\n        \"shopify\": `import { RestConnector } from '@opsai/integration'\n\nexport class ShopifyIntegration {\n  private connector: RestConnector\n  \n  constructor(shop: string, accessToken: string) {\n    this.connector = new RestConnector({\n      baseURL: \\`https://\\${shop}.myshopify.com/admin/api/2024-01\\`,\n      headers: { 'X-Shopify-Access-Token': accessToken }\n    })\n  }\n  \n  async getProducts() {\n    return this.connector.get('/products.json')\n  }\n  \n  async getOrders() {\n    return this.connector.get('/orders.json')\n  }\n}`\n    };\n    return integrationMap[integrationName] || `// ${integrationName} integration placeholder`;\n}\n// Generate environment configuration\nasync function generateEnvironmentConfig(config, outputDir) {\n    const envExample = `# Database\nDATABASE_URL=\"postgresql://postgres:postgres@localhost:5432/app_db\"\n\n# Authentication\nNEXT_PUBLIC_SUPABASE_URL=\"your-supabase-url\"\nNEXT_PUBLIC_SUPABASE_ANON_KEY=\"your-supabase-anon-key\"\nJWT_SECRET=\"your-jwt-secret-key\"\n\n# App Configuration\nNEXT_PUBLIC_APP_NAME=\"${config.business.name}\"\nNEXT_PUBLIC_APP_URL=\"http://localhost:3000\"`;\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \".env.example\"), envExample);\n    console.log(\"\\uD83C\\uDF0D Environment configuration generated\");\n}\n// Generate deployment configuration\nasync function generateDeploymentConfig(config, outputDir) {\n    const vercelConfig = {\n        \"name\": config.business.name.toLowerCase().replace(/\\s+/g, \"-\"),\n        \"framework\": \"nextjs\",\n        \"buildCommand\": \"npm run build\",\n        \"outputDirectory\": \".next\",\n        \"installCommand\": \"npm install\",\n        \"devCommand\": \"npm run dev\"\n    };\n    await fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile(path__WEBPACK_IMPORTED_MODULE_4__.join(outputDir, \"vercel.json\"), JSON.stringify(vercelConfig, null, 2));\n    console.log(\"\\uD83D\\uDE80 Deployment configuration generated\");\n}\nasync function POST(request) {\n    try {\n        const { yamlConfig, appName } = await request.json();\n        if (!yamlConfig || !appName) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing yamlConfig or appName\"\n            }, {\n                status: 400\n            });\n        }\n        // Parse and validate YAML configuration\n        let config;\n        try {\n            console.log(\"\\uD83D\\uDD0D Parsing YAML config:\", yamlConfig.substring(0, 500));\n            // Try to parse the YAML config as YAML first\n            let parsedConfig;\n            try {\n                // Import yaml parser\n                const yaml = __webpack_require__(/*! js-yaml */ \"(rsc)/../../node_modules/.pnpm/js-yaml@4.1.0/node_modules/js-yaml/index.js\");\n                parsedConfig = yaml.load(yamlConfig);\n                console.log(\"✅ Successfully parsed YAML\");\n            } catch (yamlError) {\n                console.log(\"❌ YAML parse failed, trying JSON fallback\");\n                // If YAML parsing fails, the yamlConfig might already be JSON\n                parsedConfig = JSON.parse(yamlConfig);\n            }\n            console.log(\"\\uD83D\\uDCCA Parsed config structure:\", JSON.stringify(parsedConfig, null, 2).substring(0, 1000));\n            // Validate the parsed configuration using Zod\n            const validationResult = validateYamlConfigSafe(parsedConfig);\n            if (!validationResult.success) {\n                console.error(\"❌ YAML validation failed:\", validationResult.errors);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Invalid YAML configuration\",\n                    details: validationResult.errors\n                }, {\n                    status: 400\n                });\n            }\n            config = validationResult.data;\n            console.log(\"✅ YAML validation successful\");\n            console.log(\"\\uD83C\\uDFAF Final config for app generation:\", JSON.stringify(config, null, 2).substring(0, 1000));\n        } catch (parseError) {\n            console.error(\"Config parsing error:\", parseError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid YAML configuration\"\n            }, {\n                status: 400\n            });\n        }\n        // Create output directory\n        const timestamp = Date.now();\n        const sanitizedAppName = appName.toLowerCase().replace(/\\s+/g, \"-\");\n        const outputDir = path__WEBPACK_IMPORTED_MODULE_4__.join(process.cwd(), \"generated-apps\", sanitizedAppName + \"-\" + timestamp);\n        await fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir(outputDir, {\n            recursive: true\n        });\n        // Generate the complete custom Next.js application\n        await generateCustomNextJSApp(config, appName, outputDir);\n        // Auto-start the generated application\n        const port = 3000 + Math.floor(Math.random() * 1000);\n        console.log(\"\\uD83D\\uDE80 Auto-starting \" + appName + \" on port \" + port + \"...\");\n        try {\n            // Install dependencies\n            console.log(\"\\uD83D\\uDCE6 Installing dependencies...\");\n            await execAsync(\"npm install\", {\n                cwd: outputDir\n            });\n            // Set up database\n            console.log(\"\\uD83D\\uDCBE Setting up database...\");\n            await execAsync(\"npm run db:generate\", {\n                cwd: outputDir\n            });\n            await execAsync(\"npm run db:push\", {\n                cwd: outputDir\n            });\n            // Start the application\n            console.log(\"\\uD83D\\uDE80 Starting application on port \" + port + \"...\");\n            execAsync(\"npm run dev -- -p \" + port, {\n                cwd: outputDir\n            }).then(()=>console.log(\"✅ Application started successfully on port \" + port)).catch((error)=>console.error(\"❌ Failed to start application:\", error));\n        } catch (error) {\n            console.error(\"Auto-setup error:\", error);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            appName,\n            outputDir,\n            port,\n            message: \"Application generated successfully! Access it at http://localhost:\" + port\n        });\n    } catch (error) {\n        console.error(\"Generation error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate application\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message: \"App generation API is running\",\n        endpoints: {\n            POST: \"/api/generate - Generate a new application from YAML config\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LHVCQUF1QjtZQUN2QmhLLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE1BQU01QyxVQUFVLGVBQWU7Z0JBQUUwTSxLQUFLaEs7WUFBVTtZQUVoRCxrQkFBa0I7WUFDbEJDLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE1BQU01QyxVQUFVLHVCQUF1QjtnQkFBRTBNLEtBQUtoSztZQUFVO1lBQ3hELE1BQU0xQyxVQUFVLG1CQUFtQjtnQkFBRTBNLEtBQUtoSztZQUFVO1lBRXBELHdCQUF3QjtZQUN4QkMsUUFBUUMsR0FBRyxDQUFDLCtDQUFxQytKLE9BQU87WUFDeEQzTSxVQUFVLHVCQUF1QjJNLE1BQU07Z0JBQUVELEtBQUtoSztZQUFVLEdBQ3JEcUssSUFBSSxDQUFDLElBQU1wSyxRQUFRQyxHQUFHLENBQUMsZ0RBQWdEK0osT0FDdkVLLEtBQUssQ0FBQyxDQUFDeE0sUUFBVW1DLFFBQVFuQyxLQUFLLENBQUMsa0NBQWtDQTtRQUV0RSxFQUFFLE9BQU9BLE9BQU87WUFDZG1DLFFBQVFuQyxLQUFLLENBQUMscUJBQXFCQTtRQUNyQztRQUVBLE9BQU9iLHFEQUFZQSxDQUFDaU0sSUFBSSxDQUFDO1lBQ3ZCakksU0FBUztZQUNUbEI7WUFDQUM7WUFDQWlLO1lBQ0FNLFNBQVMsdUVBQXVFTjtRQUNsRjtJQUVGLEVBQUUsT0FBT25NLE9BQU87UUFDZG1DLFFBQVFuQyxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxPQUFPYixxREFBWUEsQ0FBQ2lNLElBQUksQ0FDdEI7WUFBRXBMLE9BQU87UUFBaUMsR0FDMUM7WUFBRTZELFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBSU8sZUFBZTZJO0lBQ3BCLE9BQU92TixxREFBWUEsQ0FBQ2lNLElBQUksQ0FBQztRQUN2QnFCLFNBQVM7UUFDVEUsV0FBVztZQUNUMUIsTUFBTTtRQUNSO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL29wc2FpLW9uYm9hcmRpbmcvLi9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzP2I1OWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJ1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMvcHJvbWlzZXMnXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnXG5cbmNvbnN0IGV4ZWNBc3luYyA9IHByb21pc2lmeShleGVjKVxuXG5cblxuLy8gTG9jYWwgaW1wbGVtZW50YXRpb25zIHRvIHJlcGxhY2UgYnJva2VuIGltcG9ydHNcbmNsYXNzIExvY2FsWWFtbFByb2Nlc3NvciB7XG4gIHN0YXRpYyBwYXJzZSh5YW1sU3RyaW5nOiBzdHJpbmcpOiBhbnkge1xuICAgIHRyeSB7XG4gICAgICAvLyBTaW1wbGUgWUFNTCBwYXJzaW5nIC0gaW4gcHJvZHVjdGlvbiwgdXNlIGpzLXlhbWxcbiAgICAgIGlmICh5YW1sU3RyaW5nLnRyaW0oKS5zdGFydHNXaXRoKCd7JykpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoeWFtbFN0cmluZylcbiAgICAgIH1cbiAgICAgIC8vIEJhc2ljIFlBTUwtbGlrZSBwYXJzaW5nIGZvciBkZW1vXG4gICAgICByZXR1cm4gdGhpcy5wYXJzZUJhc2ljWWFtbCh5YW1sU3RyaW5nKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFlBTUwgcGFyc2luZyBmYWlsZWQ6ICR7ZXJyb3J9YClcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBwYXJzZUJhc2ljWWFtbCh5YW1sU3RyaW5nOiBzdHJpbmcpOiBhbnkge1xuICAgIGNvbnN0IGxpbmVzID0geWFtbFN0cmluZy5zcGxpdCgnXFxuJylcbiAgICBjb25zdCByZXN1bHQ6IGFueSA9IHt9XG4gICAgbGV0IGN1cnJlbnRTZWN0aW9uOiBhbnkgPSBudWxsXG4gICAgbGV0IGN1cnJlbnRLZXkgPSAnJ1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKClcbiAgICAgIGlmICghdHJpbW1lZCB8fCB0cmltbWVkLnN0YXJ0c1dpdGgoJyMnKSkgY29udGludWVcblxuICAgICAgaWYgKHRyaW1tZWQuZW5kc1dpdGgoJzonKSkge1xuICAgICAgICBjb25zdCBzZWN0aW9uTmFtZSA9IHRyaW1tZWQuc2xpY2UoMCwgLTEpLnRyaW0oKVxuICAgICAgICBpZiAoIXJlc3VsdFtzZWN0aW9uTmFtZV0pIHtcbiAgICAgICAgICByZXN1bHRbc2VjdGlvbk5hbWVdID0ge31cbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50U2VjdGlvbiA9IHJlc3VsdFtzZWN0aW9uTmFtZV1cbiAgICAgIH0gZWxzZSBpZiAodHJpbW1lZC5pbmNsdWRlcygnOicpICYmIGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRyaW1tZWQuc3BsaXQoJzonLCAyKVxuICAgICAgICBjdXJyZW50U2VjdGlvbltrZXkudHJpbSgpXSA9IHZhbHVlLnRyaW0oKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxufVxuXG5jbGFzcyBMb2NhbENhY2hlU2VydmljZSB7XG4gIHByaXZhdGUgY2FjaGUgPSBuZXcgTWFwKClcblxuICBhc3luYyBnZXQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpXG4gIH1cblxuICBhc3luYyBzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIHR0bD86IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpXG4gIH1cbn1cblxuY2xhc3MgTG9jYWxTZWN1cml0eVNlcnZpY2Uge1xuICBhc3luYyBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gU2ltcGxlIGhhc2ggZm9yIGRlbW8gLSBpbiBwcm9kdWN0aW9uLCB1c2UgYmNyeXB0XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHBhc3N3b3JkKS50b1N0cmluZygnYmFzZTY0JylcbiAgfVxuXG4gIGdlbmVyYXRlVG9rZW4ocGF5bG9hZDogYW55KTogc3RyaW5nIHtcbiAgICAvLyBTaW1wbGUgdG9rZW4gZ2VuZXJhdGlvbiBmb3IgZGVtbyAtIGluIHByb2R1Y3Rpb24sIHVzZSBKV1RcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkpLnRvU3RyaW5nKCdiYXNlNjQnKVxuICB9XG59XG5cbmNsYXNzIExvY2FsQXBwR2VuZXJhdG9yIHtcbiAgc3RhdGljIGFzeW5jIGdlbmVyYXRlKGNvbmZpZzogYW55LCBhcHBOYW1lOiBzdHJpbmcsIG91dHB1dERpcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coYEdlbmVyYXRpbmcgYXBwOiAke2FwcE5hbWV9IGluICR7b3V0cHV0RGlyfWApXG4gICAgLy8gSW1wbGVtZW50YXRpb24gd2lsbCBiZSBhZGRlZCBiZWxvd1xuICB9XG59XG5cbmNsYXNzIExvY2FsQXV0aFNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcihjb25maWc6IGFueSkge1xuICAgIC8vIEF1dGggc2VydmljZSBjb25maWd1cmF0aW9uXG4gIH1cblxuICBhc3luYyBsb2dpbihjcmVkZW50aWFsczogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyBTaW1wbGUgbG9naW4gZm9yIGRlbW9cbiAgICByZXR1cm4geyB0b2tlbjogJ2RlbW8tdG9rZW4nLCB1c2VyOiB7IGlkOiAnMScsIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCB9IH1cbiAgfVxuXG4gIGFzeW5jIHJlZ2lzdGVyKHVzZXJEYXRhOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIFNpbXBsZSByZWdpc3RyYXRpb24gZm9yIGRlbW9cbiAgICByZXR1cm4geyB0b2tlbjogJ2RlbW8tdG9rZW4nLCB1c2VyOiB7IGlkOiAnMScsIGVtYWlsOiB1c2VyRGF0YS5lbWFpbCB9IH1cbiAgfVxufVxuXG5jbGFzcyBMb2NhbEFpcmJ5dGVDb25uZWN0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWc6IGFueSkge1xuICAgIC8vIEFpcmJ5dGUgY29uZmlndXJhdGlvblxuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZShhY3Rpb246IHN0cmluZywgcGFyYW1zOiBhbnkpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIFNpbXBsZSBBaXJieXRlIHNpbXVsYXRpb25cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB7IGlkOiAnZGVtby1jb25uZWN0aW9uJyB9IH1cbiAgfVxufVxuXG5jbGFzcyBMb2NhbFRlbmFudE1hbmFnZXIge1xuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogTG9jYWxUZW5hbnRNYW5hZ2VyIHtcbiAgICByZXR1cm4gbmV3IExvY2FsVGVuYW50TWFuYWdlcigpXG4gIH1cblxuICBhc3luYyBjcmVhdGVUZW5hbnQoZGF0YTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4geyBpZDogJ2RlbW8tdGVuYW50JywgbmFtZTogZGF0YS5uYW1lLCBzbHVnOiBkYXRhLnNsdWcgfVxuICB9XG5cbiAgYXN5bmMgZ2V0VGVuYW50KGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB7IGlkLCBuYW1lOiAnRGVtbyBUZW5hbnQnLCBzbHVnOiAnZGVtby10ZW5hbnQnIH1cbiAgfVxufVxuXG5jbGFzcyBMb2NhbERlcGxveW1lbnRNYW5hZ2VyIHtcbiAgYXN5bmMgZGVwbG95KGNvbmZpZzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4geyBpZDogJ2RlbW8tZGVwbG95bWVudCcsIHN0YXR1czogJ2RlcGxveWVkJywgdXJsOiAnaHR0cHM6Ly9kZW1vLWFwcC52ZXJjZWwuYXBwJyB9XG4gIH1cbn1cblxuLy8gVGVtcG9yYXJ5IHZhbGlkYXRpb24gZnVuY3Rpb24gdW50aWwgQG9wc2FpL3NoYXJlZCBpcyBidWlsdFxuZnVuY3Rpb24gdmFsaWRhdGVZYW1sQ29uZmlnU2FmZShjb25maWc6IGFueSk6IHsgc3VjY2VzczogYm9vbGVhbjsgZGF0YT86IGFueTsgZXJyb3JzPzogc3RyaW5nW10gfSB7XG4gIHRyeSB7XG4gICAgaWYgKCFjb25maWcudmVydGljYWwgfHwgIWNvbmZpZy5idXNpbmVzcyB8fCAhY29uZmlnLmRhdGFiYXNlKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3JzOiBbJ01pc3NpbmcgcmVxdWlyZWQgc2VjdGlvbnM6IHZlcnRpY2FsLCBidXNpbmVzcywgZGF0YWJhc2UnXSB9XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGNvbmZpZyB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yczogWydJbnZhbGlkIGNvbmZpZ3VyYXRpb24gZm9ybWF0J10gfVxuICB9XG59XG5cbi8vIEVuaGFuY2VkIGZpZWxkIHR5cGUgY29udmVyc2lvbiB3aXRoIGJ1c2luZXNzLXNwZWNpZmljIHR5cGVzXG5mdW5jdGlvbiBjb252ZXJ0RmllbGRUeXBlKHlhbWxUeXBlOiBzdHJpbmcsIGJ1c2luZXNzVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgYmFzZVR5cGVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgJ3N0cmluZyc6ICdTdHJpbmcnLFxuICAgICdudW1iZXInOiAnRmxvYXQnLFxuICAgICdpbnRlZ2VyJzogJ0ludCcsXG4gICAgJ2Jvb2xlYW4nOiAnQm9vbGVhbicsXG4gICAgJ2RhdGUnOiAnRGF0ZVRpbWUnLFxuICAgICdkYXRldGltZSc6ICdEYXRlVGltZScsXG4gICAgJ2pzb24nOiAnU3RyaW5nJywgLy8gU1FMaXRlIGNvbXBhdGlibGVcbiAgICAnZW51bSc6ICdTdHJpbmcnXG4gIH1cblxuICAvLyBCdXNpbmVzcy1zcGVjaWZpYyB0eXBlIG1hcHBpbmdzXG4gIGNvbnN0IGJ1c2luZXNzVHlwZU1hcDogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPSB7XG4gICAgJ2hlYWx0aGNhcmUnOiB7XG4gICAgICAnbWVkaWNhbF9kZXZpY2VfaWQnOiAnU3RyaW5nJyxcbiAgICAgICdjb21wbGlhbmNlX3N0YXR1cyc6ICdTdHJpbmcnLFxuICAgICAgJ2NlcnRpZmljYXRpb25fZGF0ZSc6ICdEYXRlVGltZScsXG4gICAgICAncmVndWxhdG9yeV9hcHByb3ZhbCc6ICdTdHJpbmcnLFxuICAgICAgJ3BhdGllbnRfZGF0YSc6ICdTdHJpbmcnLFxuICAgICAgJ21lZGljYWxfbGljZW5zZSc6ICdTdHJpbmcnXG4gICAgfSxcbiAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgJ3Byb2R1Y3Rfc2t1JzogJ1N0cmluZycsXG4gICAgICAnaW52ZW50b3J5X2NvdW50JzogJ0ludCcsXG4gICAgICAncHJpY2UnOiAnRmxvYXQnLFxuICAgICAgJ2NhdGVnb3J5JzogJ1N0cmluZycsXG4gICAgICAnc2hpcHBpbmdfd2VpZ2h0JzogJ0Zsb2F0JyxcbiAgICAgICdvcmRlcl9zdGF0dXMnOiAnU3RyaW5nJ1xuICAgIH0sXG4gICAgJ3JlYWxfZXN0YXRlJzoge1xuICAgICAgJ3Byb3BlcnR5X2lkJzogJ1N0cmluZycsXG4gICAgICAnc3F1YXJlX2ZlZXQnOiAnSW50JyxcbiAgICAgICdiZWRyb29tcyc6ICdJbnQnLFxuICAgICAgJ2JhdGhyb29tcyc6ICdJbnQnLFxuICAgICAgJ3ByaWNlJzogJ0Zsb2F0JyxcbiAgICAgICdwcm9wZXJ0eV90eXBlJzogJ1N0cmluZycsXG4gICAgICAnbGlzdGluZ19zdGF0dXMnOiAnU3RyaW5nJ1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGJ1c2luZXNzVHlwZXMgPSBidXNpbmVzc1R5cGVNYXBbYnVzaW5lc3NUeXBlLnRvTG93ZXJDYXNlKCldIHx8IHt9XG4gIHJldHVybiBidXNpbmVzc1R5cGVzW3lhbWxUeXBlLnRvTG93ZXJDYXNlKCldIHx8IGJhc2VUeXBlTWFwW3lhbWxUeXBlLnRvTG93ZXJDYXNlKCldIHx8ICdTdHJpbmcnXG59XG5cbi8vIEdlbmVyYXRlIGJ1c2luZXNzLXNwZWNpZmljIFVJIHBhZ2VzIGJhc2VkIG9uIFlBTUwgY29uZmlndXJhdGlvblxuZnVuY3Rpb24gZ2VuZXJhdGVDdXN0b21VSVBhZ2VzKGNvbmZpZzogYW55LCBidXNpbmVzc1R5cGU6IHN0cmluZyk6IGFueVtdIHtcbiAgY29uc3QgYmFzZVBhZ2VzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICdkYXNoYm9hcmQnLFxuICAgICAgcGF0aDogJy8nLFxuICAgICAgY29tcG9uZW50czogW1xuICAgICAgICB7IHR5cGU6ICdidXNpbmVzc19vdmVydmlldycsIGRhdGFTb3VyY2U6ICdhbmFseXRpY3MnIH0sXG4gICAgICAgIHsgdHlwZTogJ3JlY2VudF9hY3Rpdml0eScsIGRhdGFTb3VyY2U6ICdhY3Rpdml0eV9sb2cnIH1cbiAgICAgIF1cbiAgICB9XG4gIF1cblxuICAvLyBCdXNpbmVzcy1zcGVjaWZpYyBwYWdlIGdlbmVyYXRpb25cbiAgY29uc3QgYnVzaW5lc3NQYWdlczogUmVjb3JkPHN0cmluZywgYW55W10+ID0ge1xuICAgICdoZWFsdGhjYXJlJzogW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnY29tcGxpYW5jZScsXG4gICAgICAgIHBhdGg6ICcvY29tcGxpYW5jZScsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICdjb21wbGlhbmNlX2Rhc2hib2FyZCcsIGRhdGFTb3VyY2U6ICdjb21wbGlhbmNlX3JlY29yZHMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnY2VydGlmaWNhdGlvbl90cmFja2VyJywgZGF0YVNvdXJjZTogJ2NlcnRpZmljYXRpb25zJyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdtZWRpY2FsX2RldmljZXMnLFxuICAgICAgICBwYXRoOiAnL21lZGljYWwtZGV2aWNlcycsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICdkZXZpY2VfaW52ZW50b3J5JywgZGF0YVNvdXJjZTogJ21lZGljYWxfZGV2aWNlcycgfSxcbiAgICAgICAgICB7IHR5cGU6ICdyZWd1bGF0b3J5X3N0YXR1cycsIGRhdGFTb3VyY2U6ICdyZWd1bGF0b3J5X3JlY29yZHMnIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3RyYWluaW5nJyxcbiAgICAgICAgcGF0aDogJy90cmFpbmluZycsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICd0cmFpbmluZ19zZXNzaW9ucycsIGRhdGFTb3VyY2U6ICd0cmFpbmluZ19yZWNvcmRzJyB9LFxuICAgICAgICAgIHsgdHlwZTogJ2NlcnRpZmljYXRpb25fcHJvZ3Jlc3MnLCBkYXRhU291cmNlOiAnY2VydGlmaWNhdGlvbnMnIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIF0sXG4gICAgJ2Vjb21tZXJjZSc6IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3Byb2R1Y3RzJyxcbiAgICAgICAgcGF0aDogJy9wcm9kdWN0cycsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICdwcm9kdWN0X2NhdGFsb2cnLCBkYXRhU291cmNlOiAncHJvZHVjdHMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnaW52ZW50b3J5X21hbmFnZW1lbnQnLCBkYXRhU291cmNlOiAnaW52ZW50b3J5JyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdvcmRlcnMnLFxuICAgICAgICBwYXRoOiAnL29yZGVycycsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICdvcmRlcl9tYW5hZ2VtZW50JywgZGF0YVNvdXJjZTogJ29yZGVycycgfSxcbiAgICAgICAgICB7IHR5cGU6ICdmdWxmaWxsbWVudF90cmFja2VyJywgZGF0YVNvdXJjZTogJ2Z1bGZpbGxtZW50JyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdjdXN0b21lcnMnLFxuICAgICAgICBwYXRoOiAnL2N1c3RvbWVycycsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICdjdXN0b21lcl9tYW5hZ2VtZW50JywgZGF0YVNvdXJjZTogJ2N1c3RvbWVycycgfSxcbiAgICAgICAgICB7IHR5cGU6ICdsb3lhbHR5X3Byb2dyYW0nLCBkYXRhU291cmNlOiAnbG95YWx0eScgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICAncmVhbF9lc3RhdGUnOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdwcm9wZXJ0aWVzJyxcbiAgICAgICAgcGF0aDogJy9wcm9wZXJ0aWVzJyxcbiAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgIHsgdHlwZTogJ3Byb3BlcnR5X2xpc3RpbmdzJywgZGF0YVNvdXJjZTogJ3Byb3BlcnRpZXMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnbWFya2V0X2FuYWx5c2lzJywgZGF0YVNvdXJjZTogJ21hcmtldF9kYXRhJyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdjbGllbnRzJyxcbiAgICAgICAgcGF0aDogJy9jbGllbnRzJyxcbiAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgIHsgdHlwZTogJ2NsaWVudF9tYW5hZ2VtZW50JywgZGF0YVNvdXJjZTogJ2NsaWVudHMnIH0sXG4gICAgICAgICAgeyB0eXBlOiAnbGVhZF90cmFja2VyJywgZGF0YVNvdXJjZTogJ2xlYWRzJyB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICd0cmFuc2FjdGlvbnMnLFxuICAgICAgICBwYXRoOiAnL3RyYW5zYWN0aW9ucycsXG4gICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICB7IHR5cGU6ICd0cmFuc2FjdGlvbl9oaXN0b3J5JywgZGF0YVNvdXJjZTogJ3RyYW5zYWN0aW9ucycgfSxcbiAgICAgICAgICB7IHR5cGU6ICdjb21taXNzaW9uX3RyYWNrZXInLCBkYXRhU291cmNlOiAnY29tbWlzc2lvbnMnIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIF1cbiAgfVxuXG4gIC8vIEFkZCBjdXN0b20gcGFnZXMgYmFzZWQgb24gWUFNTCBtb2RlbHNcbiAgY29uc3QgY3VzdG9tUGFnZXMgPSAoY29uZmlnLmRhdGFiYXNlPy5tb2RlbHMgfHwgW10pLm1hcCgobW9kZWw6IGFueSkgPT4gKHtcbiAgICBuYW1lOiBtb2RlbC5uYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgcGF0aDogYC8ke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zYCxcbiAgICBjb21wb25lbnRzOiBbXG4gICAgICB7IHR5cGU6ICdkYXRhX21hbmFnZW1lbnQnLCBkYXRhU291cmNlOiBtb2RlbC5uYW1lLnRvTG93ZXJDYXNlKCksIGFjdGlvbnM6IFsnY3JlYXRlJywgJ2VkaXQnLCAnZGVsZXRlJywgJ3ZpZXcnXSB9XG4gICAgXVxuICB9KSlcblxuICByZXR1cm4gWy4uLmJhc2VQYWdlcywgLi4uKGJ1c2luZXNzUGFnZXNbYnVzaW5lc3NUeXBlLnRvTG93ZXJDYXNlKCldIHx8IFtdKSwgLi4uY3VzdG9tUGFnZXNdXG59XG5cbi8vIEdlbmVyYXRlIGJ1c2luZXNzLXNwZWNpZmljIG5hdmlnYXRpb25cbmZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tTmF2aWdhdGlvbihjb25maWc6IGFueSwgYnVzaW5lc3NUeXBlOiBzdHJpbmcpOiBhbnlbXSB7XG4gIGNvbnN0IGJhc2VOYXYgPSBbXG4gICAgeyBuYW1lOiAnRGFzaGJvYXJkJywgaHJlZjogJy8nLCBpY29uOiAnSG9tZScgfVxuICBdXG5cbiAgY29uc3QgYnVzaW5lc3NOYXY6IFJlY29yZDxzdHJpbmcsIGFueVtdPiA9IHtcbiAgICAnaGVhbHRoY2FyZSc6IFtcbiAgICAgIHsgbmFtZTogJ01lZGljYWwgRGV2aWNlcycsIGhyZWY6ICcvbWVkaWNhbC1kZXZpY2VzJywgaWNvbjogJ0FjdGl2aXR5JyB9LFxuICAgICAgeyBuYW1lOiAnQ29tcGxpYW5jZScsIGhyZWY6ICcvY29tcGxpYW5jZScsIGljb246ICdTaGllbGQnIH0sXG4gICAgICB7IG5hbWU6ICdUcmFpbmluZycsIGhyZWY6ICcvdHJhaW5pbmcnLCBpY29uOiAnR3JhZHVhdGlvbkNhcCcgfSxcbiAgICAgIHsgbmFtZTogJ0NlcnRpZmljYXRpb25zJywgaHJlZjogJy9jZXJ0aWZpY2F0aW9ucycsIGljb246ICdBd2FyZCcgfVxuICAgIF0sXG4gICAgJ2Vjb21tZXJjZSc6IFtcbiAgICAgIHsgbmFtZTogJ1Byb2R1Y3RzJywgaHJlZjogJy9wcm9kdWN0cycsIGljb246ICdQYWNrYWdlJyB9LFxuICAgICAgeyBuYW1lOiAnT3JkZXJzJywgaHJlZjogJy9vcmRlcnMnLCBpY29uOiAnU2hvcHBpbmdDYXJ0JyB9LFxuICAgICAgeyBuYW1lOiAnQ3VzdG9tZXJzJywgaHJlZjogJy9jdXN0b21lcnMnLCBpY29uOiAnVXNlcnMnIH0sXG4gICAgICB7IG5hbWU6ICdJbnZlbnRvcnknLCBocmVmOiAnL2ludmVudG9yeScsIGljb246ICdCb3gnIH1cbiAgICBdLFxuICAgICdyZWFsX2VzdGF0ZSc6IFtcbiAgICAgIHsgbmFtZTogJ1Byb3BlcnRpZXMnLCBocmVmOiAnL3Byb3BlcnRpZXMnLCBpY29uOiAnSG9tZScgfSxcbiAgICAgIHsgbmFtZTogJ0NsaWVudHMnLCBocmVmOiAnL2NsaWVudHMnLCBpY29uOiAnVXNlcnMnIH0sXG4gICAgICB7IG5hbWU6ICdUcmFuc2FjdGlvbnMnLCBocmVmOiAnL3RyYW5zYWN0aW9ucycsIGljb246ICdEb2xsYXJTaWduJyB9LFxuICAgICAgeyBuYW1lOiAnTGVhZHMnLCBocmVmOiAnL2xlYWRzJywgaWNvbjogJ1RhcmdldCcgfVxuICAgIF1cbiAgfVxuXG4gIC8vIEFkZCBjdXN0b20gbmF2aWdhdGlvbiBiYXNlZCBvbiBZQU1MIG1vZGVsc1xuICBjb25zdCBjdXN0b21OYXYgPSAoY29uZmlnLmRhdGFiYXNlPy5tb2RlbHMgfHwgW10pLm1hcCgobW9kZWw6IGFueSkgPT4gKHtcbiAgICBuYW1lOiBtb2RlbC5uYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbW9kZWwubmFtZS5zbGljZSgxKSArICdzJyxcbiAgICBocmVmOiBgLyR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfXNgLFxuICAgIGljb246ICdEYXRhYmFzZSdcbiAgfSkpXG5cbiAgcmV0dXJuIFsuLi5iYXNlTmF2LCAuLi4oYnVzaW5lc3NOYXZbYnVzaW5lc3NUeXBlLnRvTG93ZXJDYXNlKCldIHx8IFtdKSwgLi4uY3VzdG9tTmF2XVxufVxuXG5pbnRlcmZhY2UgWWFtbENvbmZpZyB7XG4gIHZlcnRpY2FsOiB7XG4gICAgbmFtZTogc3RyaW5nXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1xuICAgIGluZHVzdHJ5OiBzdHJpbmdcbiAgfVxuICBidXNpbmVzczoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIHR5cGU6IHN0cmluZ1xuICB9XG4gIGRhdGFiYXNlOiB7XG4gICAgbW9kZWxzOiBBcnJheTx7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIGZpZWxkczogQXJyYXk8e1xuICAgICAgICBuYW1lOiBzdHJpbmdcbiAgICAgICAgdHlwZTogc3RyaW5nXG4gICAgICAgIHJlcXVpcmVkOiBib29sZWFuXG4gICAgICAgIHVuaXF1ZT86IGJvb2xlYW5cbiAgICAgIH0+XG4gICAgfT5cbiAgfVxuICBhcGlzOiB7XG4gICAgaW50ZWdyYXRpb25zOiBBcnJheTx7XG4gICAgICBuYW1lOiBzdHJpbmdcbiAgICAgIGVuYWJsZWQ6IGJvb2xlYW5cbiAgICB9PlxuICB9XG4gIHdvcmtmbG93czogQXJyYXk8e1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgfT5cbiAgdWk6IHtcbiAgICBwYWdlczogQXJyYXk8e1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICBwYXRoOiBzdHJpbmdcbiAgICAgIGNvbXBvbmVudHM6IEFycmF5PHtcbiAgICAgICAgdHlwZTogc3RyaW5nXG4gICAgICAgIGRhdGFTb3VyY2U6IHN0cmluZ1xuICAgICAgICBhY3Rpb25zPzogc3RyaW5nW11cbiAgICAgICAgbW9kZT86IHN0cmluZ1xuICAgICAgfT5cbiAgICB9PlxuICB9XG59XG5cbi8vIEdlbmVyYXRlIGEgdHJ1bHkgY3VzdG9tIE5leHQuanMgYXBwbGljYXRpb24gYmFzZWQgb24gWUFNTFxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDdXN0b21OZXh0SlNBcHAoY29uZmlnOiBZYW1sQ29uZmlnLCBhcHBOYW1lOiBzdHJpbmcsIG91dHB1dERpcjogc3RyaW5nKSB7XG4gIGNvbnNvbGUubG9nKCfwn5qAIEdlbmVyYXRpbmcgY3VzdG9tIGFwcGxpY2F0aW9uIGJhc2VkIG9uIFlBTUwgY29uZmlndXJhdGlvbi4uLicpXG4gIFxuICAvLyBDcmVhdGUgYXBwIHN0cnVjdHVyZVxuICBjb25zdCBhcHBEaXIgPSBwYXRoLmpvaW4ob3V0cHV0RGlyLCAnYXBwJylcbiAgY29uc3QgY29tcG9uZW50c0RpciA9IHBhdGguam9pbihvdXRwdXREaXIsICdjb21wb25lbnRzJylcbiAgY29uc3QgbGliRGlyID0gcGF0aC5qb2luKG91dHB1dERpciwgJ2xpYicpXG4gIGNvbnN0IHByaXNtYURpciA9IHBhdGguam9pbihvdXRwdXREaXIsICdwcmlzbWEnKVxuICBjb25zdCBhcGlEaXIgPSBwYXRoLmpvaW4oYXBwRGlyLCAnYXBpJylcblxuICBhd2FpdCBmcy5ta2RpcihhcHBEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIGF3YWl0IGZzLm1rZGlyKGNvbXBvbmVudHNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIGF3YWl0IGZzLm1rZGlyKGxpYkRpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgYXdhaXQgZnMubWtkaXIocHJpc21hRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICBhd2FpdCBmcy5ta2RpcihhcGlEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG5cbiAgLy8gR2VuZXJhdGUgY3VzdG9tIFByaXNtYSBzY2hlbWEgYmFzZWQgb24gWUFNTCBtb2RlbHNcbiAgYXdhaXQgZ2VuZXJhdGVDdXN0b21QcmlzbWFTY2hlbWEoY29uZmlnLCBwcmlzbWFEaXIpXG4gIFxuICAvLyBHZW5lcmF0ZSBjdXN0b20gYXBwIGxheW91dFxuICBhd2FpdCBnZW5lcmF0ZUN1c3RvbUFwcExheW91dChjb25maWcsIGFwcERpcilcbiAgXG4gIC8vIEdlbmVyYXRlIGN1c3RvbSBtYWluIHBhZ2VcbiAgYXdhaXQgZ2VuZXJhdGVDdXN0b21NYWluUGFnZShjb25maWcsIGFwcERpcilcbiAgXG4gIC8vIEdlbmVyYXRlIGN1c3RvbSBkYXNoYm9hcmQgY29tcG9uZW50c1xuICBhd2FpdCBnZW5lcmF0ZUN1c3RvbURhc2hib2FyZENvbXBvbmVudHMoY29uZmlnLCBjb21wb25lbnRzRGlyKVxuICBcbiAgLy8gR2VuZXJhdGUgY3VzdG9tIEFQSSByb3V0ZXNcbiAgYXdhaXQgZ2VuZXJhdGVDdXN0b21BUElSb3V0ZXMoY29uZmlnLCBhcGlEaXIpXG4gIFxuICAvLyBHZW5lcmF0ZSBjdXN0b20gZGF0YSBwYWdlc1xuICBhd2FpdCBnZW5lcmF0ZUN1c3RvbURhdGFQYWdlcyhjb25maWcsIGFwcERpcilcbiAgXG4gIC8vIEdlbmVyYXRlIGN1c3RvbSB1dGlsaXR5IGZpbGVzXG4gIGF3YWl0IGdlbmVyYXRlQ3VzdG9tVXRpbGl0eUZpbGVzKGNvbmZpZywgbGliRGlyKVxuICBcbiAgLy8gR2VuZXJhdGUgYXV0aGVudGljYXRpb24gc3lzdGVtXG4gIGF3YWl0IGdlbmVyYXRlQXV0aGVudGljYXRpb25TeXN0ZW0oY29uZmlnLCBvdXRwdXREaXIpXG4gIFxuICAvLyBHZW5lcmF0ZSBpbnRlZ3JhdGlvbiBjb25maWd1cmF0aW9uc1xuICBhd2FpdCBnZW5lcmF0ZUludGVncmF0aW9uQ29uZmlnKGNvbmZpZywgb3V0cHV0RGlyKVxuICBcbiAgLy8gR2VuZXJhdGUgcGFja2FnZS5qc29uIHdpdGggYnVzaW5lc3Mtc3BlY2lmaWMgZGVwZW5kZW5jaWVzXG4gIGF3YWl0IGdlbmVyYXRlQ3VzdG9tUGFja2FnZUpzb24oY29uZmlnLCBvdXRwdXREaXIpXG4gIFxuICAvLyBHZW5lcmF0ZSBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uXG4gIGF3YWl0IGdlbmVyYXRlRW52aXJvbm1lbnRDb25maWcoY29uZmlnLCBvdXRwdXREaXIpXG4gIFxuICAvLyBHZW5lcmF0ZSBkZXBsb3ltZW50IGNvbmZpZ3VyYXRpb25cbiAgYXdhaXQgZ2VuZXJhdGVEZXBsb3ltZW50Q29uZmlnKGNvbmZpZywgb3V0cHV0RGlyKVxuICBcbiAgLy8gR2VuZXJhdGUgY3VzdG9tIFJFQURNRVxuICBhd2FpdCBnZW5lcmF0ZUN1c3RvbVJFQURNRShjb25maWcsIG91dHB1dERpcilcbiAgXG4gIGNvbnNvbGUubG9nKCfinIUgQ3VzdG9tIGFwcGxpY2F0aW9uIGdlbmVyYXRpb24gY29tcGxldGVkIScpXG59XG5cbi8vIEdlbmVyYXRlIGN1c3RvbSBQcmlzbWEgc2NoZW1hIGJhc2VkIG9uIFlBTUwgbW9kZWxzXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUN1c3RvbVByaXNtYVNjaGVtYShjb25maWc6IFlhbWxDb25maWcsIHByaXNtYURpcjogc3RyaW5nKSB7XG4gIGNvbnN0IGJ1c2luZXNzVHlwZSA9IGNvbmZpZy52ZXJ0aWNhbC5pbmR1c3RyeS50b0xvd2VyQ2FzZSgpXG4gIFxuICBsZXQgc2NoZW1hQ29udGVudCA9IGAvLyBUaGlzIGlzIHlvdXIgUHJpc21hIHNjaGVtYSBmaWxlXG4vLyBsZWFybiBtb3JlIGFib3V0IGl0IGluIHRoZSBkb2NzOiBodHRwczovL3ByaXMubHkvZC9wcmlzbWEtc2NoZW1hXG5cbmdlbmVyYXRvciBjbGllbnQge1xuICBwcm92aWRlciA9IFwicHJpc21hLWNsaWVudC1qc1wiXG59XG5cbmRhdGFzb3VyY2UgZGIge1xuICBwcm92aWRlciA9IFwic3FsaXRlXCJcbiAgdXJsICAgICAgPSBcImZpbGU6Li9kZXYuZGJcIlxufVxuXG5gXG5cbiAgLy8gQWRkIHRlbmFudCBhbmQgdXNlciBtb2RlbHMgZmlyc3RcbiAgc2NoZW1hQ29udGVudCArPSBgbW9kZWwgVGVuYW50IHtcbiAgaWQgU3RyaW5nIEBpZCBAZGVmYXVsdChjdWlkKCkpXG4gIG5hbWUgU3RyaW5nXG4gIHNsdWcgU3RyaW5nIEB1bmlxdWVcbiAgc3RhdHVzIFN0cmluZyBAZGVmYXVsdChcImFjdGl2ZVwiKVxuICBzZXR0aW5ncyBKc29uP1xuICBjcmVhdGVkQXQgRGF0ZVRpbWUgQGRlZmF1bHQobm93KCkpXG4gIHVwZGF0ZWRBdCBEYXRlVGltZSBAdXBkYXRlZEF0XG4gIFxuICAvLyBSZWxhdGlvbnNcbiAgdXNlcnMgVXNlcltdXG4gICR7Y29uZmlnLmRhdGFiYXNlLm1vZGVscy5tYXAobW9kZWwgPT4gYCR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfXMgJHttb2RlbC5uYW1lfVtdYCkuam9pbignXFxuICAnKX1cbn1cblxubW9kZWwgVXNlciB7XG4gIGlkIFN0cmluZyBAaWQgQGRlZmF1bHQoY3VpZCgpKSBcbiAgZW1haWwgU3RyaW5nIEB1bmlxdWVcbiAgZmlyc3ROYW1lIFN0cmluZ1xuICBsYXN0TmFtZSBTdHJpbmdcbiAgcm9sZSBTdHJpbmcgQGRlZmF1bHQoXCJ1c2VyXCIpXG4gIHN0YXR1cyBTdHJpbmcgQGRlZmF1bHQoXCJhY3RpdmVcIilcbiAgdGVuYW50SWQgU3RyaW5nXG4gIGNyZWF0ZWRBdCBEYXRlVGltZSBAZGVmYXVsdChub3coKSlcbiAgdXBkYXRlZEF0IERhdGVUaW1lIEB1cGRhdGVkQXRcbiAgbGFzdExvZ2luQXQgRGF0ZVRpbWU/XG4gIFxuICAvLyBSZWxhdGlvbnNcbiAgdGVuYW50IFRlbmFudCBAcmVsYXRpb24oZmllbGRzOiBbdGVuYW50SWRdLCByZWZlcmVuY2VzOiBbaWRdLCBvbkRlbGV0ZTogQ2FzY2FkZSlcbiAgXG4gIEBAaW5kZXgoW3RlbmFudElkXSlcbn1cblxuLy8gR2VuZXJhdGUgbW9kZWxzIGJhc2VkIG9uIFlBTUwgY29uZmlndXJhdGlvbiB3aXRoIHRlbmFudCBpc29sYXRpb25cbmBcbiAgY29uZmlnLmRhdGFiYXNlLm1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcbiAgICBzY2hlbWFDb250ZW50ICs9IGBtb2RlbCAke21vZGVsLm5hbWV9IHtcbiAgaWQgU3RyaW5nIEB1bmlxdWUgQGlkIEBkZWZhdWx0KGN1aWQoKSlcbiAgdGVuYW50SWQgU3RyaW5nXG4gIGNyZWF0ZWRBdCBEYXRlVGltZSBAZGVmYXVsdChub3coKSlcbiAgdXBkYXRlZEF0IERhdGVUaW1lIEB1cGRhdGVkQXRcbmBcbiAgICBcbiAgICAvLyBBZGQgY3VzdG9tIGZpZWxkcyBmcm9tIFlBTUxcbiAgICBtb2RlbC5maWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICBpZiAoZmllbGQubmFtZSAhPT0gJ2lkJyAmJiBmaWVsZC5uYW1lICE9PSAnY3JlYXRlZEF0JyAmJiBmaWVsZC5uYW1lICE9PSAndXBkYXRlZEF0JyAmJiBmaWVsZC5uYW1lICE9PSAndGVuYW50SWQnKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IGNvbnZlcnRGaWVsZFR5cGUoZmllbGQudHlwZSwgYnVzaW5lc3NUeXBlKVxuICAgICAgICBjb25zdCB1bmlxdWVDb25zdHJhaW50ID0gZmllbGQudW5pcXVlID8gJyBAdW5pcXVlJyA6ICcnXG4gICAgICAgIHNjaGVtYUNvbnRlbnQgKz0gYCAgJHtmaWVsZC5uYW1lfSAke2ZpZWxkVHlwZX0ke3VuaXF1ZUNvbnN0cmFpbnR9XFxuYFxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgLy8gQWRkIHRlbmFudCByZWxhdGlvblxuICAgIHNjaGVtYUNvbnRlbnQgKz0gYCAgXG4gIC8vIFJlbGF0aW9uc1xuICB0ZW5hbnQgVGVuYW50IEByZWxhdGlvbihmaWVsZHM6IFt0ZW5hbnRJZF0sIHJlZmVyZW5jZXM6IFtpZF0sIG9uRGVsZXRlOiBDYXNjYWRlKVxuICBcbiAgQEBpbmRleChbdGVuYW50SWRdKVxufVxcblxcbmBcbiAgfSlcblxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKHByaXNtYURpciwgJ3NjaGVtYS5wcmlzbWEnKSwgc2NoZW1hQ29udGVudClcbiAgY29uc29sZS5sb2coJ/Cfk4ogQ3VzdG9tIFByaXNtYSBzY2hlbWEgZ2VuZXJhdGVkJylcbn1cblxuLy8gR2VuZXJhdGUgY3VzdG9tIGFwcCBsYXlvdXRcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tQXBwTGF5b3V0KGNvbmZpZzogWWFtbENvbmZpZywgYXBwRGlyOiBzdHJpbmcpIHtcbiAgY29uc3QgbmF2aWdhdGlvbiA9IGdlbmVyYXRlQ3VzdG9tTmF2aWdhdGlvbihjb25maWcsIGNvbmZpZy52ZXJ0aWNhbC5pbmR1c3RyeSlcbiAgXG4gIGNvbnN0IGxheW91dENvbnRlbnQgPSBgaW1wb3J0ICcuL2dsb2JhbHMuY3NzJ1xuaW1wb3J0IHsgSW50ZXIgfSBmcm9tICduZXh0L2ZvbnQvZ29vZ2xlJ1xuaW1wb3J0IFNpZGViYXIgZnJvbSAnQC9jb21wb25lbnRzL1NpZGViYXInXG5cbmNvbnN0IGludGVyID0gSW50ZXIoeyBzdWJzZXRzOiBbJ2xhdGluJ10gfSlcblxuZXhwb3J0IGNvbnN0IG1ldGFkYXRhID0ge1xuICB0aXRsZTogJyR7Y29uZmlnLmJ1c2luZXNzLm5hbWV9IC0gTWFuYWdlbWVudCBEYXNoYm9hcmQnLFxuICBkZXNjcmlwdGlvbjogJyR7Y29uZmlnLnZlcnRpY2FsLmRlc2NyaXB0aW9ufScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb3RMYXlvdXQoe1xuICBjaGlsZHJlbixcbn06IHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVxufSkge1xuICByZXR1cm4gKFxuICAgIDxodG1sIGxhbmc9XCJlblwiPlxuICAgICAgPGJvZHkgY2xhc3NOYW1lPXtpbnRlci5jbGFzc05hbWV9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC1zY3JlZW4gYmctZ3JheS0xMDBcIj5cbiAgICAgICAgICA8U2lkZWJhciAvPlxuICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgPC9tYWluPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvYm9keT5cbiAgICA8L2h0bWw+XG4gIClcbn1gXG5cbiAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihhcHBEaXIsICdsYXlvdXQudHN4JyksIGxheW91dENvbnRlbnQpXG4gIGNvbnNvbGUubG9nKCfwn46oIEN1c3RvbSBhcHAgbGF5b3V0IGdlbmVyYXRlZCcpXG59XG5cbi8vIEdlbmVyYXRlIGN1c3RvbSBtYWluIHBhZ2VcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tTWFpblBhZ2UoY29uZmlnOiBZYW1sQ29uZmlnLCBhcHBEaXI6IHN0cmluZykge1xuICBjb25zdCBidXNpbmVzc1R5cGUgPSBjb25maWcudmVydGljYWwuaW5kdXN0cnkudG9Mb3dlckNhc2UoKVxuICBcbiAgbGV0IGRhc2hib2FyZENvbnRlbnQgPSBgaW1wb3J0IHsgU3VzcGVuc2UgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBTdGF0c092ZXJ2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9TdGF0c092ZXJ2aWV3J1xuaW1wb3J0IFJlY2VudEFjdGl2aXR5IGZyb20gJ0AvY29tcG9uZW50cy9SZWNlbnRBY3Rpdml0eSdcbmltcG9ydCBDaGFydFdpZGdldCBmcm9tICdAL2NvbXBvbmVudHMvQ2hhcnRXaWRnZXQnXG5gXG5cbiAgLy8gQWRkIGJ1c2luZXNzLXNwZWNpZmljIGltcG9ydHNcbiAgaWYgKGJ1c2luZXNzVHlwZSA9PT0gJ2hlYWx0aGNhcmUnKSB7XG4gICAgZGFzaGJvYXJkQ29udGVudCArPSBgaW1wb3J0IENvbXBsaWFuY2VPdmVydmlldyBmcm9tICdAL2NvbXBvbmVudHMvQ29tcGxpYW5jZU92ZXJ2aWV3J1xuaW1wb3J0IE1lZGljYWxEZXZpY2VTdGF0dXMgZnJvbSAnQC9jb21wb25lbnRzL01lZGljYWxEZXZpY2VTdGF0dXMnXG5gXG4gIH0gZWxzZSBpZiAoYnVzaW5lc3NUeXBlID09PSAnZWNvbW1lcmNlJykge1xuICAgIGRhc2hib2FyZENvbnRlbnQgKz0gYGltcG9ydCBTYWxlc092ZXJ2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9TYWxlc092ZXJ2aWV3J1xuaW1wb3J0IEludmVudG9yeVN0YXR1cyBmcm9tICdAL2NvbXBvbmVudHMvSW52ZW50b3J5U3RhdHVzJ1xuYFxuICB9IGVsc2UgaWYgKGJ1c2luZXNzVHlwZSA9PT0gJ3JlYWxfZXN0YXRlJykge1xuICAgIGRhc2hib2FyZENvbnRlbnQgKz0gYGltcG9ydCBQcm9wZXJ0eU92ZXJ2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9Qcm9wZXJ0eU92ZXJ2aWV3J1xuaW1wb3J0IFRyYW5zYWN0aW9uU3RhdHVzIGZyb20gJ0AvY29tcG9uZW50cy9UcmFuc2FjdGlvblN0YXR1cydcbmBcbiAgfVxuXG4gIGRhc2hib2FyZENvbnRlbnQgKz0gYFxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGFzaGJvYXJkKCkge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicC04XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwXCI+JHtjb25maWcuYnVzaW5lc3MubmFtZX0gRGFzaGJvYXJkPC9oMT5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMCBtdC0yXCI+JHtjb25maWcudmVydGljYWwuZGVzY3JpcHRpb259PC9wPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5Mb2FkaW5nLi4uPC9kaXY+fT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIGdhcC02IG1iLThcIj5cbiAgICAgICAgICA8U3RhdHNPdmVydmlldyAvPlxuYFxuXG4gIC8vIEFkZCBidXNpbmVzcy1zcGVjaWZpYyBjb21wb25lbnRzXG4gIGlmIChidXNpbmVzc1R5cGUgPT09ICdoZWFsdGhjYXJlJykge1xuICAgIGRhc2hib2FyZENvbnRlbnQgKz0gYCAgICAgICAgICA8Q29tcGxpYW5jZU92ZXJ2aWV3IC8+XG4gICAgICAgICAgPE1lZGljYWxEZXZpY2VTdGF0dXMgLz5cbmBcbiAgfSBlbHNlIGlmIChidXNpbmVzc1R5cGUgPT09ICdlY29tbWVyY2UnKSB7XG4gICAgZGFzaGJvYXJkQ29udGVudCArPSBgICAgICAgICAgIDxTYWxlc092ZXJ2aWV3IC8+XG4gICAgICAgICAgPEludmVudG9yeVN0YXR1cyAvPlxuYFxuICB9IGVsc2UgaWYgKGJ1c2luZXNzVHlwZSA9PT0gJ3JlYWxfZXN0YXRlJykge1xuICAgIGRhc2hib2FyZENvbnRlbnQgKz0gYCAgICAgICAgICA8UHJvcGVydHlPdmVydmlldyAvPlxuICAgICAgICAgIDxUcmFuc2FjdGlvblN0YXR1cyAvPlxuYFxuICB9XG5cbiAgZGFzaGJvYXJkQ29udGVudCArPSBgICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbGc6Z3JpZC1jb2xzLTIgZ2FwLTZcIj5cbiAgICAgICAgICA8Q2hhcnRXaWRnZXQgLz5cbiAgICAgICAgICA8UmVjZW50QWN0aXZpdHkgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1N1c3BlbnNlPlxuICAgIDwvZGl2PlxuICApXG59YFxuXG4gIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4oYXBwRGlyLCAncGFnZS50c3gnKSwgZGFzaGJvYXJkQ29udGVudClcbiAgY29uc29sZS5sb2coJ/Cfk4QgQ3VzdG9tIG1haW4gcGFnZSBnZW5lcmF0ZWQnKVxufVxuXG4vLyBHZW5lcmF0ZSBjdXN0b20gZGFzaGJvYXJkIGNvbXBvbmVudHNcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tRGFzaGJvYXJkQ29tcG9uZW50cyhjb25maWc6IFlhbWxDb25maWcsIGNvbXBvbmVudHNEaXI6IHN0cmluZykge1xuICBjb25zdCBidXNpbmVzc1R5cGUgPSBjb25maWcudmVydGljYWwuaW5kdXN0cnkudG9Mb3dlckNhc2UoKVxuICBjb25zdCBuYXZpZ2F0aW9uID0gZ2VuZXJhdGVDdXN0b21OYXZpZ2F0aW9uKGNvbmZpZywgYnVzaW5lc3NUeXBlKVxuICBcbiAgLy8gR2VuZXJhdGUgY3VzdG9tIHNpZGViYXJcbiAgY29uc3Qgc2lkZWJhckNvbnRlbnQgPSBgJ3VzZSBjbGllbnQnXG5cbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluaydcbmltcG9ydCB7IHVzZVBhdGhuYW1lIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuaW1wb3J0IHsgJHtuYXZpZ2F0aW9uLm1hcChuYXYgPT4gbmF2Lmljb24pLmpvaW4oJywgJyl9IH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuXG5jb25zdCBuYXZpZ2F0aW9uID0gW1xuJHtuYXZpZ2F0aW9uLm1hcChuYXYgPT4gYCAgeyBuYW1lOiAnJHtuYXYubmFtZX0nLCBocmVmOiAnJHtuYXYuaHJlZn0nLCBpY29uOiAke25hdi5pY29ufSB9YCkuam9pbignLFxcbicpfVxuXVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaWRlYmFyKCkge1xuICBjb25zdCBwYXRobmFtZSA9IHVzZVBhdGhuYW1lKClcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLWZ1bGwgdy02NCBmbGV4LWNvbCBiZy1ncmF5LTkwMFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtMTYgc2hyaW5rLTAgaXRlbXMtY2VudGVyIHB4LTZcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtd2hpdGVcIj4ke2NvbmZpZy5idXNpbmVzcy5uYW1lfTwvaDE+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxuYXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LTEgZmxleC1jb2wgcHgtNiBwYi00XCI+XG4gICAgICAgIDx1bCByb2xlPVwibGlzdFwiIGNsYXNzTmFtZT1cImZsZXggZmxleC0xIGZsZXgtY29sIGdhcC15LTdcIj5cbiAgICAgICAgICA8bGk+XG4gICAgICAgICAgICA8dWwgcm9sZT1cImxpc3RcIiBjbGFzc05hbWU9XCItbXgtMiBzcGFjZS15LTFcIj5cbiAgICAgICAgICAgICAge25hdmlnYXRpb24ubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBwYXRobmFtZSA9PT0gaXRlbS5ocmVmXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxsaSBrZXk9e2l0ZW0ubmFtZX0+XG4gICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgaHJlZj17aXRlbS5ocmVmfVxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XFxgZ3JvdXAgZmxleCBnYXAteC0zIHJvdW5kZWQtbWQgcC0yIHRleHQtc20gbGVhZGluZy02IGZvbnQtc2VtaWJvbGQgXFwke1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNBY3RpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnYmctZ3JheS04MDAgdGV4dC13aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAndGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlIGhvdmVyOmJnLWdyYXktODAwJ1xuICAgICAgICAgICAgICAgICAgICAgIH1cXGB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8aXRlbS5pY29uIGNsYXNzTmFtZT1cImgtNiB3LTYgc2hyaW5rLTBcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvbmF2PlxuICAgIDwvZGl2PlxuICApXG59YFxuXG4gIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4oY29tcG9uZW50c0RpciwgJ1NpZGViYXIudHN4JyksIHNpZGViYXJDb250ZW50KVxuXG4gIC8vIEdlbmVyYXRlIGJ1c2luZXNzLXNwZWNpZmljIGNvbXBvbmVudHNcbiAgaWYgKGJ1c2luZXNzVHlwZSA9PT0gJ2hlYWx0aGNhcmUnKSB7XG4gICAgYXdhaXQgZ2VuZXJhdGVIZWFsdGhjYXJlQ29tcG9uZW50cyhjb21wb25lbnRzRGlyKVxuICB9IGVsc2UgaWYgKGJ1c2luZXNzVHlwZSA9PT0gJ2Vjb21tZXJjZScpIHtcbiAgICBhd2FpdCBnZW5lcmF0ZUVjb21tZXJjZUNvbXBvbmVudHMoY29tcG9uZW50c0RpcilcbiAgfSBlbHNlIGlmIChidXNpbmVzc1R5cGUgPT09ICdyZWFsX2VzdGF0ZScpIHtcbiAgICBhd2FpdCBnZW5lcmF0ZVJlYWxFc3RhdGVDb21wb25lbnRzKGNvbXBvbmVudHNEaXIpXG4gIH1cblxuICAvLyBHZW5lcmF0ZSBnZW5lcmljIGNvbXBvbmVudHNcbiAgYXdhaXQgZ2VuZXJhdGVHZW5lcmljQ29tcG9uZW50cyhjb21wb25lbnRzRGlyKVxuICBcbiAgY29uc29sZS5sb2coJ/Cfp6kgQ3VzdG9tIGRhc2hib2FyZCBjb21wb25lbnRzIGdlbmVyYXRlZCcpXG59XG5cbi8vIEdlbmVyYXRlIGhlYWx0aGNhcmUtc3BlY2lmaWMgY29tcG9uZW50c1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVIZWFsdGhjYXJlQ29tcG9uZW50cyhjb21wb25lbnRzRGlyOiBzdHJpbmcpIHtcbiAgY29uc3QgY29tcGxpYW5jZU92ZXJ2aWV3ID0gYCd1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBTaGllbGQsIEFsZXJ0VHJpYW5nbGUsIENoZWNrQ2lyY2xlIH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21wbGlhbmNlT3ZlcnZpZXcoKSB7XG4gIGNvbnN0IFtjb21wbGlhbmNlRGF0YSwgc2V0Q29tcGxpYW5jZURhdGFdID0gdXNlU3RhdGUoe1xuICAgIHRvdGFsRGV2aWNlczogMCxcbiAgICBjb21wbGlhbnREZXZpY2VzOiAwLFxuICAgIHBlbmRpbmdDZXJ0aWZpY2F0aW9uczogMCxcbiAgICBleHBpcmVkQ2VydGlmaWNhdGlvbnM6IDBcbiAgfSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgb3ZlcmZsb3ctaGlkZGVuIHNoYWRvdyByb3VuZGVkLWxnXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wXCI+XG4gICAgICAgICAgICA8U2hpZWxkIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC01IHctMCBmbGV4LTFcIj5cbiAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgPGR0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB0cnVuY2F0ZVwiPlxuICAgICAgICAgICAgICAgIENvbXBsaWFuY2UgU3RhdHVzXG4gICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgIDxkZCBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgICB7Y29tcGxpYW5jZURhdGEuY29tcGxpYW50RGV2aWNlc30ve2NvbXBsaWFuY2VEYXRhLnRvdGFsRGV2aWNlc30gRGV2aWNlc1xuICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBweC01IHB5LTNcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwIGZvbnQtbWVkaXVtXCI+e2NvbXBsaWFuY2VEYXRhLmV4cGlyZWRDZXJ0aWZpY2F0aW9uc30gRXhwaXJlZDwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteC0yXCI+4oCiPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteWVsbG93LTYwMCBmb250LW1lZGl1bVwiPntjb21wbGlhbmNlRGF0YS5wZW5kaW5nQ2VydGlmaWNhdGlvbnN9IFBlbmRpbmc8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1gXG5cbiAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihjb21wb25lbnRzRGlyLCAnQ29tcGxpYW5jZU92ZXJ2aWV3LnRzeCcpLCBjb21wbGlhbmNlT3ZlcnZpZXcpXG59XG5cbi8vIEdlbmVyYXRlIGVjb21tZXJjZS1zcGVjaWZpYyBjb21wb25lbnRzXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUVjb21tZXJjZUNvbXBvbmVudHMoY29tcG9uZW50c0Rpcjogc3RyaW5nKSB7XG4gIGNvbnN0IHNhbGVzT3ZlcnZpZXcgPSBgJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IERvbGxhclNpZ24sIFRyZW5kaW5nVXAsIFNob3BwaW5nQ2FydCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gU2FsZXNPdmVydmlldygpIHtcbiAgY29uc3QgW3NhbGVzRGF0YSwgc2V0U2FsZXNEYXRhXSA9IHVzZVN0YXRlKHtcbiAgICB0b3RhbFJldmVudWU6IDAsXG4gICAgdG90YWxPcmRlcnM6IDAsXG4gICAgYXZlcmFnZU9yZGVyVmFsdWU6IDAsXG4gICAgY29udmVyc2lvblJhdGU6IDBcbiAgfSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgb3ZlcmZsb3ctaGlkZGVuIHNoYWRvdyByb3VuZGVkLWxnXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wXCI+XG4gICAgICAgICAgICA8RG9sbGFyU2lnbiBjbGFzc05hbWU9XCJoLTYgdy02IHRleHQtZ3JheS00MDBcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtNSB3LTAgZmxleC0xXCI+XG4gICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgIDxkdCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgICAgICBUb3RhbCBSZXZlbnVlXG4gICAgICAgICAgICAgIDwvZHQ+XG4gICAgICAgICAgICAgIDxkZCBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgICAkMFxuICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBweC01IHB5LTNcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmVlbi02MDAgZm9udC1tZWRpdW1cIj4wIE9yZGVyczwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteC0yXCI+4oCiPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW1cIj4kMCBBdmcgT3JkZXI8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1gXG5cbiAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihjb21wb25lbnRzRGlyLCAnU2FsZXNPdmVydmlldy50c3gnKSwgc2FsZXNPdmVydmlldylcbn1cblxuLy8gR2VuZXJhdGUgcmVhbCBlc3RhdGUtc3BlY2lmaWMgY29tcG9uZW50c1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVSZWFsRXN0YXRlQ29tcG9uZW50cyhjb21wb25lbnRzRGlyOiBzdHJpbmcpIHtcbiAgY29uc3QgcHJvcGVydHlPdmVydmlldyA9IGAndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgSG9tZSwgTWFwUGluLCBEb2xsYXJTaWduIH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9wZXJ0eU92ZXJ2aWV3KCkge1xuICBjb25zdCBbcHJvcGVydHlEYXRhLCBzZXRQcm9wZXJ0eURhdGFdID0gdXNlU3RhdGUoe1xuICAgIHRvdGFsUHJvcGVydGllczogMCxcbiAgICBhY3RpdmVMaXN0aW5nczogMCxcbiAgICB0b3RhbFZhbHVlOiAwLFxuICAgIGF2ZXJhZ2VQcmljZTogMFxuICB9KVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBvdmVyZmxvdy1oaWRkZW4gc2hhZG93IHJvdW5kZWQtbGdcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC01XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtc2hyaW5rLTBcIj5cbiAgICAgICAgICAgIDxIb21lIGNsYXNzTmFtZT1cImgtNiB3LTYgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtbC01IHctMCBmbGV4LTFcIj5cbiAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgPGR0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTUwMCB0cnVuY2F0ZVwiPlxuICAgICAgICAgICAgICAgIEFjdGl2ZSBMaXN0aW5nc1xuICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICA8ZGQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAge3Byb3BlcnR5RGF0YS5hY3RpdmVMaXN0aW5nc30gUHJvcGVydGllc1xuICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBweC01IHB5LTNcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmVlbi02MDAgZm9udC1tZWRpdW1cIj4kMCBUb3RhbCBWYWx1ZTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteC0yXCI+4oCiPC9zcGFuPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDAgZm9udC1tZWRpdW1cIj4kMCBBdmcgUHJpY2U8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1gXG5cbiAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihjb21wb25lbnRzRGlyLCAnUHJvcGVydHlPdmVydmlldy50c3gnKSwgcHJvcGVydHlPdmVydmlldylcbn1cblxuLy8gR2VuZXJhdGUgZ2VuZXJpYyBjb21wb25lbnRzXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUdlbmVyaWNDb21wb25lbnRzKGNvbXBvbmVudHNEaXI6IHN0cmluZykge1xuICBjb25zdCBzdGF0c092ZXJ2aWV3ID0gYCd1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBUcmVuZGluZ1VwLCBVc2VycywgQWN0aXZpdHksIERvbGxhclNpZ24gfSBmcm9tICdsdWNpZGUtcmVhY3QnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN0YXRzT3ZlcnZpZXcoKSB7XG4gIGNvbnN0IFtzdGF0cywgc2V0U3RhdHNdID0gdXNlU3RhdGUoe1xuICAgIHRvdGFsUmV2ZW51ZTogMCxcbiAgICB0b3RhbFVzZXJzOiAwLFxuICAgIHRvdGFsT3JkZXJzOiAwLFxuICAgIGdyb3d0aFJhdGU6IDBcbiAgfSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgb3ZlcmZsb3ctaGlkZGVuIHNoYWRvdyByb3VuZGVkLWxnXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LXNocmluay0wXCI+XG4gICAgICAgICAgICA8VHJlbmRpbmdVcCBjbGFzc05hbWU9XCJoLTYgdy02IHRleHQtZ3JheS00MDBcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWwtNSB3LTAgZmxleC0xXCI+XG4gICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgIDxkdCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdHJ1bmNhdGVcIj5cbiAgICAgICAgICAgICAgICBHcm93dGggUmF0ZVxuICAgICAgICAgICAgICA8L2R0PlxuICAgICAgICAgICAgICA8ZGQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgICAgICAge3N0YXRzLmdyb3d0aFJhdGV9JVxuICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgPC9kbD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufWBcblxuICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IGAndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBSZWNlbnRBY3Rpdml0eSgpIHtcbiAgY29uc3QgW2FjdGl2aXRpZXMsIHNldEFjdGl2aXRpZXNdID0gdXNlU3RhdGUoW10pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHNoYWRvdyByb3VuZGVkLWxnXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTQgcHktNSBzbTpwLTZcIj5cbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgbGVhZGluZy02IGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICBSZWNlbnQgQWN0aXZpdHlcbiAgICAgICAgPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC01XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG93LXJvb3RcIj5cbiAgICAgICAgICAgIDx1bCByb2xlPVwibGlzdFwiIGNsYXNzTmFtZT1cIi1tYi04XCI+XG4gICAgICAgICAgICAgIHthY3Rpdml0aWVzLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCB0ZXh0LXNtXCI+Tm8gcmVjZW50IGFjdGl2aXR5PC9saT5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICBhY3Rpdml0aWVzLm1hcCgoYWN0aXZpdHksIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8bGkga2V5PXtpbmRleH0gY2xhc3NOYW1lPVwicmVsYXRpdmUgcGItOFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIGZsZXggc3BhY2UteC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImgtOCB3LTggcm91bmRlZC1mdWxsIGJnLWdyYXktNDAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJpbmctOCByaW5nLXdoaXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdGV4dC1zbVwiPuKAojwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi13LTAgZmxleC0xIHB0LTEuNSBmbGV4IGp1c3RpZnktYmV0d2VlbiBzcGFjZS14LTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpdml0eS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmlnaHQgdGV4dC1zbSB3aGl0ZXNwYWNlLW5vd3JhcCB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHthY3Rpdml0eS50aW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufWBcblxuICBjb25zdCBjaGFydFdpZGdldCA9IGAndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDaGFydFdpZGdldCgpIHtcbiAgY29uc3QgW2NoYXJ0RGF0YSwgc2V0Q2hhcnREYXRhXSA9IHVzZVN0YXRlKFtdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBzaGFkb3cgcm91bmRlZC1sZ1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJweC00IHB5LTUgc206cC02XCI+XG4gICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGxlYWRpbmctNiBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+XG4gICAgICAgICAgQW5hbHl0aWNzIE92ZXJ2aWV3XG4gICAgICAgIDwvaDM+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC02NCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTUwIHJvdW5kZWRcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj5DaGFydCB2aXN1YWxpemF0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQgaGVyZTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufWBcblxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGNvbXBvbmVudHNEaXIsICdTdGF0c092ZXJ2aWV3LnRzeCcpLCBzdGF0c092ZXJ2aWV3KVxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGNvbXBvbmVudHNEaXIsICdSZWNlbnRBY3Rpdml0eS50c3gnKSwgcmVjZW50QWN0aXZpdHkpXG4gIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4oY29tcG9uZW50c0RpciwgJ0NoYXJ0V2lkZ2V0LnRzeCcpLCBjaGFydFdpZGdldClcbn1cblxuLy8gR2VuZXJhdGUgY3VzdG9tIEFQSSByb3V0ZXNcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tQVBJUm91dGVzKGNvbmZpZzogWWFtbENvbmZpZywgYXBpRGlyOiBzdHJpbmcpIHtcbiAgLy8gR2VuZXJhdGUgQVBJIHJvdXRlcyBmb3IgZWFjaCBtb2RlbCB3aXRoIHRlbmFudCBpc29sYXRpb25cbiAgZm9yIChjb25zdCBtb2RlbCBvZiBjb25maWcuZGF0YWJhc2UubW9kZWxzKSB7XG4gICAgY29uc3QgYXBpUm91dGUgPSBgaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRlbmFudCBJRCBmcm9tIGhlYWRlcnMgKHNldCBieSBtaWRkbGV3YXJlKVxuICAgIGNvbnN0IHRlbmFudElkID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC10ZW5hbnQtaWQnKVxuICAgIFxuICAgIGlmICghdGVuYW50SWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVGVuYW50IG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwMyB9KVxuICAgIH1cbiAgICBcbiAgICBjb25zdCAke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zID0gYXdhaXQgcHJpc21hLiR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfS5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyB0ZW5hbnRJZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB0ZW5hbnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgc2x1ZzogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbigke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nICR7bW9kZWwubmFtZX1zOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoICR7bW9kZWwubmFtZX1zJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgdGVuYW50IElEIGZyb20gaGVhZGVycyAoc2V0IGJ5IG1pZGRsZXdhcmUpXG4gICAgY29uc3QgdGVuYW50SWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXRlbmFudC1pZCcpXG4gICAgY29uc3QgdXNlcklkID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC11c2VyLWlkJylcbiAgICBcbiAgICBpZiAoIXRlbmFudElkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1RlbmFudCBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgXG4gICAgLy8gRW5zdXJlIHRlbmFudCBpc29sYXRpb25cbiAgICBjb25zdCAke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX0gPSBhd2FpdCBwcmlzbWEuJHttb2RlbC5uYW1lLnRvTG93ZXJDYXNlKCl9LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIHRlbmFudElkIC8vIEFsd2F5cyBzZXQgdGVuYW50IElEXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB0ZW5hbnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgc2x1ZzogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbigke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgJHttb2RlbC5uYW1lfTonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgJHttb2RlbC5uYW1lfScgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59YFxuXG4gICAgY29uc3QgbW9kZWxBcGlEaXIgPSBwYXRoLmpvaW4oYXBpRGlyLCBtb2RlbC5uYW1lLnRvTG93ZXJDYXNlKCkgKyAncycpXG4gICAgYXdhaXQgZnMubWtkaXIobW9kZWxBcGlEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihtb2RlbEFwaURpciwgJ3JvdXRlLnRzJyksIGFwaVJvdXRlKVxuICB9XG4gIFxuICAvLyBHZW5lcmF0ZSB0ZW5hbnQgbWFuYWdlbWVudCBBUElcbiAgY29uc3QgdGVuYW50QXBpUm91dGUgPSBgaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgVGVuYW50TWFuYWdlciB9IGZyb20gJ0BvcHNhaS9tdWx0aS10ZW5hbnQnXG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gJ0BvcHNhaS9hdXRoJ1xuXG5jb25zdCB0ZW5hbnRNYW5hZ2VyID0gVGVuYW50TWFuYWdlci5nZXRJbnN0YW5jZShcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSFcbilcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG5hbWUsIHNsdWcgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgXG4gICAgY29uc3QgdGVuYW50ID0gYXdhaXQgdGVuYW50TWFuYWdlci5jcmVhdGVUZW5hbnQoe1xuICAgICAgbmFtZSxcbiAgICAgIHNsdWcsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgdGltZXpvbmU6ICdVVEMnLFxuICAgICAgICBjdXJyZW5jeTogJ1VTRCcsXG4gICAgICAgIGxhbmd1YWdlOiAnZW4nXG4gICAgICB9LFxuICAgICAgY29uZmlnOiB7fSAvLyBXaWxsIGJlIHNldCBsYXRlclxuICAgIH0pXG4gICAgXG4gICAgLy8gU2V0dXAgdGVuYW50IGRhdGFiYXNlIHNjaGVtYVxuICAgIGF3YWl0IHRlbmFudE1hbmFnZXIuc2V0dXBUZW5hbnREYXRhYmFzZSh0ZW5hbnQuaWQsIHt9IGFzIGFueSlcbiAgICBcbiAgICAvLyBFbmFibGUgcm93LWxldmVsIHNlY3VyaXR5XG4gICAgYXdhaXQgdGVuYW50TWFuYWdlci5lbmFibGVSTFModGVuYW50LmlkKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih0ZW5hbnQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdGVuYW50OicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSB0ZW5hbnQnIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdGVuYW50SWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXRlbmFudC1pZCcpXG4gICAgXG4gICAgaWYgKCF0ZW5hbnRJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdUZW5hbnQgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDAzIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRlbmFudCA9IGF3YWl0IHRlbmFudE1hbmFnZXIuZ2V0VGVuYW50KHRlbmFudElkKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih0ZW5hbnQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdGVuYW50OicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHRlbmFudCcgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59YFxuICBcbiAgY29uc3QgdGVuYW50QXBpRGlyID0gcGF0aC5qb2luKGFwaURpciwgJ3RlbmFudHMnKVxuICBhd2FpdCBmcy5ta2Rpcih0ZW5hbnRBcGlEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4odGVuYW50QXBpRGlyLCAncm91dGUudHMnKSwgdGVuYW50QXBpUm91dGUpXG4gIFxuICAvLyBHZW5lcmF0ZSBhdXRoIEFQSSByb3V0ZXNcbiAgY29uc3QgYXV0aEFwaVJvdXRlID0gYGltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IEF1dGhTZXJ2aWNlIH0gZnJvbSAnQG9wc2FpL2F1dGgnXG5pbXBvcnQgeyBUZW5hbnRNYW5hZ2VyIH0gZnJvbSAnQG9wc2FpL211bHRpLXRlbmFudCdcblxuY29uc3QgYXV0aFNlcnZpY2UgPSBuZXcgQXV0aFNlcnZpY2Uoe1xuICBzdXBhYmFzZVVybDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgc3VwYWJhc2VBbm9uS2V5OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gIGp3dFNlY3JldDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCFcbn0pXG5cbmNvbnN0IHRlbmFudE1hbmFnZXIgPSBUZW5hbnRNYW5hZ2VyLmdldEluc3RhbmNlKFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxuKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgYWN0aW9uLCAuLi5kYXRhIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIFxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdsb2dpbic6XG4gICAgICAgIGNvbnN0IGxvZ2luUmVzdWx0ID0gYXdhaXQgYXV0aFNlcnZpY2UubG9naW4oZGF0YSlcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGxvZ2luUmVzdWx0KVxuICAgICAgICBcbiAgICAgIGNhc2UgJ3JlZ2lzdGVyJzpcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJSZXN1bHQgPSBhd2FpdCBhdXRoU2VydmljZS5yZWdpc3RlcihkYXRhKVxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVnaXN0ZXJSZXN1bHQpXG4gICAgICAgIFxuICAgICAgY2FzZSAnbG9nb3V0JzpcbiAgICAgICAgYXdhaXQgYXV0aFNlcnZpY2UubG9nb3V0KGRhdGEudG9rZW4pXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICAgICAgXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgYWN0aW9uJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSlcbiAgfVxufWBcbiAgXG4gIGNvbnN0IGF1dGhBcGlEaXIgPSBwYXRoLmpvaW4oYXBpRGlyLCAnYXV0aCcpXG4gIGF3YWl0IGZzLm1rZGlyKGF1dGhBcGlEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4oYXV0aEFwaURpciwgJ3JvdXRlLnRzJyksIGF1dGhBcGlSb3V0ZSlcblxuICBjb25zb2xlLmxvZygn8J+UjCBDdXN0b20gQVBJIHJvdXRlcyBnZW5lcmF0ZWQnKVxufVxuXG4vLyBHZW5lcmF0ZSBjdXN0b20gZGF0YSBwYWdlc1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDdXN0b21EYXRhUGFnZXMoY29uZmlnOiBZYW1sQ29uZmlnLCBhcHBEaXI6IHN0cmluZykge1xuICBmb3IgKGNvbnN0IG1vZGVsIG9mIGNvbmZpZy5kYXRhYmFzZS5tb2RlbHMpIHtcbiAgICBjb25zdCBtb2RlbFBhZ2UgPSBgJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluaydcbmltcG9ydCB7IFBsdXMsIEVkaXQsIFRyYXNoMiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcblxuaW50ZXJmYWNlICR7bW9kZWwubmFtZX0ge1xuICBpZDogc3RyaW5nXG4gICR7bW9kZWwuZmllbGRzLm1hcChmaWVsZCA9PiBgJHtmaWVsZC5uYW1lfTogJHtmaWVsZC50eXBlID09PSAnRGF0ZVRpbWUnID8gJ3N0cmluZycgOiAnc3RyaW5nJ31gKS5qb2luKCdcXG4gICcpfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAke21vZGVsLm5hbWV9TGlzdCgpIHtcbiAgY29uc3QgWyR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfXMsIHNldCR7bW9kZWwubmFtZX1zXSA9IHVzZVN0YXRlPCR7bW9kZWwubmFtZX1bXT4oW10pXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaCgnL2FwaS8ke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zJylcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIHNldCR7bW9kZWwubmFtZX1zKGRhdGEpXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgJHttb2RlbC5uYW1lfXM6JywgZXJyb3IpXG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgICB9KVxuICB9LCBbXSlcblxuICBjb25zdCBoYW5kbGVEZWxldGUgPSBhc3luYyAoaWQ6IHN0cmluZykgPT4ge1xuICAgIGlmIChjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgJHttb2RlbC5uYW1lfT8nKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZmV0Y2goXFxgL2FwaS8ke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zL1xcJHtpZH1cXGAsIHsgbWV0aG9kOiAnREVMRVRFJyB9KVxuICAgICAgICBzZXQke21vZGVsLm5hbWV9cygke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgIT09IGlkKSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nICR7bW9kZWwubmFtZX06JywgZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGxvYWRpbmcpIHtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwLThcIj5Mb2FkaW5nLi4uPC9kaXY+XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicC04XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNtOmZsZXggc206aXRlbXMtY2VudGVyIG1iLThcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbTpmbGV4LWF1dG9cIj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+JHttb2RlbC5uYW1lfXM8L2gxPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTIgdGV4dC1zbSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICBNYW5hZ2UgeW91ciAke21vZGVsLm5hbWV9c1xuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNCBzbTptdC0wIHNtOm1sLTE2IHNtOmZsZXgtbm9uZVwiPlxuICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICBocmVmPVwiLyR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfXMvbmV3XCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgYmctaW5kaWdvLTYwMCBweC00IHB5LTIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXdoaXRlIHNoYWRvdy1zbSBob3ZlcjpiZy1pbmRpZ28tNzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1pbmRpZ28tNTAwIGZvY3VzOnJpbmctb2Zmc2V0LTIgc206dy1hdXRvXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8UGx1cyBjbGFzc05hbWU9XCJoLTQgdy00IG1yLTJcIiAvPlxuICAgICAgICAgICAgQWRkICR7bW9kZWwubmFtZX1cbiAgICAgICAgICA8L0xpbms+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtOCBmbG93LXJvb3RcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCItbXktMiAtbXgtNiBvdmVyZmxvdy14LWF1dG8gbGc6LW14LThcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1ibG9jayBtaW4tdy1mdWxsIHB5LTIgYWxpZ24tbWlkZGxlIHNtOnB4LTYgbGc6cHgtOFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvdmVyZmxvdy1oaWRkZW4gc2hhZG93IHJpbmctMSByaW5nLWJsYWNrIHJpbmctb3BhY2l0eS01IG1kOnJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cIm1pbi13LWZ1bGwgZGl2aWRlLXkgZGl2aWRlLWdyYXktMzAwXCI+XG4gICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzTmFtZT1cImJnLWdyYXktNTBcIj5cbiAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgJHttb2RlbC5maWVsZHMubWFwKGZpZWxkID0+IGA8dGggY2xhc3NOYW1lPVwicHgtNiBweS0zIHRleHQtbGVmdCB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZmllbGQubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICA8L3RoPmApLmpvaW4oJ1xcbiAgICAgICAgICAgICAgICAgICAgJyl9XG4gICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJyZWxhdGl2ZSBweC02IHB5LTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzci1vbmx5XCI+QWN0aW9uczwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICA8dGJvZHkgY2xhc3NOYW1lPVwiZGl2aWRlLXkgZGl2aWRlLWdyYXktMjAwIGJnLXdoaXRlXCI+XG4gICAgICAgICAgICAgICAgICB7JHttb2RlbC5uYW1lLnRvTG93ZXJDYXNlKCl9cy5tYXAoKCR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfSkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8dHIga2V5PXske21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX0uaWR9PlxuICAgICAgICAgICAgICAgICAgICAgICR7bW9kZWwuZmllbGRzLm1hcChmaWVsZCA9PiBgPHRkIGNsYXNzTmFtZT1cIndoaXRlc3BhY2Utbm93cmFwIHB4LTYgcHktNCB0ZXh0LXNtIHRleHQtZ3JheS05MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgeyR7bW9kZWwubmFtZS50b0xvd2VyQ2FzZSgpfS4ke2ZpZWxkLm5hbWV9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5gKS5qb2luKCdcXG4gICAgICAgICAgICAgICAgICAgICAgJyl9XG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cInJlbGF0aXZlIHdoaXRlc3BhY2Utbm93cmFwIHB5LTQgcGwtMyBwci00IHRleHQtcmlnaHQgdGV4dC1zbSBmb250LW1lZGl1bSBzbTpwci02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZURlbGV0ZSgke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX0uaWQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgaG92ZXI6dGV4dC1yZWQtOTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9XCJoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1gXG5cbiAgICBjb25zdCBtb2RlbFBhZ2VEaXIgPSBwYXRoLmpvaW4oYXBwRGlyLCBtb2RlbC5uYW1lLnRvTG93ZXJDYXNlKCkgKyAncycpXG4gICAgYXdhaXQgZnMubWtkaXIobW9kZWxQYWdlRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4obW9kZWxQYWdlRGlyLCAncGFnZS50c3gnKSwgbW9kZWxQYWdlKVxuICB9XG5cbiAgY29uc29sZS5sb2coJ/Cfk4QgQ3VzdG9tIGRhdGEgcGFnZXMgZ2VuZXJhdGVkJylcbn1cblxuLy8gR2VuZXJhdGUgY3VzdG9tIHV0aWxpdHkgZmlsZXNcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tVXRpbGl0eUZpbGVzKGNvbmZpZzogWWFtbENvbmZpZywgbGliRGlyOiBzdHJpbmcpIHtcbiAgY29uc3QgZ2xvYmFsc0NzcyA9IGBAdGFpbHdpbmQgYmFzZTtcbkB0YWlsd2luZCBjb21wb25lbnRzO1xuQHRhaWx3aW5kIHV0aWxpdGllcztcblxuOnJvb3Qge1xuICAtLWZvcmVncm91bmQtcmdiOiAwLCAwLCAwO1xuICAtLWJhY2tncm91bmQtc3RhcnQtcmdiOiAyMTQsIDIxOSwgMjIwO1xuICAtLWJhY2tncm91bmQtZW5kLXJnYjogMjU1LCAyNTUsIDI1NTtcbn1cblxuQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaykge1xuICA6cm9vdCB7XG4gICAgLS1mb3JlZ3JvdW5kLXJnYjogMjU1LCAyNTUsIDI1NTtcbiAgICAtLWJhY2tncm91bmQtc3RhcnQtcmdiOiAwLCAwLCAwO1xuICAgIC0tYmFja2dyb3VuZC1lbmQtcmdiOiAwLCAwLCAwO1xuICB9XG59XG5cbmJvZHkge1xuICBjb2xvcjogcmdiKHZhcigtLWZvcmVncm91bmQtcmdiKSk7XG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICAgIHRvIGJvdHRvbSxcbiAgICAgIHRyYW5zcGFyZW50LFxuICAgICAgcmdiKHZhcigtLWJhY2tncm91bmQtZW5kLXJnYikpXG4gICAgKVxuICAgIHJnYih2YXIoLS1iYWNrZ3JvdW5kLXN0YXJ0LXJnYikpO1xufWBcblxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGxpYkRpciwgJ2dsb2JhbHMuY3NzJyksIGdsb2JhbHNDc3MpXG4gIGNvbnNvbGUubG9nKCfwn46oIEN1c3RvbSB1dGlsaXR5IGZpbGVzIGdlbmVyYXRlZCcpXG59XG5cbi8vIEdlbmVyYXRlIGN1c3RvbSBwYWNrYWdlLmpzb25cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tUGFja2FnZUpzb24oY29uZmlnOiBZYW1sQ29uZmlnLCBvdXRwdXREaXI6IHN0cmluZykge1xuICBjb25zdCBidXNpbmVzc1R5cGUgPSBjb25maWcudmVydGljYWwuaW5kdXN0cnkudG9Mb3dlckNhc2UoKVxuICBcbiAgbGV0IGRlcGVuZGVuY2llczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBcIm5leHRcIjogXCJeMTQuMC4wXCIsXG4gICAgXCJyZWFjdFwiOiBcIl4xOC4wLjBcIixcbiAgICBcInJlYWN0LWRvbVwiOiBcIl4xOC4wLjBcIixcbiAgICBcIkBwcmlzbWEvY2xpZW50XCI6IFwiXjUuMC4wXCIsXG4gICAgXCJsdWNpZGUtcmVhY3RcIjogXCJeMC4yNjMuMFwiLFxuICAgIFwidGFpbHdpbmRjc3NcIjogXCJeMy4zLjBcIixcbiAgICBcImF1dG9wcmVmaXhlclwiOiBcIl4xMC40LjE0XCIsXG4gICAgXCJwb3N0Y3NzXCI6IFwiXjguNC4yNFwiLFxuICAgIC8vIE9wc0FJIENvcmUgcGFja2FnZXNcbiAgICBcIkBvcHNhaS9hdXRoXCI6IFwid29ya3NwYWNlOipcIixcbiAgICBcIkBvcHNhaS9pbnRlZ3JhdGlvblwiOiBcIndvcmtzcGFjZToqXCIsXG4gICAgXCJAb3BzYWkvZGF0YWJhc2VcIjogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgIFwiQG9wc2FpL3VpXCI6IFwid29ya3NwYWNlOipcIixcbiAgICBcIkBvcHNhaS9zaGFyZWRcIjogXCJ3b3Jrc3BhY2U6KlwiLFxuICAgIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI6IFwiXjIuMzkuMFwiLFxuICAgIFwianNvbndlYnRva2VuXCI6IFwiXjkuMC4wXCIsXG4gICAgXCJiY3J5cHRqc1wiOiBcIl4yLjQuM1wiXG4gIH1cblxuICAvLyBBZGQgYnVzaW5lc3Mtc3BlY2lmaWMgZGVwZW5kZW5jaWVzXG4gIGlmIChidXNpbmVzc1R5cGUgPT09ICdoZWFsdGhjYXJlJykge1xuICAgIGRlcGVuZGVuY2llcyA9IHtcbiAgICAgIC4uLmRlcGVuZGVuY2llcyxcbiAgICAgIFwiY2hhcnQuanNcIjogXCJeNC4wLjBcIixcbiAgICAgIFwicmVhY3QtY2hhcnRqcy0yXCI6IFwiXjUuMC4wXCIsXG4gICAgICBcImRhdGUtZm5zXCI6IFwiXjIuMzAuMFwiXG4gICAgfVxuICB9IGVsc2UgaWYgKGJ1c2luZXNzVHlwZSA9PT0gJ2Vjb21tZXJjZScpIHtcbiAgICBkZXBlbmRlbmNpZXMgPSB7XG4gICAgICAuLi5kZXBlbmRlbmNpZXMsXG4gICAgICBcInN0cmlwZVwiOiBcIl4xMi4wLjBcIixcbiAgICAgIFwicmVhY3QtaG9vay1mb3JtXCI6IFwiXjcuNDUuMFwiLFxuICAgICAgXCJ6b2RcIjogXCJeMy4yMi4wXCJcbiAgICB9XG4gIH0gZWxzZSBpZiAoYnVzaW5lc3NUeXBlID09PSAncmVhbF9lc3RhdGUnKSB7XG4gICAgZGVwZW5kZW5jaWVzID0ge1xuICAgICAgLi4uZGVwZW5kZW5jaWVzLFxuICAgICAgXCJsZWFmbGV0XCI6IFwiXjEuOS4wXCIsXG4gICAgICBcInJlYWN0LWxlYWZsZXRcIjogXCJeNC4yLjBcIixcbiAgICAgIFwicmVhY3QtZGF0ZXBpY2tlclwiOiBcIl40LjE2LjBcIlxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHBhY2thZ2VKc29uID0ge1xuICAgIG5hbWU6IGNvbmZpZy52ZXJ0aWNhbC5uYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpLFxuICAgIHZlcnNpb246IFwiMS4wLjBcIixcbiAgICBwcml2YXRlOiB0cnVlLFxuICAgIHNjcmlwdHM6IHtcbiAgICAgIFwiZGV2XCI6IFwibmV4dCBkZXZcIixcbiAgICAgIFwiYnVpbGRcIjogXCJuZXh0IGJ1aWxkXCIsXG4gICAgICBcInN0YXJ0XCI6IFwibmV4dCBzdGFydFwiLFxuICAgICAgXCJsaW50XCI6IFwibmV4dCBsaW50XCIsXG4gICAgICBcImRiOmdlbmVyYXRlXCI6IFwicHJpc21hIGdlbmVyYXRlXCIsXG4gICAgICBcImRiOnB1c2hcIjogXCJwcmlzbWEgZGIgcHVzaFwiXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXMsXG4gICAgZGV2RGVwZW5kZW5jaWVzOiB7XG4gICAgICBcInR5cGVzY3JpcHRcIjogXCJeNS4wLjBcIixcbiAgICAgIFwiQHR5cGVzL25vZGVcIjogXCJeMjAuMC4wXCIsXG4gICAgICBcIkB0eXBlcy9yZWFjdFwiOiBcIl4xOC4wLjBcIixcbiAgICAgIFwiQHR5cGVzL3JlYWN0LWRvbVwiOiBcIl4xOC4wLjBcIixcbiAgICAgIFwicHJpc21hXCI6IFwiXjUuMC4wXCIsXG4gICAgICBcImVzbGludFwiOiBcIl44LjAuMFwiLFxuICAgICAgXCJlc2xpbnQtY29uZmlnLW5leHRcIjogXCJeMTQuMC4wXCJcbiAgICB9XG4gIH1cblxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKG91dHB1dERpciwgJ3BhY2thZ2UuanNvbicpLCBKU09OLnN0cmluZ2lmeShwYWNrYWdlSnNvbiwgbnVsbCwgMikpXG4gIGNvbnNvbGUubG9nKCfwn5OmIEN1c3RvbSBwYWNrYWdlLmpzb24gZ2VuZXJhdGVkJylcbn1cblxuLy8gR2VuZXJhdGUgY3VzdG9tIFJFQURNRVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVDdXN0b21SRUFETUUoY29uZmlnOiBZYW1sQ29uZmlnLCBvdXRwdXREaXI6IHN0cmluZykge1xuICBjb25zdCByZWFkbWVDb250ZW50ID0gYCMgJHtjb25maWcuYnVzaW5lc3MubmFtZX1cblxuVGhpcyBpcyBhIGdlbmVyYXRlZCBOZXh0LmpzIGFwcGxpY2F0aW9uIHBvd2VyZWQgYnkgT1BTQUkuXG5cbiMjIEdldHRpbmcgU3RhcnRlZFxuXG4xLiBJbnN0YWxsIGRlcGVuZGVuY2llczpcblxcYFxcYFxcYGJhc2hcbm5wbSBpbnN0YWxsXG5cXGBcXGBcXGBcblxuMi4gU2V0IHVwIHRoZSBkYXRhYmFzZTpcblxcYFxcYFxcYGJhc2hcbm5wbSBydW4gZGI6Z2VuZXJhdGVcbm5wbSBydW4gZGI6cHVzaFxuXFxgXFxgXFxgXG5cbjMuIFJ1biB0aGUgZGV2ZWxvcG1lbnQgc2VydmVyOlxuXFxgXFxgXFxgYmFzaFxubnBtIHJ1biBkZXZcblxcYFxcYFxcYFxuXG40LiBPcGVuIFtodHRwOi8vbG9jYWxob3N0OjMwMDBdKGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCkgd2l0aCB5b3VyIGJyb3dzZXIuXG5cbiMjIEZlYXR1cmVzXG5cbi0gQ29tcGxldGUgZGFzaGJvYXJkIHdpdGggYW5hbHl0aWNzXG4tIENSVUQgb3BlcmF0aW9ucyBmb3IgYWxsIGRhdGEgbW9kZWxzXG4tIEFQSSBlbmRwb2ludHMgZm9yIGludGVncmF0aW9uc1xuLSBSZXNwb25zaXZlIGRlc2lnbiB3aXRoIFRhaWx3aW5kIENTU1xuLSBEYXRhYmFzZSBpbnRlZ3JhdGlvbiB3aXRoIFByaXNtYVxuXG4jIyBHZW5lcmF0ZWQgTW9kZWxzXG5cbiR7Y29uZmlnLmRhdGFiYXNlLm1vZGVscy5tYXAobW9kZWwgPT4gYC0gJHttb2RlbC5uYW1lfWApLmpvaW4oJ1xcbicpfVxuXG4jIyBBUEkgRW5kcG9pbnRzXG5cbiR7Y29uZmlnLmRhdGFiYXNlLm1vZGVscy5tYXAobW9kZWwgPT4gYC0gXFxgL2FwaS8ke21vZGVsLm5hbWUudG9Mb3dlckNhc2UoKX1zXFxgIC0gQ1JVRCBvcGVyYXRpb25zIGZvciAke21vZGVsLm5hbWV9YCkuam9pbignXFxuJyl9XG5cbkdlbmVyYXRlZCBieSBPUFNBSSBvbiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cbmBcblxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKG91dHB1dERpciwgJ1JFQURNRS5tZCcpLCByZWFkbWVDb250ZW50KVxuICBjb25zb2xlLmxvZygn8J+TliBDdXN0b20gUkVBRE1FIGdlbmVyYXRlZCcpXG59XG5cbi8vIEdlbmVyYXRlIGF1dGhlbnRpY2F0aW9uIHN5c3RlbVxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBdXRoZW50aWNhdGlvblN5c3RlbShjb25maWc6IFlhbWxDb25maWcsIG91dHB1dERpcjogc3RyaW5nKSB7XG4gIGNvbnN0IGF1dGhEaXIgPSBwYXRoLmpvaW4ob3V0cHV0RGlyLCAnYXBwJywgJ2F1dGgnKVxuICBjb25zdCBtaWRkbGV3YXJlRGlyID0gcGF0aC5qb2luKG91dHB1dERpciwgJ21pZGRsZXdhcmUnKVxuICBcbiAgYXdhaXQgZnMubWtkaXIoYXV0aERpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgYXdhaXQgZnMubWtkaXIobWlkZGxld2FyZURpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcbiAgXG4gIC8vIEdlbmVyYXRlIGxvZ2luIHBhZ2VcbiAgY29uc3QgbG9naW5QYWdlID0gYCd1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tICdAb3BzYWkvYXV0aCdcbmltcG9ydCB7IENhcmQgfSBmcm9tICdAb3BzYWkvdWknXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIExvZ2luUGFnZSgpIHtcbiAgY29uc3QgW2VtYWlsLCBzZXRFbWFpbF0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW3Bhc3N3b3JkLCBzZXRQYXNzd29yZF0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGUoJycpXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpXG4gIFxuICBjb25zdCBhdXRoU2VydmljZSA9IG5ldyBBdXRoU2VydmljZSh7XG4gICAgc3VwYWJhc2VVcmw6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgc3VwYWJhc2VBbm9uS2V5OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gICAgand0U2VjcmV0OiBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIVxuICB9KVxuXG4gIGNvbnN0IGhhbmRsZUxvZ2luID0gYXN5bmMgKGU6IFJlYWN0LkZvcm1FdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHNldExvYWRpbmcodHJ1ZSlcbiAgICBzZXRFcnJvcignJylcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF1dGhTZXJ2aWNlLmxvZ2luKHsgZW1haWwsIHBhc3N3b3JkIH0pXG4gICAgICBpZiAocmVzcG9uc2UudG9rZW4pIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F1dGhfdG9rZW4nLCByZXNwb25zZS50b2tlbilcbiAgICAgICAgcm91dGVyLnB1c2goJy8nKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdMb2dpbiBmYWlsZWQnKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS01MFwiPlxuICAgICAgPENhcmQgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kIHAtOFwiPlxuICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtY2VudGVyIG1iLTZcIj5Mb2dpbiB0byAke2NvbmZpZy5idXNpbmVzcy5uYW1lfTwvaDE+XG4gICAgICAgIFxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlTG9naW59IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5FbWFpbDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2VtYWlsfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xXCI+UGFzc3dvcmQ8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtwYXNzd29yZH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwIHRleHQtc21cIj57ZXJyb3J9PC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcHktMiByb3VuZGVkLW1kIGhvdmVyOmJnLWJsdWUtNzAwIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtsb2FkaW5nID8gJ0xvZ2dpbmcgaW4uLi4nIDogJ0xvZ2luJ31cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICBcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbXQtNCB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICBEb24ndCBoYXZlIGFuIGFjY291bnQ/IDxhIGhyZWY9XCIvYXV0aC9yZWdpc3RlclwiIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDAgaG92ZXI6dW5kZXJsaW5lXCI+UmVnaXN0ZXI8L2E+XG4gICAgICAgIDwvcD5cbiAgICAgIDwvQ2FyZD5cbiAgICA8L2Rpdj5cbiAgKVxufWBcbiAgXG4gIGF3YWl0IGZzLndyaXRlRmlsZShwYXRoLmpvaW4oYXV0aERpciwgJ2xvZ2luJywgJ3BhZ2UudHN4JyksIGxvZ2luUGFnZSlcbiAgXG4gIC8vIEdlbmVyYXRlIHJlZ2lzdGVyIHBhZ2VcbiAgY29uc3QgcmVnaXN0ZXJQYWdlID0gYCd1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJ1xuaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tICdAb3BzYWkvYXV0aCdcbmltcG9ydCB7IENhcmQgfSBmcm9tICdAb3BzYWkvdWknXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlZ2lzdGVyUGFnZSgpIHtcbiAgY29uc3QgW2Zvcm1EYXRhLCBzZXRGb3JtRGF0YV0gPSB1c2VTdGF0ZSh7XG4gICAgZW1haWw6ICcnLFxuICAgIHBhc3N3b3JkOiAnJyxcbiAgICBmaXJzdE5hbWU6ICcnLFxuICAgIGxhc3ROYW1lOiAnJyxcbiAgICB0ZW5hbnROYW1lOiAnJ1xuICB9KVxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKClcbiAgXG4gIGNvbnN0IGF1dGhTZXJ2aWNlID0gbmV3IEF1dGhTZXJ2aWNlKHtcbiAgICBzdXBhYmFzZVVybDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICBzdXBhYmFzZUFub25LZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICBqd3RTZWNyZXQ6IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQhXG4gIH0pXG5cbiAgY29uc3QgaGFuZGxlUmVnaXN0ZXIgPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc2V0TG9hZGluZyh0cnVlKVxuICAgIHNldEVycm9yKCcnKVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSB0ZW5hbnQgZmlyc3RcbiAgICAgIGNvbnN0IHRlbmFudElkID0gYXdhaXQgY3JlYXRlVGVuYW50KGZvcm1EYXRhLnRlbmFudE5hbWUpXG4gICAgICBcbiAgICAgIC8vIFJlZ2lzdGVyIHVzZXIgd2l0aCB0ZW5hbnRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXV0aFNlcnZpY2UucmVnaXN0ZXIoe1xuICAgICAgICAuLi5mb3JtRGF0YSxcbiAgICAgICAgdGVuYW50SWQsXG4gICAgICAgIHJvbGU6ICdhZG1pbidcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGlmIChyZXNwb25zZS50b2tlbikge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aF90b2tlbicsIHJlc3BvbnNlLnRva2VuKVxuICAgICAgICByb3V0ZXIucHVzaCgnLycpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzZXRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuICBcbiAgY29uc3QgY3JlYXRlVGVuYW50ID0gYXN5bmMgKG5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgLy8gVGhpcyB3b3VsZCBjYWxsIHRoZSB0ZW5hbnQgY3JlYXRpb24gQVBJXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS90ZW5hbnRzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgc2x1ZzogbmFtZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKSB9KVxuICAgIH0pXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIHJldHVybiBkYXRhLmlkXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYXktNTBcIj5cbiAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1tZCBwLThcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWNlbnRlciBtYi02XCI+Q3JlYXRlIFlvdXIgQWNjb3VudDwvaDE+XG4gICAgICAgIFxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlUmVnaXN0ZXJ9IGNsYXNzTmFtZT1cInNwYWNlLXktNFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtNFwiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xXCI+Rmlyc3QgTmFtZTwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEuZmlyc3ROYW1lfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0Rm9ybURhdGEoey4uLmZvcm1EYXRhLCBmaXJzdE5hbWU6IGUudGFyZ2V0LnZhbHVlfSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPkxhc3QgTmFtZTwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17Zm9ybURhdGEubGFzdE5hbWV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRGb3JtRGF0YSh7Li4uZm9ybURhdGEsIGxhc3ROYW1lOiBlLnRhcmdldC52YWx1ZX0pfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgbWItMVwiPk9yZ2FuaXphdGlvbiBOYW1lPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS50ZW5hbnROYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEZvcm1EYXRhKHsuLi5mb3JtRGF0YSwgdGVuYW50TmFtZTogZS50YXJnZXQudmFsdWV9KX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWRcIlxuICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xXCI+RW1haWw8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtmb3JtRGF0YS5lbWFpbH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRGb3JtRGF0YSh7Li4uZm9ybURhdGEsIGVtYWlsOiBlLnRhcmdldC52YWx1ZX0pfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZFwiXG4gICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5QYXNzd29yZDwvbGFiZWw+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2Zvcm1EYXRhLnBhc3N3b3JkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEZvcm1EYXRhKHsuLi5mb3JtRGF0YSwgcGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlfSl9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kXCJcbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwIHRleHQtc21cIj57ZXJyb3J9PC9kaXY+XG4gICAgICAgICAgKX1cbiAgICAgICAgICBcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcHktMiByb3VuZGVkLW1kIGhvdmVyOmJnLWJsdWUtNzAwIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtsb2FkaW5nID8gJ0NyZWF0aW5nIGFjY291bnQuLi4nIDogJ0NyZWF0ZSBBY2NvdW50J31cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICBcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgbXQtNCB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICBBbHJlYWR5IGhhdmUgYW4gYWNjb3VudD8gPGEgaHJlZj1cIi9hdXRoL2xvZ2luXCIgY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMCBob3Zlcjp1bmRlcmxpbmVcIj5Mb2dpbjwvYT5cbiAgICAgICAgPC9wPlxuICAgICAgPC9DYXJkPlxuICAgIDwvZGl2PlxuICApXG59YFxuICBcbiAgYXdhaXQgZnMubWtkaXIocGF0aC5qb2luKGF1dGhEaXIsICdyZWdpc3RlcicpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGF1dGhEaXIsICdyZWdpc3RlcicsICdwYWdlLnRzeCcpLCByZWdpc3RlclBhZ2UpXG4gIFxuICAvLyBHZW5lcmF0ZSBtaWRkbGV3YXJlIGZvciBhdXRoIHByb3RlY3Rpb25cbiAgY29uc3QgbWlkZGxld2FyZSA9IGBpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnQG9wc2FpL2F1dGgvdXRpbHMvand0LXV0aWxzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAvLyBQdWJsaWMgcm91dGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvblxuICBjb25zdCBwdWJsaWNSb3V0ZXMgPSBbJy9hdXRoL2xvZ2luJywgJy9hdXRoL3JlZ2lzdGVyJywgJy9hcGkvYXV0aCddXG4gIFxuICBpZiAocHVibGljUm91dGVzLnNvbWUocm91dGUgPT4gcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgocm91dGUpKSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpXG4gIH1cbiAgXG4gIC8vIENoZWNrIGZvciBhdXRoIHRva2VuXG4gIGNvbnN0IHRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldCgnYXV0aF90b2tlbicpPy52YWx1ZSB8fCBcbiAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk/LnJlcGxhY2UoJ0JlYXJlciAnLCAnJylcbiAgXG4gIGlmICghdG9rZW4pIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy9hdXRoL2xvZ2luJywgcmVxdWVzdC51cmwpKVxuICB9XG4gIFxuICB0cnkge1xuICAgIC8vIFZlcmlmeSB0b2tlblxuICAgIGNvbnN0IGRlY29kZWQgPSB2ZXJpZnlUb2tlbih0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCEpXG4gICAgXG4gICAgLy8gQWRkIHVzZXIgaW5mbyB0byBoZWFkZXJzIGZvciBBUEkgcm91dGVzXG4gICAgY29uc3QgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UubmV4dCgpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ3gtdXNlci1pZCcsIGRlY29kZWQudXNlcklkKVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCd4LXRlbmFudC1pZCcsIGRlY29kZWQudGVuYW50SWQpXG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvYXV0aC9sb2dpbicsIHJlcXVlc3QudXJsKSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbJy8oKD8hX25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvKS4qKSddXG59YFxuICBcbiAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihvdXRwdXREaXIsICdtaWRkbGV3YXJlLnRzJyksIG1pZGRsZXdhcmUpXG4gIFxuICBjb25zb2xlLmxvZygn8J+UkCBBdXRoZW50aWNhdGlvbiBzeXN0ZW0gZ2VuZXJhdGVkJylcbn1cblxuLy8gR2VuZXJhdGUgaW50ZWdyYXRpb24gY29uZmlndXJhdGlvblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVJbnRlZ3JhdGlvbkNvbmZpZyhjb25maWc6IFlhbWxDb25maWcsIG91dHB1dERpcjogc3RyaW5nKSB7XG4gIGNvbnN0IGludGVncmF0aW9uc0RpciA9IHBhdGguam9pbihvdXRwdXREaXIsICdsaWInLCAnaW50ZWdyYXRpb25zJylcbiAgYXdhaXQgZnMubWtkaXIoaW50ZWdyYXRpb25zRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICBcbiAgLy8gR2VuZXJhdGUgQWlyYnl0ZSBpbnRlZ3JhdGlvblxuICBjb25zdCBhaXJieXRlSW50ZWdyYXRpb24gPSBgaW1wb3J0IHsgY3JlYXRlQWlyYnl0ZUNvbm5lY3RvciB9IGZyb20gJ0BvcHNhaS9pbnRlZ3JhdGlvbidcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0BvcHNhaS9kYXRhYmFzZSdcblxuZXhwb3J0IGNsYXNzIERhdGFTeW5jU2VydmljZSB7XG4gIHByaXZhdGUgYWlyYnl0ZSA9IGNyZWF0ZUFpcmJ5dGVDb25uZWN0b3Ioe1xuICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuQUlSQllURV9BUElfS0VZLFxuICAgIGJhc2VVcmw6IHByb2Nlc3MuZW52LkFJUkJZVEVfQkFTRV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsXG4gICAgd29ya3NwYWNlSWQ6IHByb2Nlc3MuZW52LkFJUkJZVEVfV09SS1NQQUNFX0lEXG4gIH0pXG4gIFxuICBhc3luYyBzeW5jRGF0YVNvdXJjZShzb3VyY2VDb25maWc6IGFueSwgdGVuYW50SWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgQWlyYnl0ZSBzb3VyY2VcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMuYWlyYnl0ZS5leGVjdXRlKCdjcmVhdGVfc291cmNlJywge1xuICAgICAgICBuYW1lOiBcXGBcXCR7dGVuYW50SWR9LVxcJHtzb3VyY2VDb25maWcubmFtZX1cXGAsXG4gICAgICAgIHNvdXJjZVR5cGU6IHNvdXJjZUNvbmZpZy50eXBlLFxuICAgICAgICBjb25maWd1cmF0aW9uOiBzb3VyY2VDb25maWcuY29uZmlnXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgZGVzdGluYXRpb24gKG91ciBkYXRhYmFzZSlcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gYXdhaXQgdGhpcy5haXJieXRlLmV4ZWN1dGUoJ2NyZWF0ZV9kZXN0aW5hdGlvbicsIHtcbiAgICAgICAgbmFtZTogXFxgXFwke3RlbmFudElkfS1kYXRhYmFzZVxcYCxcbiAgICAgICAgZGVzdGluYXRpb25UeXBlOiAncG9zdGdyZXMnLFxuICAgICAgICBjb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLFxuICAgICAgICAgIGRhdGFiYXNlOiBcXGB0ZW5hbnRfXFwke3RlbmFudElkfVxcYCxcbiAgICAgICAgICBzY2hlbWE6ICdzeW5jZWRfZGF0YSdcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGNvbm5lY3Rpb25cbiAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCB0aGlzLmFpcmJ5dGUuZXhlY3V0ZSgnY3JlYXRlX2Nvbm5lY3Rpb24nLCB7XG4gICAgICAgIHNvdXJjZUlkOiBzb3VyY2Uuc291cmNlSWQsXG4gICAgICAgIGRlc3RpbmF0aW9uSWQ6IGRlc3RpbmF0aW9uLmRlc3RpbmF0aW9uSWQsXG4gICAgICAgIHNjaGVkdWxlOiB7IHRpbWVVbml0OiAnaG91cnMnLCB1bml0czogMSB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBUcmlnZ2VyIGluaXRpYWwgc3luY1xuICAgICAgY29uc3Qgc3luY0pvYiA9IGF3YWl0IHRoaXMuYWlyYnl0ZS5leGVjdXRlKCd0cmlnZ2VyX3N5bmMnLCB7XG4gICAgICAgIGNvbm5lY3Rpb25JZDogY29ubmVjdGlvbi5jb25uZWN0aW9uSWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIFNhdmUgc3luYyBjb25maWd1cmF0aW9uXG4gICAgICBhd2FpdCBwcmlzbWEuaW50ZWdyYXRpb24uY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRlbmFudElkLFxuICAgICAgICAgIHByb3ZpZGVyOiBzb3VyY2VDb25maWcudHlwZSxcbiAgICAgICAgICBjb25uZWN0aW9uSWQ6IGNvbm5lY3Rpb24uY29ubmVjdGlvbklkLFxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgICAgY29uZmlnOiBzb3VyY2VDb25maWdcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgc3luY0pvYklkOiBzeW5jSm9iLmpvYklkIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3luYyBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfVxuICAgIH1cbiAgfVxuICBcbiAgYXN5bmMgZ2V0U3luY1N0YXR1cyhqb2JJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuYWlyYnl0ZS5leGVjdXRlKCdnZXRfc3luY19zdGF0dXMnLCB7IGpvYklkIH0pXG4gIH1cbn1gXG4gIFxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKGludGVncmF0aW9uc0RpciwgJ2RhdGEtc3luYy50cycpLCBhaXJieXRlSW50ZWdyYXRpb24pXG4gIFxuICAvLyBHZW5lcmF0ZSBBUEkgaW50ZWdyYXRpb25zIGJhc2VkIG9uIGJ1c2luZXNzIHR5cGVcbiAgY29uc3QgaW50ZWdyYXRpb25zID0gY29uZmlnLmFwaXM/LmludGVncmF0aW9ucyB8fCBbXVxuICBmb3IgKGNvbnN0IGludGVncmF0aW9uIG9mIGludGVncmF0aW9ucykge1xuICAgIGlmIChpbnRlZ3JhdGlvbi5lbmFibGVkKSB7XG4gICAgICBjb25zdCBpbnRlZ3JhdGlvbkNvZGUgPSBnZW5lcmF0ZUludGVncmF0aW9uQ29kZShpbnRlZ3JhdGlvbi5uYW1lLCBjb25maWcudmVydGljYWwuaW5kdXN0cnkpXG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUoXG4gICAgICAgIHBhdGguam9pbihpbnRlZ3JhdGlvbnNEaXIsIGludGVncmF0aW9uLm5hbWUgKyAnLWludGVncmF0aW9uLnRzJyksXG4gICAgICAgIGludGVncmF0aW9uQ29kZVxuICAgICAgKVxuICAgIH1cbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ/CflIwgSW50ZWdyYXRpb24gY29uZmlndXJhdGlvbnMgZ2VuZXJhdGVkJylcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGludGVncmF0aW9uIGNvZGVcbmZ1bmN0aW9uIGdlbmVyYXRlSW50ZWdyYXRpb25Db2RlKGludGVncmF0aW9uTmFtZTogc3RyaW5nLCBidXNpbmVzc1R5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGludGVncmF0aW9uTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdzdHJpcGUnOiBgaW1wb3J0IFN0cmlwZSBmcm9tICdzdHJpcGUnXG5cbmV4cG9ydCBjbGFzcyBTdHJpcGVJbnRlZ3JhdGlvbiB7XG4gIHByaXZhdGUgc3RyaXBlOiBTdHJpcGVcbiAgXG4gIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nKSB7XG4gICAgdGhpcy5zdHJpcGUgPSBuZXcgU3RyaXBlKGFwaUtleSwgeyBhcGlWZXJzaW9uOiAnMjAyMy0xMC0xNicgfSlcbiAgfVxuICBcbiAgYXN5bmMgY3JlYXRlQ3VzdG9tZXIoZW1haWw6IHN0cmluZywgbmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RyaXBlLmN1c3RvbWVycy5jcmVhdGUoeyBlbWFpbCwgbmFtZSB9KVxuICB9XG4gIFxuICBhc3luYyBjcmVhdGVQYXltZW50SW50ZW50KGFtb3VudDogbnVtYmVyLCBjdXJyZW5jeTogc3RyaW5nID0gJ3VzZCcpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpcGUucGF5bWVudEludGVudHMuY3JlYXRlKHsgYW1vdW50LCBjdXJyZW5jeSB9KVxuICB9XG4gIFxuICBhc3luYyBjcmVhdGVTdWJzY3JpcHRpb24oY3VzdG9tZXJJZDogc3RyaW5nLCBwcmljZUlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpcGUuc3Vic2NyaXB0aW9ucy5jcmVhdGUoe1xuICAgICAgY3VzdG9tZXI6IGN1c3RvbWVySWQsXG4gICAgICBpdGVtczogW3sgcHJpY2U6IHByaWNlSWQgfV1cbiAgICB9KVxuICB9XG59YCxcbiAgICAncXVpY2tib29rcyc6IGBpbXBvcnQgeyBPQXV0aE1hbmFnZXIgfSBmcm9tICdAb3BzYWkvaW50ZWdyYXRpb24vYXV0aCdcblxuZXhwb3J0IGNsYXNzIFF1aWNrQm9va3NJbnRlZ3JhdGlvbiB7XG4gIHByaXZhdGUgb2F1dGg6IE9BdXRoTWFuYWdlclxuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5vYXV0aCA9IG5ldyBPQXV0aE1hbmFnZXIoJ3F1aWNrYm9va3MnKVxuICB9XG4gIFxuICBhc3luYyBjb25uZWN0KHRlbmFudElkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5vYXV0aC5nZXRBdXRob3JpemF0aW9uVXJsKHRlbmFudElkKVxuICB9XG4gIFxuICBhc3luYyBzeW5jSW52b2ljZXMoYWNjZXNzVG9rZW46IHN0cmluZykge1xuICAgIC8vIFF1aWNrQm9va3MgaW52b2ljZSBzeW5jIGxvZ2ljXG4gIH1cbn1gLFxuICAgICdzaG9waWZ5JzogYGltcG9ydCB7IFJlc3RDb25uZWN0b3IgfSBmcm9tICdAb3BzYWkvaW50ZWdyYXRpb24nXG5cbmV4cG9ydCBjbGFzcyBTaG9waWZ5SW50ZWdyYXRpb24ge1xuICBwcml2YXRlIGNvbm5lY3RvcjogUmVzdENvbm5lY3RvclxuICBcbiAgY29uc3RydWN0b3Ioc2hvcDogc3RyaW5nLCBhY2Nlc3NUb2tlbjogc3RyaW5nKSB7XG4gICAgdGhpcy5jb25uZWN0b3IgPSBuZXcgUmVzdENvbm5lY3Rvcih7XG4gICAgICBiYXNlVVJMOiBcXGBodHRwczovL1xcJHtzaG9wfS5teXNob3BpZnkuY29tL2FkbWluL2FwaS8yMDI0LTAxXFxgLFxuICAgICAgaGVhZGVyczogeyAnWC1TaG9waWZ5LUFjY2Vzcy1Ub2tlbic6IGFjY2Vzc1Rva2VuIH1cbiAgICB9KVxuICB9XG4gIFxuICBhc3luYyBnZXRQcm9kdWN0cygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0b3IuZ2V0KCcvcHJvZHVjdHMuanNvbicpXG4gIH1cbiAgXG4gIGFzeW5jIGdldE9yZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0b3IuZ2V0KCcvb3JkZXJzLmpzb24nKVxuICB9XG59YFxuICB9XG4gIFxuICByZXR1cm4gaW50ZWdyYXRpb25NYXBbaW50ZWdyYXRpb25OYW1lXSB8fCBgLy8gJHtpbnRlZ3JhdGlvbk5hbWV9IGludGVncmF0aW9uIHBsYWNlaG9sZGVyYFxufVxuXG4vLyBHZW5lcmF0ZSBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUVudmlyb25tZW50Q29uZmlnKGNvbmZpZzogWWFtbENvbmZpZywgb3V0cHV0RGlyOiBzdHJpbmcpIHtcbiAgY29uc3QgZW52RXhhbXBsZSA9IGAjIERhdGFiYXNlXG5EQVRBQkFTRV9VUkw9XCJwb3N0Z3Jlc3FsOi8vcG9zdGdyZXM6cG9zdGdyZXNAbG9jYWxob3N0OjU0MzIvYXBwX2RiXCJcblxuIyBBdXRoZW50aWNhdGlvblxuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMPVwieW91ci1zdXBhYmFzZS11cmxcIlxuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk9XCJ5b3VyLXN1cGFiYXNlLWFub24ta2V5XCJcbkpXVF9TRUNSRVQ9XCJ5b3VyLWp3dC1zZWNyZXQta2V5XCJcblxuIyBBcHAgQ29uZmlndXJhdGlvblxuTkVYVF9QVUJMSUNfQVBQX05BTUU9XCIke2NvbmZpZy5idXNpbmVzcy5uYW1lfVwiXG5ORVhUX1BVQkxJQ19BUFBfVVJMPVwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCJgXG5cbiAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbihvdXRwdXREaXIsICcuZW52LmV4YW1wbGUnKSwgZW52RXhhbXBsZSlcbiAgY29uc29sZS5sb2coJ/CfjI0gRW52aXJvbm1lbnQgY29uZmlndXJhdGlvbiBnZW5lcmF0ZWQnKVxufVxuXG4vLyBHZW5lcmF0ZSBkZXBsb3ltZW50IGNvbmZpZ3VyYXRpb25cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRGVwbG95bWVudENvbmZpZyhjb25maWc6IFlhbWxDb25maWcsIG91dHB1dERpcjogc3RyaW5nKSB7XG4gIGNvbnN0IHZlcmNlbENvbmZpZyA9IHtcbiAgICBcIm5hbWVcIjogY29uZmlnLmJ1c2luZXNzLm5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJyksXG4gICAgXCJmcmFtZXdvcmtcIjogXCJuZXh0anNcIixcbiAgICBcImJ1aWxkQ29tbWFuZFwiOiBcIm5wbSBydW4gYnVpbGRcIixcbiAgICBcIm91dHB1dERpcmVjdG9yeVwiOiBcIi5uZXh0XCIsXG4gICAgXCJpbnN0YWxsQ29tbWFuZFwiOiBcIm5wbSBpbnN0YWxsXCIsXG4gICAgXCJkZXZDb21tYW5kXCI6IFwibnBtIHJ1biBkZXZcIlxuICB9XG4gIFxuICBhd2FpdCBmcy53cml0ZUZpbGUocGF0aC5qb2luKG91dHB1dERpciwgJ3ZlcmNlbC5qc29uJyksIEpTT04uc3RyaW5naWZ5KHZlcmNlbENvbmZpZywgbnVsbCwgMikpXG4gIGNvbnNvbGUubG9nKCfwn5qAIERlcGxveW1lbnQgY29uZmlndXJhdGlvbiBnZW5lcmF0ZWQnKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgeWFtbENvbmZpZywgYXBwTmFtZSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICgheWFtbENvbmZpZyB8fCAhYXBwTmFtZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTWlzc2luZyB5YW1sQ29uZmlnIG9yIGFwcE5hbWUnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIFBhcnNlIGFuZCB2YWxpZGF0ZSBZQU1MIGNvbmZpZ3VyYXRpb25cbiAgICBsZXQgY29uZmlnOiBZYW1sQ29uZmlnXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFBhcnNpbmcgWUFNTCBjb25maWc6JywgeWFtbENvbmZpZy5zdWJzdHJpbmcoMCwgNTAwKSlcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIHBhcnNlIHRoZSBZQU1MIGNvbmZpZyBhcyBZQU1MIGZpcnN0XG4gICAgICBsZXQgcGFyc2VkQ29uZmlnXG4gICAgICB0cnkge1xuICAgICAgICAvLyBJbXBvcnQgeWFtbCBwYXJzZXJcbiAgICAgICAgY29uc3QgeWFtbCA9IHJlcXVpcmUoJ2pzLXlhbWwnKVxuICAgICAgICBwYXJzZWRDb25maWcgPSB5YW1sLmxvYWQoeWFtbENvbmZpZylcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBTdWNjZXNzZnVsbHkgcGFyc2VkIFlBTUwnKVxuICAgICAgfSBjYXRjaCAoeWFtbEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinYwgWUFNTCBwYXJzZSBmYWlsZWQsIHRyeWluZyBKU09OIGZhbGxiYWNrJylcbiAgICAgICAgLy8gSWYgWUFNTCBwYXJzaW5nIGZhaWxzLCB0aGUgeWFtbENvbmZpZyBtaWdodCBhbHJlYWR5IGJlIEpTT05cbiAgICAgICAgcGFyc2VkQ29uZmlnID0gSlNPTi5wYXJzZSh5YW1sQ29uZmlnKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygn8J+TiiBQYXJzZWQgY29uZmlnIHN0cnVjdHVyZTonLCBKU09OLnN0cmluZ2lmeShwYXJzZWRDb25maWcsIG51bGwsIDIpLnN1YnN0cmluZygwLCAxMDAwKSlcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgdGhlIHBhcnNlZCBjb25maWd1cmF0aW9uIHVzaW5nIFpvZFxuICAgICAgY29uc3QgdmFsaWRhdGlvblJlc3VsdCA9IHZhbGlkYXRlWWFtbENvbmZpZ1NhZmUocGFyc2VkQ29uZmlnKVxuICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFlBTUwgdmFsaWRhdGlvbiBmYWlsZWQ6JywgdmFsaWRhdGlvblJlc3VsdC5lcnJvcnMpXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIFlBTUwgY29uZmlndXJhdGlvbicsXG4gICAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uUmVzdWx0LmVycm9yc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uZmlnID0gdmFsaWRhdGlvblJlc3VsdC5kYXRhIVxuICAgICAgY29uc29sZS5sb2coJ+KchSBZQU1MIHZhbGlkYXRpb24gc3VjY2Vzc2Z1bCcpXG4gICAgICBjb25zb2xlLmxvZygn8J+OryBGaW5hbCBjb25maWcgZm9yIGFwcCBnZW5lcmF0aW9uOicsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikuc3Vic3RyaW5nKDAsIDEwMDApKVxuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbmZpZyBwYXJzaW5nIGVycm9yOicsIHBhcnNlRXJyb3IpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIFlBTUwgY29uZmlndXJhdGlvbicgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG91dHB1dCBkaXJlY3RvcnlcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpXG4gICAgY29uc3Qgc2FuaXRpemVkQXBwTmFtZSA9IGFwcE5hbWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJylcbiAgICBjb25zdCBvdXRwdXREaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2dlbmVyYXRlZC1hcHBzJywgc2FuaXRpemVkQXBwTmFtZSArICctJyArIHRpbWVzdGFtcClcbiAgICBcbiAgICBhd2FpdCBmcy5ta2RpcihvdXRwdXREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG5cbiAgICAvLyBHZW5lcmF0ZSB0aGUgY29tcGxldGUgY3VzdG9tIE5leHQuanMgYXBwbGljYXRpb25cbiAgICBhd2FpdCBnZW5lcmF0ZUN1c3RvbU5leHRKU0FwcChjb25maWcsIGFwcE5hbWUsIG91dHB1dERpcilcblxuICAgIC8vIEF1dG8tc3RhcnQgdGhlIGdlbmVyYXRlZCBhcHBsaWNhdGlvblxuICAgIGNvbnN0IHBvcnQgPSAzMDAwICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMClcbiAgICBjb25zb2xlLmxvZygn8J+agCBBdXRvLXN0YXJ0aW5nICcgKyBhcHBOYW1lICsgJyBvbiBwb3J0ICcgKyBwb3J0ICsgJy4uLicpXG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEluc3RhbGwgZGVwZW5kZW5jaWVzXG4gICAgICBjb25zb2xlLmxvZygn8J+TpiBJbnN0YWxsaW5nIGRlcGVuZGVuY2llcy4uLicpXG4gICAgICBhd2FpdCBleGVjQXN5bmMoJ25wbSBpbnN0YWxsJywgeyBjd2Q6IG91dHB1dERpciB9KVxuICAgICAgXG4gICAgICAvLyBTZXQgdXAgZGF0YWJhc2VcbiAgICAgIGNvbnNvbGUubG9nKCfwn5K+IFNldHRpbmcgdXAgZGF0YWJhc2UuLi4nKVxuICAgICAgYXdhaXQgZXhlY0FzeW5jKCducG0gcnVuIGRiOmdlbmVyYXRlJywgeyBjd2Q6IG91dHB1dERpciB9KVxuICAgICAgYXdhaXQgZXhlY0FzeW5jKCducG0gcnVuIGRiOnB1c2gnLCB7IGN3ZDogb3V0cHV0RGlyIH0pXG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHRoZSBhcHBsaWNhdGlvblxuICAgICAgY29uc29sZS5sb2coJ/CfmoAgU3RhcnRpbmcgYXBwbGljYXRpb24gb24gcG9ydCAnICsgcG9ydCArICcuLi4nKVxuICAgICAgZXhlY0FzeW5jKCducG0gcnVuIGRldiAtLSAtcCAnICsgcG9ydCwgeyBjd2Q6IG91dHB1dERpciB9KVxuICAgICAgICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygn4pyFIEFwcGxpY2F0aW9uIHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5IG9uIHBvcnQgJyArIHBvcnQpKVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHN0YXJ0IGFwcGxpY2F0aW9uOicsIGVycm9yKSlcbiAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRvLXNldHVwIGVycm9yOicsIGVycm9yKVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgYXBwTmFtZSxcbiAgICAgIG91dHB1dERpcixcbiAgICAgIHBvcnQsXG4gICAgICBtZXNzYWdlOiAnQXBwbGljYXRpb24gZ2VuZXJhdGVkIHN1Y2Nlc3NmdWxseSEgQWNjZXNzIGl0IGF0IGh0dHA6Ly9sb2NhbGhvc3Q6JyArIHBvcnRcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2VuZXJhdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIGFwcGxpY2F0aW9uJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgIG1lc3NhZ2U6ICdBcHAgZ2VuZXJhdGlvbiBBUEkgaXMgcnVubmluZycsXG4gICAgZW5kcG9pbnRzOiB7XG4gICAgICBQT1NUOiAnL2FwaS9nZW5lcmF0ZSAtIEdlbmVyYXRlIGEgbmV3IGFwcGxpY2F0aW9uIGZyb20gWUFNTCBjb25maWcnXG4gICAgfVxuICB9KVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJleGVjIiwicHJvbWlzaWZ5IiwiZnMiLCJwYXRoIiwiZXhlY0FzeW5jIiwiTG9jYWxZYW1sUHJvY2Vzc29yIiwicGFyc2UiLCJ5YW1sU3RyaW5nIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJKU09OIiwicGFyc2VCYXNpY1lhbWwiLCJlcnJvciIsIkVycm9yIiwibGluZXMiLCJzcGxpdCIsInJlc3VsdCIsImN1cnJlbnRTZWN0aW9uIiwiY3VycmVudEtleSIsImxpbmUiLCJ0cmltbWVkIiwiZW5kc1dpdGgiLCJzZWN0aW9uTmFtZSIsInNsaWNlIiwiaW5jbHVkZXMiLCJrZXkiLCJ2YWx1ZSIsIkxvY2FsQ2FjaGVTZXJ2aWNlIiwiZ2V0IiwiY2FjaGUiLCJzZXQiLCJ0dGwiLCJNYXAiLCJMb2NhbFNlY3VyaXR5U2VydmljZSIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiZ2VuZXJhdGVUb2tlbiIsInBheWxvYWQiLCJzdHJpbmdpZnkiLCJMb2NhbEFwcEdlbmVyYXRvciIsImdlbmVyYXRlIiwiY29uZmlnIiwiYXBwTmFtZSIsIm91dHB1dERpciIsImNvbnNvbGUiLCJsb2ciLCJMb2NhbEF1dGhTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJsb2dpbiIsImNyZWRlbnRpYWxzIiwidG9rZW4iLCJ1c2VyIiwiaWQiLCJlbWFpbCIsInJlZ2lzdGVyIiwidXNlckRhdGEiLCJMb2NhbEFpcmJ5dGVDb25uZWN0b3IiLCJleGVjdXRlIiwiYWN0aW9uIiwicGFyYW1zIiwic3VjY2VzcyIsImRhdGEiLCJMb2NhbFRlbmFudE1hbmFnZXIiLCJnZXRJbnN0YW5jZSIsImNyZWF0ZVRlbmFudCIsIm5hbWUiLCJzbHVnIiwiZ2V0VGVuYW50IiwiTG9jYWxEZXBsb3ltZW50TWFuYWdlciIsImRlcGxveSIsInN0YXR1cyIsInVybCIsInZhbGlkYXRlWWFtbENvbmZpZ1NhZmUiLCJ2ZXJ0aWNhbCIsImJ1c2luZXNzIiwiZGF0YWJhc2UiLCJlcnJvcnMiLCJjb252ZXJ0RmllbGRUeXBlIiwieWFtbFR5cGUiLCJidXNpbmVzc1R5cGUiLCJiYXNlVHlwZU1hcCIsImJ1c2luZXNzVHlwZU1hcCIsImJ1c2luZXNzVHlwZXMiLCJ0b0xvd2VyQ2FzZSIsImdlbmVyYXRlQ3VzdG9tVUlQYWdlcyIsImJhc2VQYWdlcyIsImNvbXBvbmVudHMiLCJ0eXBlIiwiZGF0YVNvdXJjZSIsImJ1c2luZXNzUGFnZXMiLCJjdXN0b21QYWdlcyIsIm1vZGVscyIsIm1hcCIsIm1vZGVsIiwiYWN0aW9ucyIsImdlbmVyYXRlQ3VzdG9tTmF2aWdhdGlvbiIsImJhc2VOYXYiLCJocmVmIiwiaWNvbiIsImJ1c2luZXNzTmF2IiwiY3VzdG9tTmF2IiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJnZW5lcmF0ZUN1c3RvbU5leHRKU0FwcCIsImFwcERpciIsImpvaW4iLCJjb21wb25lbnRzRGlyIiwibGliRGlyIiwicHJpc21hRGlyIiwiYXBpRGlyIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJnZW5lcmF0ZUN1c3RvbVByaXNtYVNjaGVtYSIsImdlbmVyYXRlQ3VzdG9tQXBwTGF5b3V0IiwiZ2VuZXJhdGVDdXN0b21NYWluUGFnZSIsImdlbmVyYXRlQ3VzdG9tRGFzaGJvYXJkQ29tcG9uZW50cyIsImdlbmVyYXRlQ3VzdG9tQVBJUm91dGVzIiwiZ2VuZXJhdGVDdXN0b21EYXRhUGFnZXMiLCJnZW5lcmF0ZUN1c3RvbVV0aWxpdHlGaWxlcyIsImdlbmVyYXRlQXV0aGVudGljYXRpb25TeXN0ZW0iLCJnZW5lcmF0ZUludGVncmF0aW9uQ29uZmlnIiwiZ2VuZXJhdGVDdXN0b21QYWNrYWdlSnNvbiIsImdlbmVyYXRlRW52aXJvbm1lbnRDb25maWciLCJnZW5lcmF0ZURlcGxveW1lbnRDb25maWciLCJnZW5lcmF0ZUN1c3RvbVJFQURNRSIsImluZHVzdHJ5Iiwic2NoZW1hQ29udGVudCIsImZvckVhY2giLCJmaWVsZHMiLCJmaWVsZCIsImZpZWxkVHlwZSIsInVuaXF1ZUNvbnN0cmFpbnQiLCJ1bmlxdWUiLCJ3cml0ZUZpbGUiLCJuYXZpZ2F0aW9uIiwibGF5b3V0Q29udGVudCIsImRlc2NyaXB0aW9uIiwiZGFzaGJvYXJkQ29udGVudCIsInNpZGViYXJDb250ZW50IiwibmF2IiwiZ2VuZXJhdGVIZWFsdGhjYXJlQ29tcG9uZW50cyIsImdlbmVyYXRlRWNvbW1lcmNlQ29tcG9uZW50cyIsImdlbmVyYXRlUmVhbEVzdGF0ZUNvbXBvbmVudHMiLCJnZW5lcmF0ZUdlbmVyaWNDb21wb25lbnRzIiwiY29tcGxpYW5jZU92ZXJ2aWV3Iiwic2FsZXNPdmVydmlldyIsInByb3BlcnR5T3ZlcnZpZXciLCJzdGF0c092ZXJ2aWV3IiwicmVjZW50QWN0aXZpdHkiLCJjaGFydFdpZGdldCIsImFwaVJvdXRlIiwibW9kZWxBcGlEaXIiLCJ0ZW5hbnRBcGlSb3V0ZSIsInRlbmFudEFwaURpciIsImF1dGhBcGlSb3V0ZSIsImF1dGhBcGlEaXIiLCJtb2RlbFBhZ2UiLCJtb2RlbFBhZ2VEaXIiLCJnbG9iYWxzQ3NzIiwiZGVwZW5kZW5jaWVzIiwicGFja2FnZUpzb24iLCJyZXBsYWNlIiwidmVyc2lvbiIsInByaXZhdGUiLCJzY3JpcHRzIiwiZGV2RGVwZW5kZW5jaWVzIiwicmVhZG1lQ29udGVudCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImF1dGhEaXIiLCJtaWRkbGV3YXJlRGlyIiwibG9naW5QYWdlIiwicmVnaXN0ZXJQYWdlIiwibWlkZGxld2FyZSIsImludGVncmF0aW9uc0RpciIsImFpcmJ5dGVJbnRlZ3JhdGlvbiIsImludGVncmF0aW9ucyIsImFwaXMiLCJpbnRlZ3JhdGlvbiIsImVuYWJsZWQiLCJpbnRlZ3JhdGlvbkNvZGUiLCJnZW5lcmF0ZUludGVncmF0aW9uQ29kZSIsImludGVncmF0aW9uTmFtZSIsImludGVncmF0aW9uTWFwIiwiZW52RXhhbXBsZSIsInZlcmNlbENvbmZpZyIsIlBPU1QiLCJyZXF1ZXN0IiwieWFtbENvbmZpZyIsImpzb24iLCJzdWJzdHJpbmciLCJwYXJzZWRDb25maWciLCJ5YW1sIiwicmVxdWlyZSIsImxvYWQiLCJ5YW1sRXJyb3IiLCJ2YWxpZGF0aW9uUmVzdWx0IiwiZGV0YWlscyIsInBhcnNlRXJyb3IiLCJ0aW1lc3RhbXAiLCJub3ciLCJzYW5pdGl6ZWRBcHBOYW1lIiwicHJvY2VzcyIsImN3ZCIsInBvcnQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0aGVuIiwiY2F0Y2giLCJtZXNzYWdlIiwiR0VUIiwiZW5kcG9pbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.30_react-dom@18.3.1_react@18.3.1","vendor-chunks/js-yaml@4.1.0"], () => (__webpack_exec__("(rsc)/../../node_modules/.pnpm/next@14.2.30_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fsegevbin%2FDesktop%2FOpsai%2Fapps%2Fopsai-onboarding&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();